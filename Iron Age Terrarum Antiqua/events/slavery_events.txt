namespace = slavery

###Maintenance###
# slavery.0 # Freeing a Slave # This event turns a slave into a former slave # Never remove the slave trait except on death or by this event!
# slavery.259 slavery.2 # AI Slaves are managed yearly
# slavery.299 #Ai slavery action event
# slavery.12 #Character owns slaves but does not have slave owner trait
# slavery.13 #Character who owns no slaves has slave owner trait
# slavery.15 # Slave Trader trait maintenance
# slavery.16 #On unlanded- lose all slaves
# slavery.20 # Dealing with out-of-place slaves

###
# slavery.300 #Breeding slaves
	#slavery.308 #Breeding slave falls pregnant

# slavery.400 #Children of slaves
# slavery.500 #Lashing slaves
# slavery.600 #Slave escaping from slavery

####Slave Camps###
# slavery.1000	Add one slave camp level - do not add slave camp levels in any other way!
# slavery.1001	Remove one slave camp level - do not remove slave camp levels in any other way! (unless you are me)
# slavery.1010	Automatically moves non-capital slave camp levels to the capital
# slavery.1020	No Provincial Slave Labor
# slavery.1021	Provincial Slave Labor Modifier calculation
# slavery.1200  Buying slave camps
# slavery.1300 	Selling slave camps
# slavery.1400  Freeing slave camps
####

# slavery.1100 # A slave distinguishes themselves
# slavery.2000 # Inform other rulers of treaty violations
# slavery.2500 # Slave raid AI
# slavery.3000 # A character becomes a liberator
# slavery.3003 # Became liberator, all slaves are freed
# slavery.4000 # Looted holding, can take slaves for camps
# slavery.4001 # Liege demands release of slave relatives
# slavery.4004 #Initial Slaver Setup event

###Unsullied Events###
# slavery.700 # Training started
# slavery.701 # Training done
# slavery.702 # Add 1000 unsullied to camp
# slavery.703 # Remove 1000 Unsullied from camp
# slavery.704 # Remove 100 Unsullied from camp
# slavery.705 # Buy Unsullied
# slavery.709 # Recruits are weak
# slavery.710 # Trained Unsullied mobilised
###

# slavery.750 # Inform vassal slavery has been outlawed throughout the Empire
# slavery.760 # Some characters unhappy with slave raid
# slavery.770 # Natives Enslaved
# slavery.780 # Slaves from raid gained


# Freeing a Slave
# This event turns a slave into a former slave
# Never remove the slave trait except on death or by this event!
character_event = {
	id = slavery.0
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		remove_trait = slave
		add_trait = former_slave
		any_spouse = { remove_spouse = ROOT }
		consort = { remove_consort = ROOT }
		slave_owner = {
			limit = { has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } }
			remove_opinion = { who = ROOT modifier = opinion_my_slave }
			reverse_remove_opinion = { who = ROOT modifier = opinion_my_owner }
			character_event = { id = slavery.1 }
		}
	}
	
	option = { name = OK }
}

character_event = {
	id = slavery.1
	desc = "EVTDESCSLAVERY1"
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY1"
	}
}
###AI Slave Management Menu###
#Slaves are managed yearly
character_event = {
	id = slavery.259
	
	is_triggered_only = yes
	hide_window = yes
	
	trigger = { 
		trait = slave 
		NOT = { has_character_flag = unsullied }
	}
	
	immediate = {
		if = {
			limit = { 
				is_ruler = yes
			}	
			character_event = { id = slavery.0 }
			break = yes
		}	
		liege = {
			if = {
				limit = {
					ai = yes
					has_opinion_modifier = { who = ROOT modifier = opinion_my_slave }
				}
				ROOT = {
					if = { #Slaves with no obvious use get sold/'culled' to NPC trader
						limit = {
							NOR = {
								is_lover = PREV
								is_consort = yes
								is_councillor = yes
								is_voter = yes
								any_child = { father = { is_liege_of = ROOT } }
								real_father = { is_liege_of = ROOT }
								is_child_of = PREV
								has_character_flag = flag_not_for_sale
								is_close_relative = PREV
								AND = {
									NOT = { dynasty = 0 }
									dynasty = PREV
								}
								
								prestige = 500
								NOT = { age = 25 }
								num_of_claims = 1
								father_even_if_dead = { 
									NOT = { trait = slave } 
									NOT = { dynasty = 0 }
								}
								mother_even_if_dead = { 
									NOT = { trait = slave } 
									NOT = { dynasty = 0 }
								}
								is_pregnant = yes
								stewardship = 10
								diplomacy = 10
								intrigue = 10
								learning = 10
								trait = skilled_warrior
								trait = master_warrior
								combat_rating = 6
								trait = dragon_rider
								trait = dragon_egg
								AND = {
									fertility = 0.1
									NOT = { cannot_outbreed_trigger = yes }
									OR = {
										AND = {
											is_female = yes
											NOT = { age = 40 }
										}
										is_female = no									
									}	
									OR = {
										is_strong_trigger = yes
										trait = fair
										is_smart_trigger = yes
										trait = genius
										trait = tall
									}									
								}
							}
						}
						liege = { wealth = 5 } 
						clear_wealth = THIS
						death = { death_reason = death_sold_slave }
						break = yes
					}	
				}	
				character_event = { id = slavery.2 }
			}
		}
	}
	
	option = {
		name = OK
	}
}	
character_event = {
	id = slavery.2
	desc = "EVTDESCSLAVERY2"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY2" #SELL
		trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_1
			# }	
			#FROM = { NOT = { has_character_flag = unsullied } }
			# There must exist at least one possible slave trader to sell to
			slave_trader = {
				is_ruler = yes
				is_alive = yes
				wealth = 40			
				NOT = { character = ROOT }
			}
			FROM = {
				prisoner = no
				NOT = { has_character_flag = unsullied }
			}
			#is_nomadic = no
			has_full_slavery_trigger = yes
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}
		}
		ai_chance = {
			factor = 0.1
			modifier = {
				factor = 0.25
				trait = slave_trader
				OR = {
					wealth = 0
					AND = {
						trait = proud
						wealth = -100
					}	
				}
			}
			modifier = {
				factor = 0
				OR = {
					is_close_relative = FROM
					AND = {
						NOT = { dynasty = 0 }
						dynasty = FROM
					}
					FROM = { real_father = { character = ROOT } }				
				}	
				OR = {
					trait = familyperson
					opinion = { who = FROM value = -50 }
				}	
			}
			modifier = {
				factor = 0
				NOT = { has_full_slavery_trigger = yes }
				NOT = { trait = greedy }
				NOT = { trait = ambitious }
				NOT = { trait = cruel }
				NOT = { trait = ruthless }
				wealth = 0
			}
			modifier = {
				factor = 0
				NOT = { has_full_slavery_trigger = yes }
				OR = {
					trait = just
					trait = honorable
					trait = honest
				}
			}
			modifier = {
				factor = 3
				OR = {
					NOT = { wealth = 0 }
					has_character_modifier = loan_timer
				}	
			}
			
			# Reasons to sell a slave rather than keep them
			modifier = {
				factor = 0
				# The slave can't be trusted
				FROM = {
					OR = {
						opinion = { who = ROOT value = 0 }
						AND = {
							opinion = { who = ROOT value = -30 }
							NOT = { ROOT = { trait = paranoid } }
						}
						AND = {
							opinion = { who = ROOT value = -60 }
							ROOT = { trait = trusting }
						}
					}
				}	
				# The seller wants or needs more money
				wealth = -25
				OR = {
					wealth = 300
					NOT = { trait = greedy }
				}
				NOT = { has_character_modifier = loan_timer }
				# The seller strongly despises the slave
				opinion = { who = FROM value = -99 }
				# The seller is responsible for taking the slave in the first place
				FROM = { NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_enslaved_me } } }
			}
			
			# Value of the Slave
			modifier = {
				factor = 0
				NOT = { trait = paranoid }
				reverse_opinion = { who = FROM value = -75 }
				FROM = { 
					OR = {
						is_voter = yes
						is_councillor = yes
					}
				}	
			}
			modifier = {
				factor = 0.2
				FROM = { 
					NOT = { age = 30 }
					OR = {
						is_married = yes
						is_consort = ROOT
						is_lover = ROOT
					}	
				}	
			}
			modifier = {
				factor = 0.2
				FROM = { has_character_flag = flag_not_for_sale }
			}		
			
			modifier = {
				factor = 3
				NOT = { reverse_opinion = { who = FROM value = -30 } }
			}
			modifier = {
				factor = 0.2
				wealth = 0
				NOT = { has_character_modifier = loan_timer }
				reverse_opinion = { who = FROM value = 0 }
			}
			modifier = {
				factor = 0
				wealth = -100
				reverse_opinion = { who = FROM value = 50 }			
			}
			modifier = {
				factor = 0
				reverse_opinion = { who = FROM value = 100 }
			}
		}
		set_character_flag = flag_slave_action
		clr_character_flag = flag_selling_prisoner_into_slavery
		clr_character_flag = flag_not_for_sale
		FROM = { character_event = { id = slavery.152 tooltip = "EVTTOOLTIPSLAVERY152" } }
		if = {
			limit = {
				NOT = { has_full_slavery_trigger = yes }
			}
			custom_tooltip = { text = TOOLTIPSLAVEILEGALSLAVERYWARNING }
		}	
	}
	option = {
		name = "EVTOPTBSLAVERY2" #NOT FOR SALE
		trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_1
			# }
			#trait = slave_trader
			has_full_slavery_trigger = yes
			FROM = { 
				NOT = { has_character_flag = flag_not_for_sale } 
				NOT = { has_character_flag = unsullied }
			}		
		}
		ai_chance = {
			factor = 0.25
			modifier = {
				factor = 4
				opinion = { who = FROM value = 49 }
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = { is_lover = ROOT }
					OR = {
						NOT = { is_consort = ROOT }
						age = 40
					}	
					is_pregnant = no
					is_councillor = no		
					NOT = { is_voter = yes }
					NOT = { has_minor_title = title_bodyguard }					
				}
				NOR = {
					any_child = { character = FROM }
					is_child_of = FROM
					FROM = { real_father_even_if_dead = { character = ROOT } }
				}
			}
			modifier = {
				factor = 0
				OR = {
					NOT = { wealth = -30 } 
					NOT = { opinion = { who = FROM value = -49 } } 
				}	
			}
		}
		FROM = {
			custom_tooltip = { text = NOTFORSALETOOLTIP }
			set_character_flag = flag_not_for_sale
			#clr_character_flag = flag_councillor_not_for_sale
		}	
	}	
	option = {
		name = "EVTOPTCSLAVERY2" #FOR SALE
		trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_1
			# }
			#trait = slave_trader
			FROM = { has_character_flag = flag_not_for_sale }
		}
		ai_chance = {
			factor = 0.25
			
			modifier = {
				factor = 0
				OR = {
					is_close_relative = FROM
					AND = {
						NOT = { dynasty = 0 }
						dynasty = FROM
					}		
				}
			}
			modifier = {
				factor = 4
				NOT = { wealth = -30 }
			}
			modifier = {
				factor = 2
				NOT = { opinion = { who = FROM value = -79 } }
			}
			modifier = {
				factor = 0
				wealth = -30
				opinion = { who = FROM value = -49 }
				OR = {
					FROM = {
						OR = {
							is_lover = ROOT
							AND = {
								is_consort = ROOT
								NOT = { age = 40 }
							}	
							is_pregnant = yes
							is_councillor = yes
							is_voter = yes
							has_minor_title = title_bodyguard
						}	
					}	
					any_child = { character = FROM }
					is_child_of = FROM
					FROM = { real_father_even_if_dead = { character = ROOT } }
				}
			}
		}
		FROM = {
			custom_tooltip = { text = FORSALETOOLTIP }
			clr_character_flag = flag_not_for_sale
			#clr_character_flag = flag_councillor_not_for_sale
		}	
	}
	option = {
		name = "EVTOPTDSLAVERY2" #BREED
		trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_1
			# }
			FROM = { 
				# Must be at least theoretically capable of breeding
				NOT = { trait = incapable }
				NOT = { trait = eunuch }
				is_married = no
				age = 16
				is_consort = no
				prisoner = no
			}
			has_full_slavery_trigger = yes
			any_courtier = {
				trait = slave
				has_opinion_modifier = { who = ROOT modifier = opinion_my_owner }
				NOT = { character = FROM }
				is_married = no
				NOT = { same_sex = FROM }
				OR = {
					is_female = no
					NOT = { age = 40 }
				}
				NOT = { trait = incapable }
				NOT = { trait = eunuch }
				age = 16
				is_consort = no
				OR = {
					NOT = { cannot_outbreed_trigger = yes }
					culture = FROM
					ROOT = { ai = no }
				}
			}
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}			
		}
		ai_chance = {
			factor = 0.25
			
			modifier = {
				factor = 0.1
				NOT = { trait = slave_trader }
			}
			modifier = {
				factor = 0
				OR = {
					is_close_relative = FROM
					AND = {
						NOT = { dynasty = 0 }
						dynasty = FROM
					}		
				}
			}			
			modifier = {
				factor = 0
				FROM = {
					NOT = { trait = genius }
					NOT = { is_smart_trigger = yes }
					NOT = { trait = fair }
					NOT = { is_strong_trigger = yes }
					NOT = { trait = tall }
				}	
				trait = content
			}			
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = imbecile
						is_dumb_trigger = yes
						trait = ugly
						is_weak_trigger = yes
						trait = dwarf
						trait = clubfooted
						trait = lisp
						trait = stutter
						trait = harelip
						trait = hunchback
						trait = inbred
					}
					NOT = { trait = genius }
					NOT = { is_smart_trigger = yes }
					NOT = { trait = fair }
					NOT = { is_strong_trigger = yes }
					NOT = { trait = tall }
				}	
				NOT = { trait = ambitious }
				NOT = { trait = wroth }
			}
			
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = imbecile
						trait = inbred
					}
				}	
				NOT = {
					trait = ambitious
					trait = wroth
				}
			}
			
			modifier = {
				factor = 0
				FROM = {
					is_female = yes
					age = 40
				}	
			}
		}
		hidden_tooltip = { set_character_flag = flag_slave_action } 
		#set_character_flag = flag_breeding_slaves	
		FROM = {
			character_event = { id = slavery.300 tooltip = "EVTTOOLTIPSLAVERY300" }
		}	
	}
	
	option = {
		name = "EVTOPTKSLAVERY2" #STOP BREEDING
		trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_1
			# }
			FROM = { 
				is_married = yes
				spouse = { trait = slave }
			}			
		}
		ai_chance = {
			factor = 0.25		
			modifier = {
				factor = 0
				NOT = {
					OR = {
						trait = incapable
						trait = eunuch
						is_crippled_trigger = yes
						age = 60
						AND = {
							age = 40
							is_female = yes
						}
					}
				}	
			}		
		}
		FROM = {
			any_spouse = {
				remove_spouse = PREV
				if = {
					limit = { 
						trait = slave
						NOT = { liege = { character = ROOT } } 
					}
					move_character = ROOT
				}
			}
			if = {
				limit = { NOT = { liege = { character = ROOT } } }
				move_character = ROOT
			}
		}	
		clr_character_flag = flag_slave_action
	}
	
	# option = {
		# name = "EVTOPTESLAVERY2" #PAGE 2
		# trigger = {
			# ai = no
			# has_character_flag = slave_manage_page_1
		# }
		# clr_character_flag = slave_manage_page_1
		# set_character_flag = slave_manage_page_2	
		# repeat_event = { id = slavery.2 } 
	# }	
	option = {
		name = "EVTOPTFSLAVERY2" #LASH
		trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_2
			# }
			NOT = { trait = kind }
			NOT = { trait = honorable }
			is_liege_of = FROM
			FROM = { NOT = { has_character_modifier = slave_lashed } }
		}
		ai_chance = {
			factor = 0.05
			
			modifier = {
				factor = 0
				trait = just
				NOT = { FROM = { just_execution_reason_PREV_trigger = yes } }
				NOT = { FROM = { is_foe = PREV } }
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = impaler
			}
			modifier = {
				factor = 2
				trait = lunatic
			}
			modifier = {
				factor = 0.5
				trait = patient
			}
			modifier = {
				factor = 0
				NOT = { trait = cruel }
				NOT = { trait = lunatic }
				NOT = { trait = slave_trader }
				NOT = {
					AND = {
						slave = {
							has_opinion_modifier = { who = ROOT modifier = opinion_my_owner }
							NOT = { opinion = { who = ROOT value = -30 } }
							NOT = { trait = brave }
						}
						trait = ruthless
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = { trait = proud }
					NOT = { trait = ambitious }
				}	
				NOT = { trait = ambitious }
				NOT = { trait = greedy }
				NOT = { trait = ruthless }
				NOT = { trait = cruel }
				NOT = { trait = lunatic } 
			}
			modifier = {
				factor = 0
				FROM = {
					trait = humble
					trait = content
				}	
				NOT = { trait = cruel }
			}
			modifier = {
				factor = 0
				opinion = { who = FROM value = 0 }
				FROM = {
					NOT = { trait = proud }
					NOT = { trait = ambitious }
				}	
				NOT = { trait = ruthless }
			}
			modifier = {
				factor = 0
				opinion = { who = FROM value = 50 }
			}
			# Be more reluctant to lash slaves who are already injured
			modifier = {
				factor = 0
				FROM = { 
					OR = {
						trait = wounded 
						is_maimed_trigger = yes
					}	
				}
				NOT = { trait = cruel }
				NOT = { trait = lunatic }
				NOT = { trait = imbecile }
				NOT = { is_dumb_trigger = yes }
				OR = {
					trait = patient
					NOT = { trait = ambitious }
				}
			}
		}
		if = {
			limit = { NOT = { religion = nath_pagan } }
			piety = -25
		}	
		if = {
			limit = { religion = nath_pagan }
			piety = -50
			custom_tooltip = { text = nath_pagan_ahimsa_tooltip }
		}
		if = {
			limit = {
				NOT = { FROM = { just_execution_reason_PREV_trigger = yes } }
				NOT = { FROM = { is_foe = PREV } }
			}
			if = {
				limit = { trait = just }
				if = {
					limit = { NOT = { trait = stressed } }
					add_trait = stressed
				}
				remove_trait = just # Beating your slaves without provocation is always unjust!
			}
		}
		if = {
			limit = { 
				NOT = { trait = cruel } 
				NOT = { trait = kind }
				NOT = { personality_traits = 6 }
			} 
			random = {
				chance = 33
				add_trait = cruel
				hidden_tooltip = { character_event = { id = 38259 } } #Notify Cruel
			}	
		}
		if = {
			limit = { trait = kind }
			if = {
				limit = { NOT = { trait = stressed } }
				add_trait = stressed
			}
			remove_trait = kind				
		}
		FROM = { character_event = { id = slavery.500 tooltip = "EVTTOOLTIPSLAVERY500" } }
	}
	option = {
		name = "EVTOPTGSLAVERY2" #CONCUBINE
		trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_2
			# }
			is_female = no
			has_concubinage = yes	
			NOT = { religion = drowned_god }
			below_consort_limit_trigger = yes
			FROM = {
				is_female = yes
				is_consort = no
				age = 14
				OR = {
					ROOT = { ai = no }
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_set_aside } }
				}
				NOT = { is_close_relative = ROOT }
			}
		}
		ai_chance = {
			factor = 0.05
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = chaste
					trait = celibate
					trait = homosexual
					trait = honorable
					trait = eunuch
				}
			}
			modifier = {
				factor = 0.1
				FROM = { any_spouse = { trait = slave } }
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = ugly
						trait = incapable
						trait = inbred
						is_ill = yes
						trait = infirm
						age = 25
						trait = clubfooted
						trait = harelip
						trait = hunchback
					}
				}	
			}
			modifier = {
				factor = 4
				FROM = { trait = fair }
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 4
				trait = lustful
			}
		}
		FROM = { add_consort = ROOT }
		clr_character_flag = flag_slave_action	
	}
	option = {
		name = "EVTOPTKSLAVERY2" #SALT WIFE
		trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_2
			# }
			is_female = no
			religion = drowned_god
			below_consort_limit_trigger = yes
			FROM = {
				is_female = yes
				is_consort = no
				age = 14
				OR = {
					ROOT = { ai = no }
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_set_aside } }
				}
				NOT = { is_close_relative = ROOT }
			}
		}
		ai_chance = {
			factor = 0.05
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = chaste
					trait = celibate
					trait = homosexual
					trait = honorable
					trait = eunuch
				}
			}
			modifier = {
				factor = 0.1
				FROM = { any_spouse = { trait = slave } }
			}
			modifier = {
				factor = 0
				FROM = {
					OR = {
						trait = ugly
						trait = incapable
						trait = inbred
						is_ill = yes
						trait = infirm
						age = 25
						trait = clubfooted
						trait = harelip
						trait = hunchback
					}
				}	
			}
			modifier = {
				factor = 4
				FROM = { trait = fair }
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 4
				trait = lustful
			}
		}
		FROM = { 
			add_consort = ROOT 
			add_trait = salt_wife
		}
		clr_character_flag = flag_slave_action	
	}
	option = {
		name = "EVTOPTHSLAVERY2" #EUNUCH
		trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_2
			# }
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}
			NOT = { crownlaw_title = { has_law = slavery_3 } }
			FROM = {
				is_female = no
				NOT = { trait = eunuch }
			}
		}
		ai_chance = {
			factor = 0.05
			
			modifier = {
				factor = 0
				OR = {
					is_close_relative = FROM
					AND = {
						NOT = { dynasty = 0 }
						dynasty = FROM
					}		
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = honorable
					reverse_opinion = { who = FROM value = 10 }
				}
			}
			modifier = {
				factor = 0
				FROM = {
					fertility = 0.1
					NOT = { cannot_outbreed_trigger = yes }
					OR = {
						is_strong_trigger = yes
						is_smart_trigger = yes
						trait = genius
						trait = tall
						trait = fair
					}
				}	
			}
			modifier = {
				factor = 3
				FROM = { NOT = { age = 6 } }
			}
			modifier = {
				factor = 0.1
				FROM = { age = 25 }	
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
		}
		clr_character_flag = flag_slave_action
		FROM = {
			character_event = { id = LoR.833 tooltip = "EVTTOOLTIPLoR.833" }
			add_trait = eunuch
			if = {
				limit = { age = 6 }
				opinion = {
					modifier = opinion_castrated_me
					who = ROOT
				}
			}	
			hidden_tooltip = {
				if = {
					limit = { age = 16}
					ROOT = {
						character_event = { id = LoR.832 }
					}
				}
				if = {
					limit = { NOT = { age = 16 } }
					ROOT = {
						character_event = { id = LoR.834 }
					}
				}
			}	
		}
		if = {
			limit = { 
				NOT = { trait = cruel } 
				NOT = { trait = kind }
				NOT = { personality_traits = 6 }
			}
			random = {
				chance = 25
				add_trait = cruel
				hidden_tooltip = {
					character_event = { id = 38259 }
				}
			}
		}
		piety = -30
		hidden_tooltip = {
			father = { opinion = { who = FROM modifier = opinion_castrated_son } }
			mother = { opinion = { who = FROM modifier = opinion_castrated_son } }
			any_dynasty_member = {
				limit = {
					is_close_relative = ROOT
					NOT = { any_child = { character = ROOT } } 
				}
				opinion = { who = FROM modifier = opinion_castrated_kin }
			}
			any_spouse = {
				limit = { opinion = { who = ROOT value = -25 } }
				opinion = { who = FROM modifier = opinion_castrated_spouse }
			}
		}
	}
	option = {
		name = "EVTOPTISLAVERY2" #FREE
		trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_2
			# }
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}
		}
		ai_chance = {
			factor = 0.4
			modifier = {
				factor = 0
				NOR = {
					trait = liberator
					is_close_relative = FROM
					AND = {
						NOT = { dynasty = 0 }
						dynasty = FROM
					}
					AND = {
						OR = {
							is_lover = FROM
							opinion = { who = FROM value = 100 }
						}
						OR = {
							trait = kind
							trait = just
							trait = honorable
						}
					}
					AND = {
						has_antislavery_religion_trigger = yes
						trait = zealous
					}
				}	
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROM value = -49 } }
				NOT = { trait = just }
				NOT = { trait = honorable }
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROM value = 0 } }
				trait = arbitrary
			}
		}
		FROM = {
			clr_character_flag = escaped_slave
			if = {
				limit = { NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_enslaved_me } } }
				opinion = {
					modifier = opinion_granted_freedom
					who = ROOT
					years = 5
				}
			}	
			if = {
				limit = { has_opinion_modifier = { who = ROOT modifier = opinion_enslaved_me } }
				opinion = {
					modifier = opinion_granted_freedom
					who = ROOT
					years = 5
					multiplier = 0.5
				}
			}
			character_event = { id = slavery.0 tooltip = EVTTOOLTIPSLAVERY0 }	
		}
		if = {
			limit = {
				NOR = {
					trait = liberator
					is_close_relative = FROM
					AND = {
						NOT = { dynasty = 0 }
						dynasty = FROM
					}
				}	
			}
			prestige = -50
		}	
		if = {
			limit = {
				has_antislavery_religion_trigger = yes
			}
			piety = 50
		}
		clr_character_flag = flag_slave_action
	}
	option = {
		name = "EVTOPTJSLAVERY2" #NEVERMIND
		# trigger = {
			# OR = {
				# ai = yes
				# has_character_flag = slave_manage_page_2
			# }
		# }
		ai_chance = {
			factor = 1
		}
		clr_character_flag = flag_slave_action
		# clr_character_flag = slave_manage_page_1
		# clr_character_flag = slave_manage_page_2
	}
}
# character_event = { #Set Slave scope when changing page
	# id = slavery.3
	# is_triggered_only = yes
	
	# immediate = {
		# FROM = { character_event = { id = slavery.2 } }
	# }
	
	# option = {
		# name = OK
	# }
# }
###Ai slavery action event###
character_event = {
	id = slavery.299
	desc = "AI SLAVERY ACITION"
	
	is_triggered_only = yes
	only_rulers = yes
	ai = yes
	
	trigger = {
		OR = {
			higher_tier_than = BARON
			is_theocracy = yes
			is_patrician = yes
		}
		demesne_size = 1
	}
	
	option = {
		name = "ENTER SLAVE TRADE"
		trigger = {
			OR = {
				is_patrician = yes # Only patricians/republics can be slave traders
				is_republic = yes
				has_focus = focus_business
			}	
			NOT = { trait = slave_trader } # Obviously, can't do this when already a slave trader
			NOT = { trait = liberator } # Won't do this for obvious reasons
			NOT = { culture_group = unoccupied_group }
			
			crownlaw_title = { has_law = slavery_2 } 
			ai = yes
			is_nomadic = no
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = honorable
				}
				NOT = { trait = cruel }
				NOT = { trait = ruthless }
				NOT = {
					AND = {
						has_dynasty_flag = flag_slaver_tradition
						trait = just
					}
				}
			}
			
			modifier = {
				factor = 0
				OR = {
					has_antislavery_religion_trigger = yes
					has_antislavery_culture_trigger = yes
				}	
				NOT = { trait = cynical }
				NOT = { trait = arbitrary }
				NOT = {
					AND = {
						has_dynasty_flag = flag_slaver_tradition
						trait = just
					}
				}
			}
			
			modifier = {
				factor = 0
				NOT = { trait = slave_owner }
				NOT = { culture_group = ghiscari_group }
				NOT = { has_dynasty_flag = flag_slaver_tradition }
			}
			
			modifier = {
				factor = 0
				trait = former_slave
				NOT = { trait = arbitrary }
				NOT = { trait = selfish }
				NOT = { trait = ruthless }
				NOT = {
					AND = {
						has_dynasty_flag = flag_slaver_tradition
						trait = just
					}
				}
			}
			
			modifier = {
				factor = 0
				NOT = { trait = greedy }
				NOT = { trait = ambitious }
				NOT = { trait = cruel }
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_2
							has_building = ct_asoiaf_slavepit_2
							has_building = tp_asoiaf_slavepit_2
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_2 }
				}
				NOT = { has_dynasty_flag = flag_slaver_tradition }
			}
		}
		add_trait = slave_trader
		set_dynasty_flag = flag_slaver_tradition
		character_event = { id = slavery.299 days = 10 }
	}	
	option = {
		name = "LEAVE SLAVE TRADE"
		trigger = {
			trait = slave_trader
			ai = yes
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				NOT = { trait = kind }
				NOT = { trait = liberator }
				NOT = { trait = honorable }
				NOT = { trait = former_slave }
				NOT = { culture_group = unoccupied_group }
				NOT = {
					AND = {
						has_antislavery_religion_trigger = yes
						trait = zealous
					}
				}
			}
			modifier = {
				factor = 0
				trait = ruthless
				NOT = { trait = liberator }
				NOT = { culture_group = unoccupied_group }
			}
			modifier = {
				factor = 0
				has_dynasty_flag = flag_slaver_tradition
				trait = just
				NOT = { trait = liberator }
			}
			modifier = {
				factor = 0
				trait = greedy
				NOT = { trait = liberator }
				NOT = { culture_group = unoccupied_group }
			}
		}
		remove_trait = slave_trader
		#clr_dynasty_flag = flag_slaver_tradition
	}
	option = {
		name = "BUY SLAVE"
		trigger = {
			can_buy_courtier_slaves_trigger = yes
			OR = {
				NOT = { tier = BARON }
				is_patrician = yes
			}
			is_nomadic = no		
			wealth = 125
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}
		}
		ai_chance = {
			factor = 100
			
			# Reasons to buy a slave
			modifier = { 
				factor = 0
				NOR = {
					NOT = { #I dont have enough slaves
						any_courtier = {
							trait = slave
							count = 2
						}
					}
					NOT = { #I dont have any young slaves
						any_courtier = {
							trait = slave
							NOT = { age = 25 }
						}
					}
					AND = { #I dont have any bodyguards
						NAND = { #Uses the kingsguard instead
							has_landed_title = e_iron_throne 
							is_title_active = d_kingsguard
						} 
						NOT = { culture = dothraki }
						NOT = {
							any_courtier = {
								has_minor_title = title_bodyguard
							}
						}	
					}
					job_chancellor = { NOT = { diplomacy = 12 } } #My councillor is rubbish
					job_treasurer = { NOT = { stewardship = 12 } }
					job_spymaster = { NOT = { intrigue = 12 } }
					job_physician = { NOT = { learning = 12 } NOT = { trait = maester } }
					AND = { #I have much cash
						wealth = 450
						NOT = { has_character_modifier = loan_timer }
					}
				}	
			}
			modifier = {
				factor = 0
				trait = liberator
			}
			modifier = {
				factor = 0
				war = yes
			}
			modifier = {
				factor = 0
				has_character_modifier = loan_timer
				NOT = { trait = wroth }
				NOT = { trait = imbecile }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
			modifier = {
				factor = 0
				NOT = { wealth = 150 }
				OR = {
					AND = {
						NOT = { trait = wroth }
						NOT = { trait = slothful }
						NOT = { trait = gluttonous }
						NOT = { trait = greedy }
					}
					trait = patient
					trait = diligent
					trait = temperate
				}
			}
			# modifier = {
				# factor = 0
				# NOT = { wealth = 200 }
				# OR = {
					# trait = ambitious
					# # This should hopefully make the AI try to save up if it gets rejected
					# AND = {
						# has_character_flag = flag_gave_up_on_slave_purchase
						# NOT = { had_character_flag = { flag = flag_gave_up_on_slave_purchase days = 1825 } }
					# }
				# }
			# }
			modifier = {
				factor = 0
				trait = content
				NOT = { trait = greedy }
				NOT = { trait = envious }
				NOT = { trait = proud }
			}	
			modifier = {
				factor = 0
				OR = {
					has_antislavery_religion_trigger = yes
					has_antislavery_culture_trigger = yes
				}	
				NOT = { trait = cynical }
				NOT = { trait = arbitrary }
				NOT = { trait = slave_trader }
			}
		}
		set_character_flag = flag_slave_action
		character_event = { id = slavery.200 days = 50 random = 25 }
	}
	option = {
		name = "BUY SLAVE RELATIVE" #free relative from slavery
		trigger = {
			OR = {
				NOT = { tier = BARON }
				is_patrician = yes
			}
			wealth = 50
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}
			any_close_relative = {
				trait = slave
				is_alive = yes
				NOT = { liege = { character = ROOT } }
				NOT = { has_character_flag = flag_not_for_sale }
				OR = {
					reverse_opinion = { who = ROOT value = -49 }
					ROOT = { trait = proud }
					ROOT = { trait = familyperson }
				}
			}
		}
		ai_chance = {
			factor = 100
			
			modifier = {
				factor = 0.1
				war = yes
			}
			modifier = {
				factor = 0.1
				has_character_modifier = loan_timer
				NOT = { trait = wroth }
				NOT = { trait = imbecile }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
			modifier = {
				factor = 0
				NOT = { wealth = 115 }
				OR = {
					AND = {
						NOT = { trait = wroth }
						NOT = { trait = slothful }
						NOT = { trait = gluttonous }
						NOT = { trait = greedy }
					}
					trait = patient
					trait = diligent
					trait = temperate
				}
			}
			modifier = {
				factor = 5
				trait = familyperson
			}
			modifier = {
				factor = 3
				trait = proud
			}
			modifier = {
				factor = 3
				trait = diligent
			}
			modifier = {
				factor = 0.33
				trait = humble
			}
			modifier = {
				factor = 0.33
				trait = slothful
			}
			modifier = {
				factor = 0.33
				trait = greedy
			}
		}
		set_character_flag = flag_slave_action
		slave = {
			limit = {
				is_close_relative = ROOT
				is_alive = yes
				OR = {
					reverse_opinion = { who = ROOT value = -49 }
					ROOT = { trait = proud }
					ROOT = { trait = familyperson }
				}
				
				liege = {
					NOT = { character = ROOT }
					is_within_diplo_range = ROOT
					has_opinion_modifier = { who = PREV modifier = opinion_my_slave }
					has_full_slavery_trigger = yes
				}
				NOT = { has_character_flag = flag_not_for_sale }
				NOT = { has_character_flag = unsullied }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_rejected_slave } }
			}
			character_event = { id = slavery.250 }
		}
	}
	option = {
		name = "BUY TRAINEE PRIEST"
		trigger = {
			can_buy_courtier_slaves_trigger = yes
			is_theocracy = yes
			OR = {
				religion = drowned_god
				religion = the_seven
				religion = rhllor
				religion = harpy
				religion = qarth_warlocks
				religion = shadowbinders
				religion = bearded_priests
			}
			NOT = {
				any_courtier = {
					trait = slave
					NOT = { age = 18 }
					count = 2
				}
			}
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}
			wealth = 125
		}
		ai_chance = {
			factor = 100
			
			modifier = {
				factor = 0
				trait = liberator
			}
			modifier = {
				factor = 0
				war = yes
			}
			modifier = {
				factor = 0
				has_character_modifier = loan_timer
				NOT = { trait = wroth }
				NOT = { trait = imbecile }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
			}
			modifier = {
				factor = 0
				NOT = { wealth = 150 }
				OR = {
					AND = {
						NOT = { trait = wroth }
						NOT = { trait = slothful }
						NOT = { trait = gluttonous }
						NOT = { trait = greedy }
					}
					trait = patient
					trait = diligent
					trait = temperate
				}
			}
			# modifier = {
				# factor = 0
				# NOT = { wealth = 200 }
				# OR = {
					# trait = ambitious
					# # This should hopefully make the AI try to save up if it gets rejected
					# AND = {
						# has_character_flag = flag_gave_up_on_slave_purchase
						# NOT = { had_character_flag = { flag = flag_gave_up_on_slave_purchase days = 1825 } }
					# }
				# }
			# }
			modifier = {
				factor = 0
				trait = content
				NOT = { trait = greedy }
				NOT = { trait = envious }
				NOT = { trait = proud }
			}	
			modifier = {
				factor = 0
				has_antislavery_religion_trigger = yes
				NOT = { trait = cynical }
				NOT = { trait = arbitrary }
				NOT = { trait = slave_trader }
			}
		}		
		slave = {
			limit = {
				is_alive = yes
				NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_my_owner } }						
				NOT = { age = 18 }
				OR = {
					ROOT = {
						NOT = { religion = drowned_god }
						NOT = { religion = bearded_priests }
					}	
					is_female = no
				}
				OR = {
					ROOT = {
						NOT = { religion = harpy }
					}	
					is_female = yes
				}
				liege = {
					NOT = { character = ROOT }
					is_within_diplo_range = ROOT
					has_opinion_modifier = { who = PREV modifier = opinion_my_slave }
					has_full_slavery_trigger = yes
				}
				NOT = { has_character_flag = flag_not_for_sale }
				NOT = { has_character_flag = unsullied }
				NOT = { trait = incapable }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_rejected_slave } }
			}
			ROOT = { set_character_flag = flag_slave_action }
			character_event = { id = slavery.250 }
		}
	}
	option = {
		name = "BUY BULK SLAVES"
		trigger = {
			demesne_size = 1
			has_full_slavery_trigger = yes	
			NOT = { trait = liberator }
			is_nomadic = no
			NOR = {
				capital_holding = {
					OR = {
						has_building = ca_asoiaf_slavepit_5
						has_building = ct_asoiaf_slavepit_5
						has_building = tp_asoiaf_slavepit_5
					}
				}
				family_palace = { has_building = fp_asoiaf_slavepit_5 }
			}		
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}
			
			slave_trader = {
				is_ruler = yes
				is_alive = yes				
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_1
							has_building = ct_asoiaf_slavepit_1
							has_building = tp_asoiaf_slavepit_1
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_1 }
				}
				NOT = { character = ROOT }
			}
			OR = {
				wealth = 400
				AND = { #AI may take loan to buy slaves if they can afford it
					ai = yes
					NOT = { has_character_flag = loan_taken }
					NOT = { has_character_modifier = loan_timer }
					NOT = { has_character_flag = offended_moneylenders }
					OR = {
						AND = {
							monthly_income = 12
							wealth = 100
						}
						AND = {
							monthly_income = 6
							wealth = 200
						}
						AND = {
							monthly_income = 3
							wealth = 300
						}
					}
				}
			}
			ai = yes
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 4
				capital_scope = { culture = astapori } #More likely to buy slaves to train unsullied
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_2
							has_building = ct_asoiaf_slavepit_2	
							has_building = tp_asoiaf_slavepit_2								
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_2 }
				}
			}			
			modifier = {
				factor = 0
				tier = BARON
				is_theocracy = yes
			}
			modifier = {
				factor = 0
				war = yes
			}
			modifier = {
				factor = 0
				OR = {
					has_antislavery_religion_trigger = yes
					has_antislavery_culture_trigger = yes
				}	
				NOT = { trait = cynical }
				OR = {
					NOT = { trait = arbitrary }
					trait = zealous
				}
			}
			modifier = {
				factor = 0
				NOT = { trait = greedy }
				NOT = { trait = ambitious }
				NOT = { trait = ruthless }
				NOT = { trait = cruel }
				NOT = { capital_scope = { culture = astapori } }
			}
			modifier = { #concerned about revolt risk
				factor = 0
				capital_scope = { revolt_risk = 0.1 }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
				NOT = { is_dumb_trigger = yes }
				NOT = { trait = imbecile }
				NOT = { trait = greedy }
				NOT = { trait = wroth }
			}
			modifier = { #can raid for slaves
				factor = 0				
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_4
							has_building = ct_asoiaf_slavepit_4
							has_building = tp_asoiaf_slavepit_4
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_4 }
				}				
				OR = {
					has_full_slavery_trigger = yes	
					crownlaw_title = { has_law = slavery_3	}
					AND = { #if no crown law title, top liege has legal slavery
						NOT = { crownlaw_title = { always = yes } }
						top_liege = {
							OR = {
								has_full_slavery_trigger = yes	
								crownlaw_title = { has_law = slavery_3	}
							}
						}
					}
				}
				OR = {
					trait = slave_trader
					independent = yes
				}
			}
			modifier = { 
				factor = 0
				trait = slave_trader
				NOT = { trait = humble }
				NOT = { wealth = 600 } #has spare cash
				OR = { #More likely to buy slaves to train unsullied
					NOT = { capital_scope = { culture = astapori } }
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_slavepit_2
								has_building = ct_asoiaf_slavepit_2	
								has_building = tp_asoiaf_slavepit_2								
							}
						}
						family_palace = { has_building = fp_asoiaf_slavepit_2 }
					}
				}
			}
			modifier = {
				factor = 0
				has_character_flag = flag_buying_bulk_slaves
				NOT = { had_character_flag = { flag = flag_buying_bulk_slaves days = 1825 } }
			}
			modifier = {
				factor = 0
				has_character_flag = flag_selling_bulk_slaves
				NOT = { had_character_flag = { flag = flag_selling_bulk_slaves days = 1825 } }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
				NOT = { trait = arbitrary }
			}
			modifier = {
				factor = 0
				has_character_flag = flag_freed_bulk_slaves
				NOT = { had_character_flag = { flag = flag_freed_bulk_slaves days = 1825 } }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
				NOT = { trait = arbitrary }
			}
		}
		character_event = { id = slavery.1200 days = 30 random = 15 tooltip = "EVTTOOLTIPSLAVERY1200" }
		set_character_flag = flag_slave_action
		clr_character_flag = flag_buying_bulk_slaves
		set_character_flag = flag_buying_bulk_slaves
	}
	option = {
		name = "SELL BULK SLAVES"
		trigger = {
			is_nomadic = no
			has_full_slavery_trigger = yes	
			OR = {
				capital_holding = {
					OR = {
						has_building = ca_asoiaf_slavepit_1
						has_building = ct_asoiaf_slavepit_1
						has_building = tp_asoiaf_slavepit_1				
					}
				}
				family_palace = { has_building = fp_asoiaf_slavepit_1 }
			}	
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}
			
			
			slave_trader = {
				is_ruler = yes
				is_alive = yes			
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_5
							has_building = ct_asoiaf_slavepit_5
							has_building = tp_asoiaf_slavepit_5
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_5 }
				}
				OR = {
					wealth = 400
					AND = { #AI may take loan to buy slaves if they can afford it
						ai = yes
						NOT = { has_character_flag = loan_taken }
						NOT = { has_character_modifier = loan_timer }
						NOT = { has_character_flag = offended_moneylenders }
						OR = {
							AND = {
								monthly_income = 12
								wealth = 100
							}
							AND = {
								monthly_income = 6
								wealth = 200
							}
							AND = {
								monthly_income = 3
								wealth = 300
							}
						}
					}
				}
				OR = {
					NOT = { has_character_flag = no_bulk_slave_cooldown }
					had_character_flag = { flag = no_bulk_slave_cooldown days = 730 }
				}
				NOT = { character = ROOT }
			}
		}
		ai_chance = {
			factor = 100
			modifier = { #AI motives
				factor = 0
				NAND = { #high revolt risk in capital
					capital_scope = { revolt_risk = 0.10 }
					NOT = { trait = lunatic }
					NOT = { trait = possessed }
					NOT = { trait = imbecile }
					NOT = { is_dumb_trigger = yes }
				}
				wealth = -50 #need cash
				NAND = { #camps are full and can raid for more
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_slavepit_5
								has_building = ct_asoiaf_slavepit_5
								has_building = tp_asoiaf_slavepit_5
							}
						}
						family_palace = { has_building = fp_asoiaf_slavepit_5 }
					}
					OR = {
						has_full_slavery_trigger = yes	
						crownlaw_title = { has_law = slavery_3	}
						AND = { #if no crown law title, top liege has legal slavery
							NOT = { crownlaw_title = { always = yes } }
							top_liege = {
								OR = {
									has_full_slavery_trigger = yes	
									crownlaw_title = { has_law = slavery_3	}
								}
							}
						}
					}
					OR = {
						trait = slave_trader
						independent = yes
					}
				}
			}
			modifier = {
				factor = 0
				trait = slave_trader
				NOT = { trait = humble }
				wealth = -100
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_5
							has_building = ct_asoiaf_slavepit_5
							has_building = tp_asoiaf_slavepit_5
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_5 }
				}
			}
			modifier = {
				factor = 0
				has_character_flag = flag_buying_bulk_slaves
				NOT = { had_character_flag = { flag = flag_buying_bulk_slaves days = 1825 } }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
				NOT = { trait = arbitrary }
			}
			modifier = {
				factor = 0
				has_character_flag = flag_selling_bulk_slaves
				NOT = { had_character_flag = { flag = flag_selling_bulk_slaves days = 1825 } }
			}
		}
		set_character_flag = flag_slave_action
		character_event = { id = slavery.1300 days = 30 random = 15 tooltip = "EVENTTOOLTIPSLAVERY1300" }
		clr_character_flag = flag_selling_bulk_slaves
		set_character_flag = flag_selling_bulk_slaves
	}
	option = {
		name = "FREE BULK SLAVES"
		trigger = {
			OR = {
				capital_holding = {
					OR = {
						has_building = ca_asoiaf_slavepit_1
						has_building = ct_asoiaf_slavepit_1
						has_building = tp_asoiaf_slavepit_1		
						has_building = no_asoiaf_slavepit_1							
					}
				}
				family_palace = { has_building = fp_asoiaf_slavepit_1 }
			}
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}
		}
		ai_chance = {
			factor = 100	
			modifier = {
				factor = 0
				NOT = { trait = liberator }
				NOT = {
					AND = {
						has_antislavery_religion_trigger = yes
						trait = zealous
					}
				}
				NOT = {
					AND = {
						capital_scope = { revolt_risk = 0.1 }
						OR = {
							trait = slave_trader
							AND = {
								has_character_flag = flag_selling_bulk_slaves_rejected
								NOT = { had_character_flag = { flag = flag_selling_bulk_slaves_rejected days = 1825 } }
							}
						}
						NOT = { trait = lunatic }
						NOT = { trait = possessed }
						NOT = { trait = imbecile }
						NOT = { is_dumb_trigger = yes }
					}
				}
			}
			modifier = {
				factor = 0
				NOT = { prestige = 1000 }
				NOT = { capital_scope = { revolt_risk = 0.1 } }
				NOT = { trait = liberator }
				NOT = { trait = humble }
			}
			modifier = {
				factor = 0
				trait = slave_trader
				trait = proud
			}
			modifier = {
				factor = 0
				trait = slave_trader
				NOT = { trait = humble }
				NOT = { trait = charitable }
				NOT = { trait = honorable }
			}
			modifier = {
				factor = 0
				has_character_flag = flag_buying_bulk_slaves
				NOT = { had_character_flag = { flag = flag_buying_bulk_slaves days = 1825 } }
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
				NOT = { trait = arbitrary }
			}
		}
		character_event = { id = slavery.1400 tooltip = "EVTTOOLTIPSLAVERY1400" }
		if = {
			limit = { NOT = { trait = liberator } }
			prestige = -200
		}
		if = {
			limit = {
				has_antislavery_religion_trigger = yes
			}
			piety = 250
		}
		clr_character_flag = flag_freed_bulk_slaves
		set_character_flag = flag_freed_bulk_slaves
	}
	option = {
		name = "ENSLAVE NATIVES"
		trigger = {
			any_demesne_province = {
				has_province_flag = colony_province
				OR = {
					has_province_flag = ruined_province
					traditional_nomad_territory_trigger = yes
				}
				NOT = { has_province_modifier = natives_enslaved }
				NOT = { culture_group = ROOT }
			}
			has_full_slavery_trigger = yes
			NOR = {
				capital_holding = {
					OR = {
						has_building = ca_asoiaf_slavepit_5
						has_building = ct_asoiaf_slavepit_5
						has_building = tp_asoiaf_slavepit_5
						has_building = no_asoiaf_slavepit_5
					}
				}
				family_palace = { has_building = fp_asoiaf_slavepit_5 }
			}
			NOT = { trait = liberator }
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}		
		}
		ai_chance = {
			factor = 100	
			modifier = {
				factor = 0
				OR = {
					religion_group = westerosi_religion
					religion_group = summer_rel_group
					religion = moonsingers
					religion = father_of_waters
					religion = rhoynar_pagan
					religion = great_shepherd
				}
				NOT = { trait = cynical }
				NOT = { trait = arbitrary }
				NOT = { trait = slave_trader }
			}
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = honorable
				}
				NOT = { trait = slave_trader }
			}
			modifier = {
				factor = 0
				NOT = { trait = slave_trader }
				NOT = { trait = arbitrary }
				NOT = { trait = ruthless }
				NOT = { trait = greedy }
				NOT = { trait = cruel }
			}
		}
		random_demesne_province = {
			limit = {
				has_province_flag = colony_province			
				OR = {
					has_province_flag = ruined_province
					traditional_nomad_territory_trigger = yes
				}
				NOT = { has_province_modifier = natives_enslaved }
				NOT = { culture_group = ROOT }
			}
			add_province_modifier = {
				name = natives_enslaved
				months = 240
			}
			slave_raid_gain_slaves_effect = yes
		}
		character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" }
		piety = -50		
	}
	option = {
		name = "BUY UNSULLIED"
		trigger = {
			OR = {
				is_patrician = yes
				AND = {
					demesne_size = 1
					higher_tier_than = BARON
				}	
			}
			has_full_slavery_trigger = yes
			NOT = { capital_scope = { culture = astapori } }
			wealth = 80
			NOT = { is_inaccessible_trigger = yes }
			NOT = { trait = liberator }
			is_nomadic = no
			OR = {
				NOT = { has_character_flag = flag_slave_action }
				had_character_flag = { flag = flag_slave_action days = 30 }
			}
		}
		ai_chance = {
			factor = 0.5
			modifier = {
				factor = 0
				OR = {
					NOT = { wealth = 120 }
					has_character_flag = loan_taken
				}	
			}
			modifier = {
				factor = 5
				has_landed_title = k_qohor
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 5
				war = yes
			}
			modifier = {
				factor = 0
				NOT = { trait = cynical }
				OR = {
					NOT = { trait = arbitrary }
					trait = zealous
				}
				OR = {
					religion_group = westerosi_religion
					religion_group = summer_rel_group
					religion = moonsingers
					religion = father_of_waters
					religion = rhoynar_pagan
					religion = great_shepherd
				}
			}
			modifier = {
				factor = 0
				OR = {
					trait = kind
					trait = just
				}	
				NOT = { trait = ruthless }
				NOT = { trait = arbitrary }
				NOT = { trait = proud }
				NOT = { trait = cruel }
			}
		}	
		set_character_flag = flag_slave_action
		character_event = { id = slavery.705 tooltip = "EVTTOOLTIPSLAVERY705" }
	}
	option = {
		name = "NEVERMIND"
		ai_chance = {
			factor = 1
		}
	}
}
# Bookkeeping - Slave Owners
# character_event = {
	# id = slavery.10
	
	# hide_window = yes	
	# only_rulers = yes
	# is_triggered_only = yes
	
	# trigger = {
		# slave = {
			# reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave }
			# NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_my_owner } }
		# }
	# }
	
	# immediate = {
		# slave = {
			# limit = {
				# reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave }
				# NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_my_owner } }
			# }
			# opinion = { who = ROOT modifier = opinion_my_owner }
		# }
	# }
	
	# option = { name = OK }
# }
# character_event = {
	# id = slavery.11
	
	# hide_window = yes	
	# only_rulers = yes
	# is_triggered_only = yes
	
	# trigger = {
		# slave = {
			# NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } }
			# has_opinion_modifier = { who = ROOT modifier = opinion_my_owner }
		# }
	# }
	
	# immediate = {
		# slave = {
			# limit = {
				# NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } }
				# has_opinion_modifier = { who = ROOT modifier = opinion_my_owner }
			# }
			# reverse_opinion = { who = ROOT modifier = opinion_my_slave }
		# }
	# }
	
	# option = { name = OK }
# }
character_event = { #Character owns slaves but does not have slave owner trait
	id = slavery.12
	
	hide_window = yes
	is_triggered_only = yes
	only_rulers = yes
	
	trigger = {
		NOT = { trait = slave_owner }
		OR = {
			slave = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } }
			any_demesne_title = {
				tier = BARON
				OR = {
					has_building = ca_asoiaf_slavepit_1
					has_building = ct_asoiaf_slavepit_1
					has_building = tp_asoiaf_slavepit_1
					has_building = no_asoiaf_slavepit_1
					has_building = ca_asoiaf_unsullied_1		
					has_building = ca_asoiaf_unsullied_cent_1		
					has_building = ct_asoiaf_unsullied_1		
					has_building = ct_asoiaf_unsullied_cent_1
				}
			}
			family_palace = { 
				OR = {	
					has_building = fp_asoiaf_slavepit_1 
					has_building = fp_asoiaf_unsullied_1		
					has_building = fp_asoiaf_unsullied_cent_1							
				}				
			}
		}
	}
	
	immediate = {
		if = { #remove all slaves from ruins
			limit = { 
				OR = {
					culture_group = unoccupied_group 
					culture = winter_wasteland
				}	
			}
			any_courtier = {
				limit = { 
					trait = slave
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } 
				}
				remove_opinion = { who = ROOT modifier = opinion_my_owner }
				reverse_remove_opinion = { who = ROOT modifier = opinion_my_slave }
				character_event = { id = slavery.0 }
			}
			any_demesne_title = {
				limit = { tier = BARON }
				remove_building = ca_asoiaf_slavepit_1
				remove_building = ct_asoiaf_slavepit_1
				remove_building = tp_asoiaf_slavepit_1	
				remove_building = no_asoiaf_slavepit_1				
			}
			break = yes
		}
		if = { #remove all slaves from white walkers
			limit = { culture = white_walker }
			any_courtier = {
				limit = { 
					trait = slave
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } 
					NOR = {
						trait = white_walker
						trait = winter_wasteland
						culture_group = winter_group
					}
					host = { culture_group = winter_group }
					NOT = { character = 9268059 } #Hidden Bran
					NOT = { trait = dragon }
				}
				death = {
					death_reason = death_murder_slayed
					killer = ROOT
				}
			}
			any_demesne_title = { #slave camps converted to troops
				limit = { tier = BARON }
				if = {
					limit = {
						OR = {
							has_building = ca_asoiaf_slavepit_5
							has_building = ct_asoiaf_slavepit_5
							has_building = tp_asoiaf_slavepit_5
							has_building = no_asoiaf_slavepit_5
						}
					}
					location = {
						spawn_unit = {
							province = THIS
							home = THIS
							owner = ROOT
							troops = {
								light_infantry = { 500 500 }
							}
							attrition = 0
						}
					}
				}
				if = {
					limit = {
						OR = {
							has_building = ca_asoiaf_slavepit_4
							has_building = ct_asoiaf_slavepit_4
							has_building = tp_asoiaf_slavepit_4
							has_building = no_asoiaf_slavepit_4
						}
					}
					location = {
						spawn_unit = {
							province = THIS
							home = THIS
							owner = ROOT
							troops = {
								light_infantry = { 500 500 }
							}
							attrition = 0
						}
					}
				}
				if = {
					limit = {
						OR = {
							has_building = ca_asoiaf_slavepit_3
							has_building = ct_asoiaf_slavepit_3
							has_building = tp_asoiaf_slavepit_3
							has_building = no_asoiaf_slavepit_3
						}
					}
					location = {
						spawn_unit = {
							province = THIS
							home = THIS
							owner = ROOT
							troops = {
								light_infantry = { 500 500 }
							}
							attrition = 0
						}
					}
				}
				if = {
					limit = {
						OR = {
							has_building = ca_asoiaf_slavepit_2
							has_building = ct_asoiaf_slavepit_2
							has_building = tp_asoiaf_slavepit_2
							has_building = no_asoiaf_slavepit_2
						}
					}
					location = {
						spawn_unit = {
							province = THIS
							home = THIS
							owner = ROOT
							troops = {
								light_infantry = { 500 500 }
							}
							attrition = 0
						}
					}
				}
				if = {
					limit = {
						OR = {
							has_building = ca_asoiaf_slavepit_1
							has_building = ct_asoiaf_slavepit_1
							has_building = tp_asoiaf_slavepit_1
							has_building = no_asoiaf_slavepit_1
						}
					}
					location = {
						spawn_unit = {
							province = THIS
							home = THIS
							owner = ROOT
							troops = {
								light_infantry = { 500 500 }
							}
							attrition = 0
						}
					}
				}
				remove_building = ca_asoiaf_slavepit_1
				remove_building = ct_asoiaf_slavepit_1
				remove_building = tp_asoiaf_slavepit_1	
				remove_building = no_asoiaf_slavepit_1				
			}
			break = yes
		}
		if = { # Liberators free all slaves
			limit = { 
				trait = liberator 
				OR = { #Must be slave camps in capital to get this event
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_1
							has_building = ct_asoiaf_slavepit_1
							has_building = tp_asoiaf_slavepit_1
							has_building = no_asoiaf_slavepit_1
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_1 }
				}
			}
			character_event = { id = slavery.3003 }
			break = yes
		}
		if = { #If Legal or Thralldom add trait
			limit = {
				OR = {
					has_full_slavery_trigger = yes
					crownlaw_title = { has_law = slavery_3 }
				}	
				NOT = { trait = liberator }
			}
			add_trait = slave_owner
		}
		if = { #If defacto and owns character slaves add trait
			limit = { 
				crownlaw_title = { has_law = slavery_1 }
				slave = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } }	
				NOT = { trait = liberator }
			}
			add_trait = slave_owner
		}
		if = { #If Illegal free all character slaves
			limit = { 
				OR = {
					crownlaw_title = { has_law = slavery_0 } 
					trait = liberator
				}	
			}
			any_courtier = {
				limit = { 
					trait = slave
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } 
				}
				remove_opinion = { who = ROOT modifier = opinion_my_owner }
				reverse_remove_opinion = { who = ROOT modifier = opinion_my_slave }
				character_event = { id = slavery.0 }
			}
		}
		if = { #If illegal or defacto remove all slave camps
			limit = { 
				OR = {
					crownlaw_title = { 
						OR = {
							has_law = slavery_0
							has_law = slavery_1
						}	
					} 
					trait = liberator
				}	
			}
			any_demesne_title = {
				limit = { tier = BARON }
				remove_building = ca_asoiaf_slavepit_1
				remove_building = ct_asoiaf_slavepit_1
				remove_building = tp_asoiaf_slavepit_1	
				remove_building = no_asoiaf_slavepit_1				
			}
			family_palace = { remove_building = fp_asoiaf_slavepit_1 }
			if = { #Unsullied may choose to pledge allegiance
				limit = {
					OR = {
						any_demesne_title = {
							tier = BARON
							OR = {	
								has_building = ca_asoiaf_unsullied_1		
								has_building = ca_asoiaf_unsullied_cent_1		
								has_building = ct_asoiaf_unsullied_1		
								has_building = ct_asoiaf_unsullied_cent_1						
							}
						}
						family_palace = { 
							OR = {	
								has_building = fp_asoiaf_unsullied_1		
								has_building = fp_asoiaf_unsullied_cent_1							
							}
						}
					}
				}
				random_list = {
					50 = {
						modifier = {
							factor = 2
							trait = just
						}
						modifier = {
							factor = 2
							trait = honorable
						}
						modifier = {
							factor = 1.5
							diplomacy = 10
						}
						modifier = {
							factor = 1.5
							diplomacy = 12
						}
						modifier = {
							factor = 1.5
							diplomacy = 14
						}
						modifier = {
							factor = 1.5
							diplomacy = 16
						}
						modifier = {
							factor = 1.5
							diplomacy = 18
						}
						character_event = { id = slavery.3004 tooltip = TOOLTIPslavery.3004 }
					}
					50 = {
						modifier = {
							factor = 2
							trait = arbitrary
						}
						modifier = {
							factor = 2
							trait = ruthless
						}
						modifier = {
							factor = 1.5
							NOT = { diplomacy = 6 }
						}
						modifier = {
							factor = 1.5
							NOT = { diplomacy = 4 }
						}
						modifier = {
							factor = 1.5
							NOT = { diplomacy = 2 }
						}
						any_demesne_title = {
							limit = { tier = BARON }
							remove_building = ca_asoiaf_unsullied_1
							remove_building = ct_asoiaf_unsullied_1
							remove_building = ca_asoiaf_unsullied_cent_1
							remove_building = ct_asoiaf_unsullied_cent_1
						}
						family_palace = { 
							remove_building = fp_asoiaf_unsullied_1
							remove_building = fp_asoiaf_unsullied_cent_1 
						}
					}
				}	
			}
		}
		
	}
	
	option = { name = OK }
}
character_event = { #Character who owns no slaves has slave owner trait
	id = slavery.13
	
	hide_window = yes
	is_triggered_only = yes
	only_rulers = yes
	
	trigger = {
		trait = slave_owner
		NOT = { slave = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } } }
		NOT = { 
			capital_holding = { 
				OR = {
					has_building = ca_asoiaf_slavepit_1
					has_building = ct_asoiaf_slavepit_1	
					has_building = tp_asoiaf_slavepit_1	
					has_building = no_asoiaf_slavepit_1
					has_building = ca_asoiaf_unsullied_1
					has_building = ca_asoiaf_unsullied_cent_1
					has_building = ct_asoiaf_unsullied_1
					has_building = ct_asoiaf_unsullied_cent_1
				}	
			} 
		}
		NOT = { 
			family_palace = { 
				OR = {
					has_building = fp_asoiaf_slavepit_1
					has_building = fp_asoiaf_unsullied_1
					has_building = fp_asoiaf_unsullied_cent_1
				}
			} 
		}
	}
	
	immediate = { remove_trait = slave_owner }
	
	option = { name = OK }
}

# Slave Trader trait maintenance
character_event = {
	id = slavery.15
	desc = "EVTDESCSLAVERY15"
	
	only_rulers = yes
	is_triggered_only = yes
	
	trigger = {
		trait = slave_trader
		NOT = { has_full_slavery_trigger = yes }
	}
	
	option = {
		name = "EVTOPTASLAVERY15"
		remove_trait = slave_trader
	}
}
#On unlanded- lose all slaves
character_event = {
	id = slavery.16
	
	is_triggered_only = yes
	
	trigger = {
		is_alive = yes		
		OR = {
			trait = slave_trader
			trait = slave_owner
		}
		NOT = { is_dying = yes }
		NOT = { has_character_flag = abdication }
	}
	
	option = {
		name = "EVTOPTASLAVERY15"
		remove_trait = slave_owner
		remove_trait = slave_trader
		any_consort = {
			limit = { trait = slave }
			remove_consort = ROOT
		}
		#find potential new owner (last in list have priority)
		liege = { #new liege
			if = {
				limit = {
					is_ruler = yes
					is_alive = yes
					OR = {
						has_full_slavery_trigger = yes
						crownlaw_title = { has_law = slavery_3 }
					}	
					NOT = { trait = liberator }				
				}
				save_event_target_as = new_slave_owner
			}	
		}
		random_dynasty_member = { #relative
			limit = {
				is_ruler = yes
				is_alive = yes
				is_close_relative = ROOT
				OR = {
					has_full_slavery_trigger = yes
					crownlaw_title = { has_law = slavery_3 }
				}	
				NOT = { trait = liberator }				
			}
			save_event_target_as = new_slave_owner
		}
		random_spouse = { #spouse
			limit = {
				is_ruler = yes
				is_alive = yes
				OR = {
					has_full_slavery_trigger = yes
					crownlaw_title = { has_law = slavery_3 }
				}
				NOT = { trait = liberator }				
			}
			save_event_target_as = new_slave_owner
		}
		random_opinion_modifier_target = { #usurper/revoker
			limit = {
				is_ruler = yes
				OR = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_usurped_title }
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_revoked_my_title }
				}
				OR = {
					has_full_slavery_trigger = yes
					crownlaw_title = { has_law = slavery_3 }
				}	
				NOT = { trait = liberator }				
			}
			save_event_target_as = new_slave_owner
		}
		event_target:new_slave_owner = { 
			character_event = { id = slavery.17 days = 2 } 
			break = yes
		}
		#if no new owner found, free all slaves
		any_opinion_modifier_target = {
			limit = {
				trait = slave
				is_ruler = no
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } 
			}
			any_spouse = { remove_spouse = PREV }
			any_consort = { remove_consort = PREV }
			remove_opinion = { who = ROOT modifier = opinion_my_owner }
			reverse_remove_opinion = { who = ROOT modifier = opinion_my_slave }
			character_event = { id = slavery.0 }
			character_event = { id = slavery.602 } #escape
		}
	}
}
character_event = { #inform slaves gained
	id = slavery.17
	desc = "EVTDESCSLAVERY17"
	
	only_rulers = yes
	is_triggered_only = yes
	
	trigger = {
		FROM = {
			is_ruler = no
			any_opinion_modifier_target = {
				trait = slave
				is_ruler = no
				reverse_has_opinion_modifier = { who = PREV modifier = opinion_my_slave } 
			}
		}
	}
	
	option = {
		name = OK
		FROM = {
			any_opinion_modifier_target = {
				limit = {
					trait = slave
					is_ruler = no
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_my_slave } 
				}
				hidden_tooltip = {
					any_spouse = { remove_spouse = PREV }
					any_consort = { remove_consort = PREV }
					remove_opinion = { who = PREV modifier = opinion_my_owner }
					reverse_remove_opinion = { who = PREV modifier = opinion_my_slave }
					opinion = { who = ROOT modifier = opinion_my_owner }
					reverse_opinion = { who = ROOT modifier = opinion_my_slave }
					character_event = { id = slavery.259 days = 5 random = 4 } #slave maintenance
				}
				move_character = ROOT
				tooltip = { show_portrait = yes }
			}
		}
		if = {
			limit = { NOT = { trait = slave_owner } }
			add_trait = slave_owner 
		}
		hidden_tooltip = { character_event = { id = slavery.1010 } } #check slave pits
	}
}
# Dealing with out-of-place slaves
character_event = {
	id = slavery.20
	
	hide_window = yes
	only_rulers = yes
	is_triggered_only = yes
	
	trigger = {
		OR = {
			is_patrician = yes
			NOT = { tier = BARON }
			is_theocracy = yes
		}
	}
	
	immediate = {
		any_courtier = {
			limit = {
				trait = slave
				liege = { character = ROOT }
				OR = {
					NOT = { has_opinion_modifier = { who = ROOT modifier = opinion_my_owner } }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } }
				}
			}
			# Does the slave have a master somewhere that they can return to? If so, return them immediately!
			slave_owner = {
				limit = {
					is_ruler = yes
					is_alive = yes
					OR = {
						has_opinion_modifier = { who = PREV modifier = opinion_my_slave }
						reverse_has_opinion_modifier = { who = PREV modifier = opinion_my_owner }
					}	
				}	
				reverse_opinion = { who = PREV modifier = opinion_my_owner }
				opinion = { who = PREV modifier = opinion_my_slave }
				if = {
					limit = { NOT = { character = ROOT } }
					reverse_banish = PREV
				}	
			}
			
			#If ROOT has legal slavery make them the owner
			if = {
				limit = { 
					NOT = { liege = { has_opinion_modifier = { who = PREV modifier = opinion_my_slave } } }
					ROOT = {
						NOT = { crownlaw_title = { has_law = slavery_0 } }
					}
				}	
				opinion = { who = ROOT modifier = opinion_my_owner }
				reverse_opinion = { who = ROOT modifier = opinion_my_slave }
			}	
			# If the slave has no master anywhere, free them
			if = {
				limit = { 
					NOT = { liege = { has_opinion_modifier = { who = PREV modifier = opinion_my_slave } } }
				}	
				character_event = { id = slavery.0 }
			}							
		}
	}
	
	option = { name = OK }
}

# # Empire slavery law maintenance #merged with crown law maintenance maintenance.51
# character_event = {
	# id = slavery.21
	
	# hide_window = yes
	# only_independent = yes
	# is_triggered_only = yes
	
	# trigger = {
		# tier = EMPEROR
	# }
	
	# immediate = {
		# #Make sure sub-kingdoms match empire tier title's laws
		# any_vassal = {
			# limit = { tier = KING }
			# any_demesne_title = {
				# limit = { 
					# tier = KING 
					# dejure_liege_title = { holder_scope = { character = ROOT } }
				# }
				# if = {
					# limit = { 
						# dejure_liege_title = { has_law = slavery_0 }
						# NOT = { has_law = slavery_0 }
					# }
					# add_law = slavery_0
				# }	
				# if = {
					# limit = { 
						# dejure_liege_title = { has_law = slavery_1 }
						# NOT = { has_law = slavery_1 }
					# }
					# add_law = slavery_1
				# }	
				# if = {
					# limit = { 
						# dejure_liege_title = { has_law = slavery_2 }
						# NOT = { has_law = slavery_2 }
					# }
					# add_law = slavery_2
				# }
				# if = {
					# limit = { 
						# dejure_liege_title = { has_law = slavery_3 }
						# NOT = { has_law = slavery_3 }
					# }
					# add_law = slavery_3
				# }
			# }	
			# any_demesne_title = { #Any sub-kingdoms with no dejure empire follow primary empire
				# limit = { 
					# tier = KING 
					# NOT = { dejure_liege_title = { always = yes } }
				# }
				# if = {
					# limit = { 
						# ROOT = { primary_title = { has_law = slavery_0 } }
						# NOT = { has_law = slavery_0 }
					# }
					# add_law = slavery_0
				# }	
				# if = {
					# limit = { 
						# ROOT = { primary_title = { has_law = slavery_1 } }
						# NOT = { has_law = slavery_1 }
					# }
					# add_law = slavery_1
				# }	
				# if = {
					# limit = { 
						# ROOT = { primary_title = { has_law = slavery_2 } }
						# NOT = { has_law = slavery_2 }
					# }
					# add_law = slavery_2
				# }
				# if = {
					# limit = { 
						# ROOT = { primary_title = { has_law = slavery_3 } }
						# NOT = { has_law = slavery_3 }
					# }
					# add_law = slavery_3
				# }
			# }			
		# }
	# }
	
	# option = { name = OK }
# }

# Breeding slaves
character_event = {
	id = slavery.300
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		liege = { character_event = { id = slavery.301 } }
	}
	
	option = { name = OK }
}
character_event = {
	id = slavery.301
	desc = "EVTDESCSLAVERY301"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	immediate = {
		slave = {
			limit = {
				has_opinion_modifier = { who = ROOT modifier = opinion_my_owner }
				is_married = no
				NOT = { same_sex = FROM }
				OR = {
					is_female = no
					NOT = { age = 40 }
				}
				
				# Must be capable of having children
				age = 16
				NOT = { trait = incapable }
				NOT = { trait = eunuch }
				is_consort = no
				NOT = { character = FROM }
				OR = {
					NOT = { cannot_outbreed_trigger = yes }
					culture = FROM
					ROOT = { ai = no }
				}
			}
			set_character_flag = flag_breeding_candidate
			save_event_target_as = flag_breeding_candidate_1
		}
		slave = {
			limit = {
				has_opinion_modifier = { who = ROOT modifier = opinion_my_owner }
				is_married = no
				NOT = { same_sex = FROM }
				OR = {
					is_female = no
					NOT = { age = 40 }
				}
				
				# Must be capable of having children
				age = 16
				NOT = { trait = incapable }
				NOT = { trait = eunuch }
				NOT = { has_character_flag = flag_breeding_candidate }
				is_consort = no
				NOT = { character = FROM }
				OR = {
					NOT = { cannot_outbreed_trigger = yes }
					culture = FROM
					ROOT = { ai = no }
				}
			}
			set_character_flag = flag_breeding_candidate
			save_event_target_as = flag_breeding_candidate_2
		}
		slave = {
			limit = {
				has_opinion_modifier = { who = ROOT modifier = opinion_my_owner }
				is_married = no
				NOT = { same_sex = FROM }
				OR = {
					is_female = no
					NOT = { age = 40 }
				}
				
				# Must be capable of having children
				age = 16
				NOT = { trait = incapable }
				NOT = { trait = eunuch }
				NOT = { has_character_flag = flag_breeding_candidate }
				is_consort = no
				NOT = { character = FROM }
				OR = {
					NOT = { cannot_outbreed_trigger = yes }
					culture = FROM
					ROOT = { ai = no }
				}
			}
			save_event_target_as = flag_breeding_candidate_3
		}
	}
	
	option = {
		trigger = {
			event_target:flag_breeding_candidate_1 = { always = yes }
		}
		name = "EVTOPTASLAVERY301"
		hidden_tooltip = { FROM = { save_event_target_as = flag_breeding_slave_1 } }
		event_target:flag_breeding_candidate_1 = {
			tooltip = { show_portrait = yes }
			hidden_tooltip = { save_event_target_as = flag_breeding_slave_2 }
			character_event = { id = slavery.302 tooltip = "EVTTOOLTIPSLAVERY302" }		
		}
		hidden_tooltip = {
			FROM = { save_event_target_as = flag_breeding_slave_1 }
			event_target:flag_breeding_candidate_1 = { clr_character_flag = flag_breeding_candidate }
			event_target:flag_breeding_candidate_2 = { clr_character_flag = flag_breeding_candidate }
			clear_event_target = flag_breeding_candidate_1
			clear_event_target = flag_breeding_candidate_2
			clear_event_target = flag_breeding_candidate_3
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.2
				event_target:flag_breeding_candidate_1 = { is_close_relative = FROM }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_1 = { trait = genius }
			}
			modifier = {
				factor = 2
				event_target:flag_breeding_candidate_1 = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:flag_breeding_candidate_1 = { is_dumb_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_1 = { trait = imbecile }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_1 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_1 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_1 = { trait = fair }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_1 = { trait = ugly }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_1 = { trait = tall }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_1 = { trait = dwarf }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_1 = { trait = clubfooted }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_1 = { trait = harelip }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_1 = { trait = hunchback }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_1 = { trait = lisp }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_1 = { trait = stutter }
			}
			modifier = {
				factor = 0
				event_target:flag_breeding_candidate_1 = { trait = inbred }
			}
		}
	}
	
	option = {
		trigger = {
			event_target:flag_breeding_candidate_2 = { always = yes }
		}
		name = "EVTOPTASLAVERY301"
		hidden_tooltip = { FROM = { save_event_target_as = flag_breeding_slave_1 } }
		event_target:flag_breeding_candidate_2 = {
			tooltip = { show_portrait = yes }
			hidden_tooltip = { save_event_target_as = flag_breeding_slave_2 }
			character_event = { id = slavery.302 tooltip = "EVTTOOLTIPSLAVERY302" }			
		}
		hidden_tooltip = {
			event_target:flag_breeding_candidate_1 = { clr_character_flag = flag_breeding_candidate }
			event_target:flag_breeding_candidate_2 = { clr_character_flag = flag_breeding_candidate }
			clear_event_target = flag_breeding_candidate_1
			clear_event_target = flag_breeding_candidate_2
			clear_event_target = flag_breeding_candidate_3
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.2
				event_target:flag_breeding_candidate_2 = { is_close_relative = FROM }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_2 = { trait = genius }
			}
			modifier = {
				factor = 2
				event_target:flag_breeding_candidate_2 = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:flag_breeding_candidate_2 = { is_dumb_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_2 = { trait = imbecile }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_2 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_2 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_2 = { trait = fair }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_2 = { trait = ugly }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_2 = { trait = tall }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_2 = { trait = dwarf }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_2 = { trait = clubfooted }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_2 = { trait = harelip }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_2 = { trait = hunchback }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_2 = { trait = lisp }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_2 = { trait = stutter }
			}
			modifier = {
				factor = 0
				event_target:flag_breeding_candidate_2 = { trait = inbred }
			}
		}
	}
	
	option = {
		trigger = {
			event_target:flag_breeding_candidate_3 = { always = yes }
		}
		name = "EVTOPTASLAVERY301"
		hidden_tooltip = { FROM = { save_event_target_as = flag_breeding_slave_1 } }
		event_target:flag_breeding_candidate_3 = {
			tooltip = { show_portrait = yes }
			hidden_tooltip = { save_event_target_as = flag_breeding_slave_2 }
			character_event = { id = slavery.302 tooltip = "EVTTOOLTIPSLAVERY302" }			
		}
		hidden_tooltip = {			
			event_target:flag_breeding_candidate_1 = { clr_character_flag = flag_breeding_candidate }
			event_target:flag_breeding_candidate_2 = { clr_character_flag = flag_breeding_candidate }
			clear_event_target = flag_breeding_candidate_1
			clear_event_target = flag_breeding_candidate_2
			clear_event_target = flag_breeding_candidate_3
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.2
				event_target:flag_breeding_candidate_3 = { is_close_relative = FROM }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_3 = { trait = genius }
			}
			modifier = {
				factor = 2
				event_target:flag_breeding_candidate_3 = { is_smart_trigger = yes }
			}
			modifier = {
				factor = 0.5
				event_target:flag_breeding_candidate_3 = { is_dumb_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_3 = { trait = imbecile }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_3 = { is_strong_trigger = yes }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_3 = { is_weak_trigger = yes }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_3 = { trait = fair }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_3 = { trait = ugly }
			}
			modifier = {
				factor = 4
				event_target:flag_breeding_candidate_3 = { trait = tall }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_3 = { trait = dwarf }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_3 = { trait = clubfooted }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_3 = { trait = harelip }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_3 = { trait = hunchback }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_3 = { trait = lisp }
			}
			modifier = {
				factor = 0.25
				event_target:flag_breeding_candidate_3 = { trait = stutter }
			}
			modifier = {
				factor = 0
				event_target:flag_breeding_candidate_3 = { trait = inbred }
			}
		}
	}
	
	option = {
		name = "EVTOPTBSLAVERY301"
		clr_character_flag = flag_slave_action
		hidden_tooltip = {
			event_target:flag_breeding_candidate_1 = { clr_character_flag = flag_breeding_candidate }
			event_target:flag_breeding_candidate_2 = { clr_character_flag = flag_breeding_candidate }
			clear_event_target = flag_breeding_candidate_1
			clear_event_target = flag_breeding_candidate_2
			clear_event_target = flag_breeding_candidate_3
		}
		ai_chance = {
			factor = 25
		}
	}
}

character_event = { #second slave decides
	id = slavery.302
	#hide_window = yes
	is_triggered_only = yes
	
	option = {
		name = OK
		# Cooperate
		FROM = { character_event = { id = slavery.304 } }
		ai_chance = {
			factor = 50
			#Liege is likely to hurt me If I dont comply
			modifier = {
				factor = 4
				has_opinion_modifier = { who = FROM modifier = opinion_beat_slaves_resentment }
			}
			modifier = {
				factor = 4
				FROM = { trait = cruel }
			}
			modifier = {
				factor = 4
				FROM = { trait = ruthless }
			}
			modifier = {
				factor = 4
				FROM = { trait = impaler }
			}
			#Liege is nice
			modifier = {
				factor = 0.25
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0.25
				FROM = { trait = honorable }
			}
			
			modifier = {
				factor = 4
				trait = craven
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 3
				trait = lustful
			}
			modifier = {
				factor = 0.5
				trait = chaste
			}
			modifier = {
				factor = 0.25
				trait = celibate
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 100 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 80 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0.85
				NOT = { opinion = { who = FROM value = -19 } }
			}
			modifier = {
				factor = 0.85
				NOT = { opinion = { who = FROM value = -39 } }
			}
			modifier = {
				factor = 0.85
				NOT = { opinion = { who = FROM value = -59 } }
			}
			modifier = {
				factor = 0.85
				NOT = { opinion = { who = FROM value = -79 } }
			}
			modifier = {
				factor = 0.85
				NOT = { opinion = { who = FROM value = -99 } }
			}
			
			# Lovers will be much more willing to comply
			modifier = {
				factor = 5
				event_target:flag_breeding_slave_1 = { is_lover = ROOT }
			}
			modifier = {
				factor = 3
				event_target:flag_breeding_slave_1 = { trait = fair }
			}
			modifier = {
				factor = 0.33
				event_target:flag_breeding_slave_1 = { trait = ugly }
			}
		}
	}
	option = {
		name = OK
		# Refuse
		FROM = { character_event = { id = slavery.303 } }
		ai_chance = { factor = 15 }
	}
}

character_event = { #inform second slave refuses
	id = slavery.303
	desc = "EVTDESCSLAVERY303"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY303" # Lash them until they cooperate
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				trait = kind
			}
			modifier = {
				factor = 0
				trait = honorable
			}
			modifier = {
				factor = 0.1
				trait = patient
			}
			
			modifier = {
				factor = 4
				trait = cruel
			}		
			modifier = {
				factor = 4
				trait = ruthless
			}
			modifier = {
				factor = 4
				trait = impaler
			}		
			modifier = {
				factor = 4
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
		FROM = { character_event = { id = slavery.500 tooltip = "EVTTOOLTIPSLAVERY500" } } # Slave is lashed
		if = {
			limit = { NOT = { religion = nath_pagan } }
			piety = -25
		}	
		if = {
			limit = { religion = nath_pagan }
			piety = -50
			custom_tooltip = { text = nath_pagan_ahimsa_tooltip }
		}
		if = {
			limit = {
				NOT = { trait = cruel }
				NOT = { trait = ruthless }
				NOT = { trait = kind }
				NOT = { trait = honorable }
				NOT = { personality_traits = 6 }
			}
			random_list = {
				100 = { 
				}
				50 = { 
					add_trait = cruel 
					hidden_tooltip = { character_event = { id = 38259 } }
				}
				50 = { 
					add_trait = ruthless 
					hidden_tooltip = { character_event = { id = trait_notification.18 } }
				}
			}
		}
		if = {
			limit = { trait = kind }
			if = {
				limit = { NOT = { trait = stressed } }
				add_trait = stressed
			}
			remove_trait = kind
		}
		if = {
			limit = { trait = honorable }
			if = {
				limit = { NOT = { trait = stressed } }
				add_trait = stressed
			}
			remove_trait = honorable
		}
	}
	option = {
		name = "EVTOPTBSLAVERY303" # Give up
		ai_chance = {
			factor = 50
		}	
		clr_character_flag = flag_slave_action
		hidden_tooltip = {
			clear_event_target = flag_breeding_slave_1
			clear_event_target = flag_breeding_slave_2
		}
	}
}

character_event = { #inform second slave cooperates
	id = slavery.304
	desc = "EVTDESCSLAVERY304"
	picture = GFX_evt_slavery
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY304"
		event_target:flag_breeding_slave_1 = { #get first slave
			character_event = { id = slavery.305 tooltip = "EVTTOOLTIPSLAVERY302" }
		}
	}
}

character_event = { #first slave decides
	id = slavery.305
	#hide_window = yes
	is_triggered_only = yes
	
	option = {
		name = OK
		# Cooperate
		FROM = { character_event = { id = slavery.307 } }
		ai_chance = {
			factor = 50
			#Liege is likely to hurt me If I dont comply
			modifier = {
				factor = 4
				has_opinion_modifier = { who = FROM modifier = opinion_beat_slaves_resentment }
			}
			modifier = {
				factor = 4
				FROM = { trait = cruel }
			}
			modifier = {
				factor = 4
				FROM = { trait = ruthless }
			}
			modifier = {
				factor = 4
				FROM = { trait = impaler }
			}
			#Liege is nice
			modifier = {
				factor = 0.25
				FROM = { trait = kind }
			}
			modifier = {
				factor = 0.25
				FROM = { trait = honorable }
			}
			
			modifier = {
				factor = 4
				trait = craven
			}
			modifier = {
				factor = 0.5
				trait = brave
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 2
				trait = lustful
			}
			modifier = {
				factor = 0.5
				trait = chaste
			}
			modifier = {
				factor = 0.25
				trait = celibate
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 100 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 80 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 60 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 40 }
			}
			modifier = {
				factor = 1.25
				opinion = { who = FROM value = 20 }
			}
			modifier = {
				factor = 0.85
				NOT = { opinion = { who = FROM value = -19 } }
			}
			modifier = {
				factor = 0.85
				NOT = { opinion = { who = FROM value = -39 } }
			}
			modifier = {
				factor = 0.85
				NOT = { opinion = { who = FROM value = -59 } }
			}
			modifier = {
				factor = 0.85
				NOT = { opinion = { who = FROM value = -79 } }
			}
			modifier = {
				factor = 0.85
				NOT = { opinion = { who = FROM value = -99 } }
			}
			
			# Lovers will be much more willing to comply
			modifier = {
				factor = 5
				event_target:flag_breeding_slave_2 = { is_lover = ROOT }
			}
			modifier = {
				factor = 3
				event_target:flag_breeding_slave_2 = { trait = fair }
			}
			modifier = {
				factor = 0.33
				event_target:flag_breeding_slave_2 = { trait = ugly }
			}
		}
	}
	option = {
		name = OK
		# Refuse
		FROM = { character_event = { id = slavery.306 } }
		ai_chance = { factor = 15 }
	}
}

character_event = { #inform first slave refuses
	id = slavery.306
	desc = "EVTDESCSLAVERY303"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY303" # Lash them until they cooperate
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				trait = kind
			}
			modifier = {
				factor = 0
				trait = honorable
			}
			modifier = {
				factor = 0.1
				trait = patient
			}
			
			modifier = {
				factor = 4
				trait = cruel
			}		
			modifier = {
				factor = 4
				trait = ruthless
			}
			modifier = {
				factor = 4
				trait = impaler
			}		
			modifier = {
				factor = 4
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 0.5
				trait = humble
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
		FROM = { character_event = { id = slavery.500 tooltip = "EVTTOOLTIPSLAVERY500" } } # Slave is lashed
		if = {
			limit = { NOT = { religion = nath_pagan } }
			piety = -25
		}	
		if = {
			limit = { religion = nath_pagan }
			piety = -50
			custom_tooltip = { text = nath_pagan_ahimsa_tooltip }
		}
		if = {
			limit = {
				NOT = { trait = cruel }
				NOT = { trait = ruthless }
				NOT = { trait = kind }
				NOT = { trait = honorable }
				NOT = { personality_traits = 6 }
			}
			random_list = {
				100 = { 
				}
				50 = { 
					add_trait = cruel 
					hidden_tooltip = { character_event = { id = 38259 } }
				}
				50 = { 
					add_trait = ruthless 
					hidden_tooltip = { character_event = { id = trait_notification.18 } }
				}
			}
		}
		if = {
			limit = { trait = kind }
			if = {
				limit = { NOT = { trait = stressed } }
				add_trait = stressed
			}
			remove_trait = kind
		}
		if = {
			limit = { trait = honorable }
			if = {
				limit = { NOT = { trait = stressed } }
				add_trait = stressed
			}
			remove_trait = honorable
		}		
	}
	option = {
		name = "EVTOPTBSLAVERY303" # Give up
		ai_chance = {
			factor = 50
		}	
		clr_character_flag = flag_slave_action
		hidden_tooltip = {
			clear_event_target = flag_breeding_slave_1
			clear_event_target = flag_breeding_slave_2
		}
	}
}

character_event = { #inform first slave cooperates
	id = slavery.307
	desc = "EVTDESCSLAVERY307"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY307"
		event_target:flag_breeding_slave_2 = {
			add_spouse = FROM
		}
		clr_character_flag = flag_slave_action
		hidden_tooltip = {
			clear_event_target = flag_breeding_slave_1
			clear_event_target = flag_breeding_slave_2
		}
	}
}
#Breeding slave falls pregnant
character_event = {
	id = slavery.308
	
	is_triggered_only = yes
	hide_window = yes
	capable_only = yes
	prisoner = no
	max_age = 40
	only_women = yes
	
	trigger = {
		trait = slave
		is_pregnant = no
		fertility = 0.05
		is_ill = no
		spouse = {
			trait = slave
			fertility = 0.05
			NOT = { trait = eunuch }
			NOT = { trait = incapable }
			prisoner = no
		}
		NOT = {
			any_child = {
				trait = slave
				is_alive = yes
				count = 2
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				fertility = 0.75
				spouse = { fertility = 0.75 }
			}
			random = {
				chance = 80
				spouse = { ROOT = { impregnate = PREV } }
			}
		}
		if = {
			limit = {
				OR = {
					NOT = { fertility = 0.75 }
					NOT = { spouse = { fertility = 0.75 } }
				}
				fertility = 0.5
				spouse = { fertility = 0.5 }
			}
			random = {
				chance = 55
				spouse = { ROOT = { impregnate = PREV } }
			}	
		}
		if = {
			limit = {
				OR = {
					NOT = { fertility = 0.5 }
					NOT = { spouse = { fertility = 0.5 } }
				}
				fertility = 0.2
				spouse = { fertility = 0.2 }
			}
			random = {
				chance = 30
				spouse = { ROOT = { impregnate = PREV } }
			}	
		}
		if = {
			limit = {
				OR = {
					NOT = { fertility = 0.2 }
					NOT = { spouse = { fertility = 0.2 } }
				}
			}
			random = {
				chance = 15
				spouse = { ROOT = { impregnate = PREV } }
			}	
		}
	}
	
	option = {
		name = OK
	}
}

# Under chattel slavery, slavery is inherited from the mother
# character_event = {
	# id = slavery.400 #MERGED WITH BIRTH.990
	# hide_window = yes
	# is_triggered_only = yes
	
	# option = { name = OK }
# }

character_event = {
	id = slavery.401
	picture = GFX_evt_birth
	
	is_triggered_only = yes
	
	desc = {
		text = EVTDESCSLAVERY401
		trigger = { FROM = { is_alive = yes } }
	}
	desc = {
		text = EVTDESCSLAVERY401B
		trigger = { FROM = { is_alive = no } }
	}
	
	option = {
		name = {
			text = EVTOPTASLAVERY401
			trigger = { FROM = { is_alive = yes } }
		}
		name = {
			text = EVTOPTASLAVERY401B
			trigger = { FROM = { is_alive = no } }
		}
		save_event_target_as = enslaver
		FROM = { enslave_effect = yes }
	}
}

# One of your slaves gives birth to your child
# character_event = {
	# id = slavery.402 #MERGED WITH BIRTH.990
	# hide_window = yes
	# is_triggered_only = yes
	
	# option = { name = OK }
# }
character_event = {
	id = slavery.403
	picture = GFX_evt_birth
	
	is_triggered_only = yes
	
	desc = {
		text = EVTDESCSLAVERY403
		trigger = { FROM = { is_alive = yes } }
	}
	desc = {
		text = EVTDESCSLAVERY403B
		trigger = { FROM = { is_alive = no } }
	}
	
	option = { # Keep the child in slavery
		name = {
			text = EVTOPTASLAVERY403
			trigger = { FROM = { is_alive = yes } }
		}
		name = {
			text = EVTOPTASLAVERY403B
			trigger = { FROM = { is_alive = no } }
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 4
				trait = proud
			}
			modifier = {
				factor = 0.25
				trait = humble
			}
			modifier = {
				factor = 0
				trait = honorable
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 0.5
				trait = honest
			}
			modifier = {
				factor = 2
				trait = deceitful
			}
			modifier = {
				factor = 0.5
				trait = just
			}
			modifier = {
				factor = 2
				trait = arbitrary
			}
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = selfish
			}
			modifier = {
				factor = 0.1
				trait = familyperson
			}
		}
		save_event_target_as = enslaver
		FROM = {
			set_father = 0
			enslave_effect = yes
			#give_minor_title = title_slave	
			if = {
				limit = { NOT = { dynasty = 0 } }
				dynasty = none
			}	
			bastard_nickname_mother_effect = yes
		}
		if = {
			limit = { 
				NOT = { trait = ruthless } 
				NOT = { trait = honorable }
				NOT = { personality_traits = 6 }
			}
			random = {
				chance = 25
				add_trait = ruthless
				hidden_tooltip = { character_event = { id = trait_notification.18 } }
			}	
		}	
		hidden_tooltip = {
			FROM = { set_real_father = ROOT }
		}
		recalc_succession = yes
	}
	option = {
		# Free the child but leave it illegitimate
		name = {
			text = EVTOPTBSLAVERY403
			trigger = { FROM = { is_alive = yes } }
		}
		name = {
			text = EVTOPTBSLAVERY403B
			trigger = { FROM = { is_alive = no } }
		}
		trigger = {
			NOT = { #no concept of bastardry
				AND = {
					culture = dothraki 
					OR = {
						is_ruler = yes
						liege = { culture = dothraki }
					}
				}
			}	
		}
		ai_chance = { factor = 100 }
		FROM = {
			acknowledge_newborn_FROM_effect = yes # The child gets the father's dynasty, but is not legitimized.
		}
		prestige = -75	
		recalc_succession = yes
	}
	option = {
		# Free the child and its mother and legitimize it
		name = "EVTOPTCSLAVERY404"
		trigger = {
			NOT = { #no concept of bastardry
				AND = {
					culture = dothraki 
					OR = {
						is_ruler = yes
						liege = { culture = dothraki }
					}
				}
			}	
		}
		ai_chance = {
			factor = 50
			
			modifier = {
				factor = 0.25
				FROM = { is_alive = no }
			}
			modifier = {
				factor = 0
				trait = proud
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = honorable
			}
			modifier = {
				factor = 0.5
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
		}
		FROM = {
			legitimise_newborn_FROM_effect = yes # The child gets the father's dynasty
			mother = { character_event = { id = slavery.0 tooltip = "EVTTOOLTIPSLAVERY0" } }
		}
		prestige = -200
		if = {
			limit = { ROOT = { NOT = { culture = summer_islander } } }#Promiscious culture does not care
			any_child = {
				limit = {
					NOT = { character = FROM }
					dynasty = ROOT
					NOT = { trait = bastard }
				}
				opinion = {
					who = ROOT
					modifier = legitimized_bastard
					months = 60
				}
			}
		}
		recalc_succession = yes		
	}
	
	option = {
		# Dothraki Acknowledges child
		name = "EVTOPTDSLAVERY404"
		trigger = {
			culture = dothraki 
			OR = {
				is_ruler = yes
				liege = { culture = dothraki }
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = honorable
			}
			modifier = {
				factor = 0.5
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
		}
		FROM = {
			remove_trait = slave
			dynasty = ROOT
		}	
		recalc_succession = yes
	}
}

# Lashing a slave
character_event = {
	id = slavery.500
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		add_character_modifier = {
			name = slave_lashed
			duration = 200
		}
		if = {
			limit = { 
				NOT = { trait = brave } 
				NOT = { trait = berserker }
				NOT = { personality_traits = 6 }
			}
			random = {
				chance = 20
				add_trait = craven
			}
		}
		if = {
			limit = { 
				NOT = { trait = proud } 
				NOT = { personality_traits = 6 }
			}
			random = {
				chance = 20
				add_trait = humble
			}
		}
		if = {
			limit = { 
				NOT = { trait = ambitious } 
				NOT = { personality_traits = 6 }
			}
			random = {
				chance = 20
				add_trait = content
			}
		}
		if = {
			limit = { trait = brave }
			random = {
				chance = 20
				remove_trait = brave
			}
		}
		if = {
			limit = { trait = proud }
			random = {
				chance = 20
				remove_trait = proud
			}
		}
		if = {
			limit = { trait = ambitious }
			random = {
				chance = 20
				remove_trait = ambitious
			}
		}
		liege = {
			ROOT = {
				opinion = { who = PREV modifier = opinion_lashed_me }
				if = {
					limit = { NOT = { trait = brave } }
					opinion = { who = PREV modifier = opinion_beat_slaves_intimidation }
				}
			}
			any_courtier = {
				limit = { 
					trait = slave 
					NOT = { character = ROOT } 
				}
				opinion = { who = PREV modifier = opinion_beat_slaves_resentment }
				if = {
					limit = { NOT = { trait = brave } }
					opinion = { who = PREV modifier = opinion_beat_slaves_intimidation }
				}
			}
		}
		if = {
			limit = { is_maimed_trigger = yes }
			random_list = {
				75 = {
					liege = {
						character_event = { id = slavery.501 }
					}
				}
				25 = {
					death = { death_reason = death_execution_torture killer = FROM }
					liege = {
						character_event = { id = slavery.504 }
					}
				}
			}
		}
		if = {
			limit = { trait = wounded }
			random_list = {
				50 = {
					liege = {
						character_event = { id = slavery.501 }
					}
				}
				40 = {
					remove_trait = wounded
					if = {
						limit = { NOT = { has_dlc = "Reapers" } }
						add_trait = maimed
						character_event = { id = 38281 }
					}
					if = {
						limit = { has_dlc = "Reapers" }
						random_list = {
							20 = {
								modifier = {
									factor = 0
									trait = disfigured
								}
								add_trait = disfigured
								character_event = { id = RIP.11504 }
							}
							5 = {
								modifier = {
									factor = 0
									trait = mangled
								}
								add_trait = mangled
								character_event = { id = RIP.11505 }
							}
						}
					}
					liege = {
						character_event = { id = slavery.503 }
					}
				}
				10 = {
					death = { death_reason = death_execution_torture killer = FROM }
					liege = {
						character_event = { id = slavery.504 }
					}
				}
			}
		}
		if = {
			limit = {
				NOT = { is_maimed_trigger = yes }
				NOT = { trait = wounded }
			}
			random_list = {
				45 = {
					liege = {
						character_event = { id = slavery.501 }
					}
				}
				30 = {
					add_trait = wounded
					liege = {
						character_event = { id = slavery.502 }
					}
				}
				20 = {
					if = {
						limit = { NOT = { has_dlc = "Reapers" } }
						add_trait = maimed
						character_event = { id = 38281 }
					}
					if = {
						limit = { has_dlc = "Reapers" }
						random_list = {
							20 = {
								modifier = {
									factor = 0
									trait = disfigured
								}
								add_trait = disfigured
								character_event = { id = RIP.11504 }
							}
							5 = {
								modifier = {
									factor = 0
									trait = mangled
								}
								add_trait = mangled
								character_event = { id = RIP.11505 }
							}
						}
					}
					liege = {
						character_event = { id = slavery.503 }
					}
				}
				5 = {
					death = { death_reason = death_execution_torture killer = FROM }
					liege = {
						character_event = { id = slavery.504 }
					}
				}
			}
		}
	}
	
	option = { name = OK }
}

# Outcomes
character_event = {
	id = slavery.501
	desc = "EVTDESCSLAVERY501"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = { event_target:flag_breeding_slave_1 = { character = FROM } }
			NOT = { event_target:flag_breeding_slave_2 = { character = FROM } }
		}
		name = "EVTOPTASLAVERY501"
		clr_character_flag = flag_slave_action
	}
	
	option = {
		trigger = { event_target:flag_breeding_slave_1 = { character = FROM } }
		name = "EVTOPTBSLAVERY501"
		hidden_tooltip = { FROM = { character_event = { id = slavery.305 } } }
	}
	
	option = {
		trigger = { event_target:flag_breeding_slave_2 = { character = FROM } }
		name = "EVTOPTBSLAVERY501"
		hidden_tooltip = { FROM = { character_event = { id = slavery.302 } } }
	}
}
character_event = {
	id = slavery.502
	desc = "EVTDESCSLAVERY502"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = { event_target:flag_breeding_slave_1 = { character = FROM } }
			NOT = { event_target:flag_breeding_slave_2 = { character = FROM } }
		}
		name = "EVTOPTASLAVERY501"
		clr_character_flag = flag_slave_action
	}
	
	option = {
		trigger = { event_target:flag_breeding_slave_1 = { character = FROM } }
		name = "EVTOPTBSLAVERY501"
		hidden_tooltip = { FROM = { character_event = { id = slavery.305 } } }
	}
	
	option = {
		trigger = { event_target:flag_breeding_slave_2 = { character = FROM } }
		name = "EVTOPTBSLAVERY501"
		hidden_tooltip = { FROM = { character_event = { id = slavery.302 } } }
	}
}
character_event = {
	id = slavery.503
	desc = "EVTDESCSLAVERY503"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = { event_target:flag_breeding_slave_1 = { character = FROM } }
			NOT = { event_target:flag_breeding_slave_2 = { character = FROM } }
		}
		name = "EVTOPTASLAVERY501"
		clr_character_flag = flag_slave_action
	}
	
	option = {
		trigger = { event_target:flag_breeding_slave_1 = { character = FROM } }
		name = "EVTOPTBSLAVERY501"
		hidden_tooltip = { FROM = { character_event = { id = slavery.305 } } }
	}
	
	option = {
		trigger = { event_target:flag_breeding_slave_2 = { character = FROM } }
		name = "EVTOPTBSLAVERY501"
		hidden_tooltip = { FROM = { character_event = { id = slavery.302 } } }
	}
}
character_event = {
	id = slavery.504
	desc = "EVTDESCSLAVERY504"
	picture = GFX_evt_death
	is_triggered_only = yes
	
	option = {
		trigger = {
			NOT = { event_target:flag_breeding_slave_1 = { character = FROM } }
			NOT = { event_target:flag_breeding_slave_2 = { character = FROM } }
		}
		name = "EVTOPTASLAVERY504"
		clr_character_flag = flag_slave_action
	}
	
	option = {
		trigger = {
			OR = {
				event_target:flag_breeding_slave_1 = { character = FROM }
				event_target:flag_breeding_slave_2 = { character = FROM }
			}
		}
		name = "EVTOPTBSLAVERY504"
		clr_character_flag = flag_slave_action
		hidden_tooltip = {
			clear_event_target = flag_breeding_slave_1
			clear_event_target = flag_breeding_slave_2
		}
	}
}

# Slave escaping from slavery
character_event = {
	id = slavery.600
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		if = {
			limit = {
				plot_power = 0.5
				NOT = { plot_power = 1 }
			}
			random_list = {
				40 = { plot_target_char = { character_event = { id = slavery.601 days = 1 } } }
				60 = { plot_target_char = { character_event = { id = slavery.605 days = 1 } } }
			}
		}
		if = {
			limit = {
				plot_power = 1
				NOT = { plot_power = 1.5 }
			}
			random_list = {
				75 = { plot_target_char = { character_event = { id = slavery.601 days = 1 } } }
				25 = { plot_target_char = { character_event = { id = slavery.605 days = 1 } } }
			}
		}
		if = {
			limit = { plot_power = 1.5 }
			random_list = {
				90 = { plot_target_char = { character_event = { id = slavery.601 days = 1 } } }
				10 = { plot_target_char = { character_event = { id = slavery.605 days = 1 } } }
			}
		}
	}
	
	option = { name = OK }
}

# Escape successful!
character_event = {
	id = slavery.601
	desc = "EVTDESCSLAVERY601"
	picture = GFX_evt_slavery
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			character_event = { id = slavery.0 days = 1 }
			character_event = { id = slavery.602 }
		}
	}
	
	option = {
		name = EVTOPTASLAVERY601
		custom_tooltip = { text = "LOSESLAVEFROM" }
		hidden_tooltip = {
			opinion = { who = FROM modifier = opinion_slave_escaped }			
		}
	}
}

# The actual escape
character_event = {
	id = slavery.602
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = escaped_slave
		# Inform relatives
		any_playable_ruler = {
			limit = { 
				ai = no 
				is_close_relative = ROOT	
			}
			character_event = { id = slavery.604 days = 1 }
		}
		# Move to a random country where slavery is illegal
		random_playable_ruler = {
			limit = { #Try and find closely related dynast
				dynasty = ROOT
				is_close_relative = ROOT
				crownlaw_title = { has_law = slavery_0 } 
				NOT = { same_realm = FROM }
				NOT = { trait = nightswatch }
				NOT = { culture_group = unoccupied_group }
				NOT = { culture_group = winter_group }	
			}
			ROOT = { move_character = PREV }
			if = {
				limit = { ROOT = { NOT = { trait = dragon_rider } } }
				character_event = { id = slavery.603 days = 1 }
			}
			if = {
				limit = { ROOT = { trait = dragon_rider } } 
				character_event = { id = slavery.608 days = 1 }
			}		
			break = yes			
		}
		random_playable_ruler = {
			limit = { #Try and find dynast
				dynasty = ROOT
				NOT = { dynasty = 0 }
				crownlaw_title = { has_law = slavery_0 } 
				NOT = { same_realm = FROM }
				NOT = { trait = nightswatch }
				NOT = { culture_group = unoccupied_group }
				NOT = { culture_group = winter_group }	
			}
			ROOT = { move_character = PREV }
			if = {
				limit = { ROOT = { NOT = { trait = dragon_rider } } }
				character_event = { id = slavery.603 days = 1 }
			}
			if = {
				limit = { ROOT = { trait = dragon_rider } } 
				character_event = { id = slavery.608 days = 1 }
			}
			break = yes	
		}	
		random_playable_ruler = {
			limit = { #Try and find same culture/religion
				culture_group = ROOT
				religion = ROOT
				crownlaw_title = { has_law = slavery_0 } 
				NOT = { same_realm = FROM }
				NOT = { character = FROM }
				NOT = { trait = nightswatch }
				NOT = { culture_group = unoccupied_group }
				NOT = { culture_group = winter_group }	
			}
			ROOT = { move_character = PREV }
			if = {
				limit = { ROOT = { NOT = { trait = dragon_rider } } }
				character_event = { id = slavery.603 days = 1 }
			}
			if = {
				limit = { ROOT = { trait = dragon_rider } } 
				character_event = { id = slavery.608 days = 1 }
			}
			break = yes	
		}
		random_playable_ruler = {
			limit = { #If still havent found destination move somewhere random
				crownlaw_title = { has_law = slavery_0 } 
				NOT = { same_realm = FROM }
				NOT = { character = FROM }
				NOT = { trait = nightswatch }
				NOT = { trait = wildling }
				NOT = { culture_group = unoccupied_group }
				NOT = { culture_group = winter_group }	
			}
			ROOT = { move_character = PREV }
			if = {
				limit = { ROOT = { NOT = { trait = dragon_rider } } }
				character_event = { id = slavery.603 days = 1 }
			}
			if = {
				limit = { ROOT = { trait = dragon_rider } } 
				character_event = { id = slavery.608 days = 1 }
			}
			break = yes	
		}
	}
	
	# Become a liberator?
	option = {
		name = OK
		add_trait = liberator
		ai_chance = {
			factor = 5
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 0.5
				trait = craven
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 0.5
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = selfish
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = arbitrary
			}
			modifier = {
				factor = 2
				trait = zealous
			}
		}
	}
	option = {
		name = OK
		ai_chance = { factor = 100 }
	}
}

# An escaped slave arrives at your court
character_event = {
	id = slavery.603
	desc = "EVTDESCSLAVERY603"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		name = OK
		FROM = { FROM = { tooltip = { show_portrait = yes } } }
	}
}

# Your relative has escaped slavery!
character_event = {
	id = slavery.604
	desc = "EVTDESCSLAVERY604"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		name = OK
		FROM = { FROM = { tooltip = { show_portrait = yes } } }
	}
}

# A slave was caught trying to escape!
character_event = {
	id = slavery.605
	desc = "EVTDESCSLAVERY605"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		# Let them off with a warning
		name = "EVTOPTASLAVERY605"
		any_courtier = {
			limit = { has_opinion_modifier = { who = ROOT modifier = opinion_my_owner } }
			remove_opinion = { who = ROOT modifier = opinion_beat_slaves_intimidation }
		}
		FROM = { opinion = { who = ROOT modifier = opinion_merciful months = 240 } }
		any_courtier= {
			limit = { has_opinion_modifier = { who = ROOT modifier = opinion_my_owner } }
			opinion = { who = ROOT modifier = opinion_merciful months = 240 }
		}
		FROM = { 
			clr_character_flag = escape_slavery_decision
			cancel_plot = plot_escape_slavery 
		}
		opinion = { who = FROM modifier = opinion_slave_attempted_escape }
		prestige = -50
		piety = 50
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = cruel
			}
			modifier = {
				factor = 0
				trait = ruthless
			}
			modifier = {
				factor = 0
				trait = impaler
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 0.5
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = trusting
			}
			modifier = {
				factor = 0.5
				trait = paranoid
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 0.5
				trait = proud
			}
			modifier = {
				factor = 0.1
				has_opinion_modifier = { who = FROM modifier = opinion_slave_attempted_escape }
			}
		}
	}
	
	option = {
		# Lash them!
		name = "EVTOPTBSLAVERY605"
		FROM = {
			character_event = { id = slavery.500 tooltip = "EVTTOOLTIPSLAVERY500" }
			cancel_plot = plot_escape_slavery
		}
		opinion = { who = FROM modifier = opinion_slave_attempted_escape }
		if = {
			limit = { NOT = { religion = nath_pagan } }
			piety = -25
		}	
		if = {
			limit = { religion = nath_pagan }
			piety = -50
			custom_tooltip = { text = nath_pagan_ahimsa_tooltip }
		}	
		if = {
			limit = { 
				NOT = { trait = honorable }
				NOT = { trait = ruthless } 
				NOT = { personality_traits = 6 }
			}
			random = {
				chance = 25
				add_trait = ruthless
				hidden_tooltip = { character_event = { id = trait_notification.18 } }
			}
		}
		if = {
			limit = { trait = kind }
			if = {
				limit = { NOT = { trait = stressed } }
				add_trait = stressed
			}
			remove_trait = kind
		}
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 0.5
				trait = arbitrary
			}
			modifier = {
				factor = 0
				trait = honorable
			}
			modifier = {
				factor = 0
				trait = kind
			}
		}
	}
	
	option = {
		# Lash them and anyone who helped them!
		trigger = { FROM = { any_plot_backer = { has_opinion_modifier = { who = ROOT modifier = opinion_my_owner } } } }
		name = "EVTOPTCSLAVERY605"
		FROM = {
			character_event = { id = slavery.500 tooltip = "EVTTOOLTIPSLAVERY500" }
			any_plot_backer = {
				limit = { has_opinion_modifier = { who = ROOT modifier = opinion_my_owner } }
				character_event = { id = slavery.500 days = 1 tooltip = "EVTTOOLTIPSLAVERY500" }
			}
			cancel_plot = plot_escape_slavery
		}
		opinion = { who = FROM modifier = opinion_slave_attempted_escape }
		if = {
			limit = { NOT = { religion = nath_pagan } }
			piety = -40
		}	
		if = {
			limit = { religion = nath_pagan }
			piety = -80
			custom_tooltip = { text = nath_pagan_ahimsa_tooltip }
		}
		if = {
			limit = { 
				NOT = { trait = ruthless } 
				NOT = { trait = honorable }
				NOT = { personality_traits = 6 }
			}
			random = {
				chance = 40
				add_trait = ruthless
				hidden_tooltip = { character_event = { id = trait_notification.18 } }
			}
		}
		if = {
			limit = { 
				NOT = { trait = cruel } 
				NOT = { trait = kind } 
				NOT = { personality_traits = 6 }
			}
			random = {
				chance = 20
				add_trait = cruel
				hidden_tooltip = { character_event = { id = 38259 } }
			}
		}
		if = {
			limit = { trait = kind }
			if = {
				limit = { NOT = { trait = stressed } }
				add_trait = stressed
			}
			remove_trait = kind
		}
		if = {
			limit = { trait = just }
			if = {
				limit = { NOT = { trait = stressed } }
				add_trait = stressed
			}
			remove_trait = just
		}		
		piety = -100
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0
				trait = kind
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 0
				trait = just
			}
			modifier = {
				factor = 0.1
				trait = honorable
			}
			modifier = {
				factor = 0.5
				trait = patient
			}
		}
	}
}

# Slave escapes on dragonback
character_event = {
	id = slavery.606
	
	hide_window = yes
	capable_only = yes
	prisoner = no
	min_age = 10
	
	trigger = {
		trait = slave	
		trait = dragon_rider
		NOT = { trait = infirm }
		NOT = { has_epidemic = yes }
	}
	
	mean_time_to_happen = {
		years = 3
		modifier = {
			factor = 10
			is_ill = yes
		}
		modifier = {
			factor = 2
			is_weak_trigger = yes
		}
		modifier = {
			factor = 3
			is_dumb_trigger = yes
		}
		modifier = {
			factor = 4
			trait = imbecile
		}
		modifier = {
			factor = 0.75
			is_smart_trigger = yes
		}
		modifier = {
			factor = 0.75
			is_strong_trigger = yes
		}
		modifier = {
			factor = 0.6
			trait = genius
		}
		modifier = {
			factor = 0.75
			combat_rating = 6
		}
		modifier = {
			factor = 0.6
			combat_rating = 8
		}
	}
	
	immediate = {
		slave_owner = {
			limit = { has_opinion_modifier = { who = ROOT modifier = opinion_my_slave } }
			character_event = { id = slavery.607 days = 1 } 
		}	
	}
	
	option = { name = OK }
}

# Slave Escaped on Dragon!
character_event = {
	id = slavery.607
	desc = "EVTDESCSLAVERY607"
	picture = "GFX_dracarys"
	
	is_triggered_only = yes
	
	immediate = {
		FROM = {
			character_event = { id = slavery.0 days = 1 }
			character_event = { id = slavery.602 }
		}
	}
	
	option = {
		name = EVTOPTASLAVERY607
		custom_tooltip = { text = "LOSESLAVEFROM" }
		hidden_tooltip = {
			opinion = { who = FROM modifier = opinion_slave_escaped }			
		}
	}
}

# An escaped slave arrives at your court on dragon back
character_event = {
	id = slavery.608
	desc = "EVTDESCSLAVERY608"
	picture = "GFX_dracarys"

	is_triggered_only = yes
	
	option = {
		name = OK
		FROM = { FROM = { tooltip = { show_portrait = yes } } }
	}
}

##########################
# Slave Camps #
##########################

#Add one slave camp level - do not add slave camp levels in any other way!
character_event = {
	id = slavery.1000
	hide_window = yes
	is_triggered_only = yes
	
	#trigger = { demesne_size = 1 }
	
	immediate = {
		if = {
			limit = { is_patrician = no }
			capital_holding = {
				if = {
					limit = { holding_type = castle }
					if = {
						limit = {
							has_building = ca_asoiaf_slavepit_5
						}
						ROOT = { wealth = 150 } #compensation for excess slaves
					}
					if = {
						limit = {
							has_building = ca_asoiaf_slavepit_4
							NOT = { has_building = ca_asoiaf_slavepit_5 }
						}
						add_building = ca_asoiaf_slavepit_5
					}
					if = {
						limit = {
							has_building = ca_asoiaf_slavepit_3
							NOT = { has_building = ca_asoiaf_slavepit_4 }
						}
						add_building = ca_asoiaf_slavepit_4
					}
					if = {
						limit = {
							has_building = ca_asoiaf_slavepit_2
							NOT = { has_building = ca_asoiaf_slavepit_3 }
						}
						add_building = ca_asoiaf_slavepit_3
					}
					if = {
						limit = {
							has_building = ca_asoiaf_slavepit_1
							NOT = { has_building = ca_asoiaf_slavepit_2 }
						}
						add_building = ca_asoiaf_slavepit_2
					}
					if = {
						limit = {
							NOT = { has_building = ca_asoiaf_slavepit_1 }
						}
						ROOT = { add_trait = slave_owner }
						add_building = ca_asoiaf_slavepit_1
					}
				}	
				if = {
					limit = { holding_type = city }
					if = {
						limit = {
							has_building = ct_asoiaf_slavepit_5
						}
						ROOT = { wealth = 150 } #compensation for excess slaves
					}
					if = {
						limit = {
							has_building = ct_asoiaf_slavepit_4
							NOT = { has_building = ct_asoiaf_slavepit_5 }
						}
						add_building = ct_asoiaf_slavepit_5
					}
					if = {
						limit = {
							has_building = ct_asoiaf_slavepit_3
							NOT = { has_building = ct_asoiaf_slavepit_4 }
						}
						add_building = ct_asoiaf_slavepit_4
					}
					if = {
						limit = {
							has_building = ct_asoiaf_slavepit_2
							NOT = { has_building = ct_asoiaf_slavepit_3 }
						}
						add_building = ct_asoiaf_slavepit_3
					}
					if = {
						limit = {
							has_building = ct_asoiaf_slavepit_1
							NOT = { has_building = ct_asoiaf_slavepit_2 }
						}
						add_building = ct_asoiaf_slavepit_2
					}
					if = {
						limit = {
							NOT = { has_building = ct_asoiaf_slavepit_1 }
						}
						ROOT = { add_trait = slave_owner }
						add_building = ct_asoiaf_slavepit_1
					}
				}	
				if = {
					limit = { holding_type = temple }
					if = {
						limit = {
							has_building = tp_asoiaf_slavepit_5
						}
						ROOT = { wealth = 150 } #compensation for excess slaves
					}
					if = {
						limit = {
							has_building = tp_asoiaf_slavepit_4
							NOT = { has_building = tp_asoiaf_slavepit_5 }
						}
						add_building = tp_asoiaf_slavepit_5
					}
					if = {
						limit = {
							has_building = tp_asoiaf_slavepit_3
							NOT = { has_building = tp_asoiaf_slavepit_4 }
						}
						add_building = tp_asoiaf_slavepit_4
					}
					if = {
						limit = {
							has_building = tp_asoiaf_slavepit_2
							NOT = { has_building = tp_asoiaf_slavepit_3 }
						}
						add_building = tp_asoiaf_slavepit_3
					}
					if = {
						limit = {
							has_building = tp_asoiaf_slavepit_1
							NOT = { has_building = tp_asoiaf_slavepit_2 }
						}
						add_building = tp_asoiaf_slavepit_2
					}
					if = {
						limit = {
							NOT = { has_building = tp_asoiaf_slavepit_1 }
						}
						ROOT = { add_trait = slave_owner }
						add_building = tp_asoiaf_slavepit_1
					}
				}
				if = {
					limit = { holding_type = nomad }
					if = {
						limit = {
							has_building = no_asoiaf_slavepit_5
						}
						ROOT = { wealth = 150 } #compensation for excess slaves
					}
					if = {
						limit = {
							has_building = no_asoiaf_slavepit_4
							NOT = { has_building = no_asoiaf_slavepit_5 }
						}
						add_building = no_asoiaf_slavepit_5
					}
					if = {
						limit = {
							has_building = no_asoiaf_slavepit_3
							NOT = { has_building = no_asoiaf_slavepit_4 }
						}
						add_building = no_asoiaf_slavepit_4
					}
					if = {
						limit = {
							has_building = no_asoiaf_slavepit_2
							NOT = { has_building = no_asoiaf_slavepit_3 }
						}
						add_building = no_asoiaf_slavepit_3
					}
					if = {
						limit = {
							has_building = no_asoiaf_slavepit_1
							NOT = { has_building = no_asoiaf_slavepit_2 }
						}
						add_building = no_asoiaf_slavepit_2
					}
					if = {
						limit = {
							NOT = { has_building = no_asoiaf_slavepit_1 }
						}
						ROOT = { add_trait = slave_owner }
						add_building = no_asoiaf_slavepit_1
					}
				}				
			}	
			capital_scope = { province_event = { id = slavery.1021 days = 1 } } #Calculate slave labour modifier
		}	
		if = {
			limit = { is_patrician = yes }
			family_palace = {
				if = {
					limit = {
						has_building = fp_asoiaf_slavepit_5
					}
					ROOT = { wealth = 150 } #compensation for excess slaves
				}
				if = {
					limit = {				
						has_building = fp_asoiaf_slavepit_4
						NOT = { has_building = fp_asoiaf_slavepit_5 }
					}
					add_building = fp_asoiaf_slavepit_5
				}
				if = {
					limit = {				
						has_building = fp_asoiaf_slavepit_3
						NOT = { has_building = fp_asoiaf_slavepit_4 }
					}
					add_building = fp_asoiaf_slavepit_4
				}	
				if = {
					limit = {				
						has_building = fp_asoiaf_slavepit_2
						NOT = { has_building = fp_asoiaf_slavepit_3 }
					}
					add_building = fp_asoiaf_slavepit_3
				}
				if = {
					limit = {				
						has_building = fp_asoiaf_slavepit_1
						NOT = { has_building = fp_asoiaf_slavepit_2 }
					}
					add_building = fp_asoiaf_slavepit_2
				}
				if = {
					limit = {
						NOT = { has_building = fp_asoiaf_slavepit_1 }
					}
					ROOT = { add_trait = slave_owner }
					add_building = fp_asoiaf_slavepit_1	
				}
			}	
			if = {
				limit = { is_merchant_republic = yes }
				capital_scope = { province_event = { id = slavery.1021 days = 1 } } #Calculate slave labour modifier
			}
			if = {
				limit = { is_merchant_republic = no }
				liege = { capital_scope = { province_event = { id = slavery.1021 days = 1 } } }#Calculate slave labour modifier
			}
		}		
	}
	
	option = { name = OK }
}

#Remove one slave camp level - do not remove slave camp levels in any other way! (unless you are me)
character_event = {
	id = slavery.1001
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { is_patrician = no }
			capital_holding = {
				if = {
					limit = { holding_type = castle }
					if = {
						limit = {					
							has_building = ca_asoiaf_slavepit_1
							NOT = { has_building = ca_asoiaf_slavepit_2 }
						}
						remove_building = ca_asoiaf_slavepit_1
					}
					if = {
						limit = {					
							has_building = ca_asoiaf_slavepit_2
							NOT = { has_building = ca_asoiaf_slavepit_3 }
						}
						remove_building = ca_asoiaf_slavepit_2
					}
					if = {
						limit = {				
							has_building = ca_asoiaf_slavepit_3
							NOT = { has_building = ca_asoiaf_slavepit_4 }
						}
						remove_building = ca_asoiaf_slavepit_3
					}
					if = {
						limit = {					
							has_building = ca_asoiaf_slavepit_4
							NOT = { has_building = ca_asoiaf_slavepit_5 }
						}
						remove_building = ca_asoiaf_slavepit_4
					}
					if = {
						limit = { has_building = ca_asoiaf_slavepit_5 }
						remove_building = ca_asoiaf_slavepit_5
					}
				}
				if = {
					limit = { holding_type = city }				
					if = {
						limit = {					
							has_building = ct_asoiaf_slavepit_1
							NOT = { has_building = ct_asoiaf_slavepit_2 }
						}
						remove_building = ct_asoiaf_slavepit_1
					}
					if = {
						limit = {					
							has_building = ct_asoiaf_slavepit_2
							NOT = { has_building = ct_asoiaf_slavepit_3 }
						}
						remove_building = ct_asoiaf_slavepit_2
					}
					if = {
						limit = {					
							has_building = ct_asoiaf_slavepit_3
							NOT = { has_building = ct_asoiaf_slavepit_4 }
						}
						remove_building = ct_asoiaf_slavepit_3
					}
					if = {
						limit = {						
							has_building = ct_asoiaf_slavepit_4
							NOT = { has_building = ct_asoiaf_slavepit_5 }
						}
						remove_building = ct_asoiaf_slavepit_4
					}
					if = {
						limit = { has_building = ct_asoiaf_slavepit_5 }
						remove_building = ct_asoiaf_slavepit_5
					}
				}
				if = {
					limit = { holding_type = temple }
					if = {
						limit = {						
							has_building = tp_asoiaf_slavepit_1
							NOT = { has_building = tp_asoiaf_slavepit_2 }
						}
						remove_building = tp_asoiaf_slavepit_1
					}
					if = {
						limit = {						
							has_building = tp_asoiaf_slavepit_2
							NOT = { has_building = tp_asoiaf_slavepit_3 }
						}
						remove_building = tp_asoiaf_slavepit_2
					}
					if = {
						limit = {					
							has_building = tp_asoiaf_slavepit_3
							NOT = { has_building = tp_asoiaf_slavepit_4 }
						}
						remove_building = tp_asoiaf_slavepit_3
					}
					if = {
						limit = {					
							has_building = tp_asoiaf_slavepit_4
							NOT = { has_building = tp_asoiaf_slavepit_5 }
						}
						remove_building = tp_asoiaf_slavepit_4
					}
					if = {
						limit = { has_building = tp_asoiaf_slavepit_5 }
						remove_building = tp_asoiaf_slavepit_5
					}
				}	
				if = {
					limit = { holding_type = nomad }
					if = {
						limit = {					
							has_building = no_asoiaf_slavepit_1
							NOT = { has_building = no_asoiaf_slavepit_2 }
						}
						remove_building = no_asoiaf_slavepit_1
					}
					if = {
						limit = {					
							has_building = no_asoiaf_slavepit_2
							NOT = { has_building = no_asoiaf_slavepit_3 }
						}
						remove_building = no_asoiaf_slavepit_2
					}
					if = {
						limit = {				
							has_building = no_asoiaf_slavepit_3
							NOT = { has_building = no_asoiaf_slavepit_4 }
						}
						remove_building = no_asoiaf_slavepit_3
					}
					if = {
						limit = {					
							has_building = no_asoiaf_slavepit_4
							NOT = { has_building = no_asoiaf_slavepit_5 }
						}
						remove_building = no_asoiaf_slavepit_4
					}
					if = {
						limit = { has_building = no_asoiaf_slavepit_5 }
						remove_building = no_asoiaf_slavepit_5
					}
				}
			}	
			capital_scope = { province_event = { id = slavery.1021 days = 1 } } #Calculate slave labour modifier
		}	
		if = {
			limit = { is_patrician = yes }
			family_palace = {
				if = {
					limit = {						
						has_building = fp_asoiaf_slavepit_1
						NOT = { has_building = fp_asoiaf_slavepit_2 }
					}
					remove_building = fp_asoiaf_slavepit_1
				}
				if = {
					limit = {					
						has_building = fp_asoiaf_slavepit_2
						NOT = { has_building = fp_asoiaf_slavepit_3 }
					}
					remove_building = fp_asoiaf_slavepit_2
				}
				if = {
					limit = {						
						has_building = fp_asoiaf_slavepit_3
						NOT = { has_building = fp_asoiaf_slavepit_4 }
					}
					remove_building = fp_asoiaf_slavepit_3
				}
				if = {
					limit = {					
						has_building = fp_asoiaf_slavepit_4
						NOT = { has_building = fp_asoiaf_slavepit_5 }
					}
					remove_building = fp_asoiaf_slavepit_4
				}
				if = {
					limit = { has_building = fp_asoiaf_slavepit_5 }
					remove_building = fp_asoiaf_slavepit_5
				}			
			}	
			if = {
				limit = { is_merchant_republic = yes }
				capital_scope = { province_event = { id = slavery.1021 days = 1 } } #Calculate slave labour modifier
			}
			if = {
				limit = { is_merchant_republic = no }
				liege = { capital_scope = { province_event = { id = slavery.1021 days = 1 } } }#Calculate slave labour modifier
			}
		}		
	}
	
	option = { name = OK }
}

# Slave pit in a non-capital holding!
character_event = {
	id = slavery.1010
	desc = "EVTDESCSLAVERY1010"
	picture = GFX_evt_slavery
	
	only_rulers = yes
	is_triggered_only = yes
	
	trigger = {
		any_demesne_title = {
			tier = BARON
			NOT = { holding_type = family_palace }
			OR = {
				has_building = ca_asoiaf_slavepit_1
				has_building = ct_asoiaf_slavepit_1
				has_building = tp_asoiaf_slavepit_1
				has_building = no_asoiaf_slavepit_1
			}
			ROOT = {
				OR = {
					is_patrician = yes
					capital_holding = { NOT = { title = PREVPREV } }
				}
			}		
		}
	}
	
	option = { #slavery is illegal, free all slaves
		name = EVTOPTAslavery.1010
		trigger = {
			crownlaw_title = { 
				OR = {
					has_law = slavery_0
					has_law = slavery_1
				}	
			} 
		}
		any_demesne_title = {
			limit = {
				tier = BARON
				OR = {
					has_building = ca_asoiaf_slavepit_1
					has_building = ct_asoiaf_slavepit_1
					has_building = tp_asoiaf_slavepit_1
					has_building = fp_asoiaf_slavepit_1
					has_building = no_asoiaf_slavepit_1
				}
			}
			remove_building = ca_asoiaf_slavepit_1
			remove_building = ct_asoiaf_slavepit_1
			remove_building = tp_asoiaf_slavepit_1
			remove_building = fp_asoiaf_slavepit_1
			remove_building = no_asoiaf_slavepit_1
		}
	}
	
	option = {
		name = OK
		trigger = {
			OR = {
				crownlaw_title = { 
					OR = {
						has_law = slavery_2
						has_law = slavery_3
					}
				}
				NOT = { crownlaw_title = { always = yes } }
			}
		}
		any_demesne_title = {
			limit = {
				tier = BARON
				NOT = { holding_type = family_palace }
				ROOT = {
					OR = {
						is_patrician = yes
						capital_holding = { NOT = { title = PREVPREV } }
					}
				}
			}
			if = {
				limit = { holding_type = castle }
				if = {
					limit = { has_building = ca_asoiaf_slavepit_5 }
					remove_building = ca_asoiaf_slavepit_5
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = ca_asoiaf_slavepit_4 }
					remove_building = ca_asoiaf_slavepit_4
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = ca_asoiaf_slavepit_3 }
					remove_building = ca_asoiaf_slavepit_3
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = ca_asoiaf_slavepit_2 }
					remove_building = ca_asoiaf_slavepit_2
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = ca_asoiaf_slavepit_1 }
					remove_building = ca_asoiaf_slavepit_1
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
			}	
			if = {
				limit = { holding_type = city }
				if = {
					limit = { has_building = ct_asoiaf_slavepit_5 }
					remove_building = ct_asoiaf_slavepit_5
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = ct_asoiaf_slavepit_4 }
					remove_building = ct_asoiaf_slavepit_4
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = ct_asoiaf_slavepit_3 }
					remove_building = ct_asoiaf_slavepit_3
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = ct_asoiaf_slavepit_2 }
					remove_building = ct_asoiaf_slavepit_2
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = ct_asoiaf_slavepit_1 }
					remove_building = ct_asoiaf_slavepit_1
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
			}
			if = {
				limit = { holding_type = temple }
				if = {
					limit = { has_building = tp_asoiaf_slavepit_5 }
					remove_building = tp_asoiaf_slavepit_5
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = tp_asoiaf_slavepit_4 }
					remove_building = tp_asoiaf_slavepit_4
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = tp_asoiaf_slavepit_3 }
					remove_building = tp_asoiaf_slavepit_3
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = tp_asoiaf_slavepit_2 }
					remove_building = tp_asoiaf_slavepit_2
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = tp_asoiaf_slavepit_1 }
					remove_building = tp_asoiaf_slavepit_1
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
			}
			if = {
				limit = { holding_type = nomad }
				if = {
					limit = { has_building = no_asoiaf_slavepit_5 }
					remove_building = no_asoiaf_slavepit_5
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = no_asoiaf_slavepit_4 }
					remove_building = no_asoiaf_slavepit_4
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = no_asoiaf_slavepit_3 }
					remove_building = no_asoiaf_slavepit_3
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = no_asoiaf_slavepit_2 }
					remove_building = no_asoiaf_slavepit_2
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
				if = {
					limit = { has_building = no_asoiaf_slavepit_1 }
					remove_building = no_asoiaf_slavepit_1
					ROOT = { character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } }
				}	
			}
		}
	}
}

# No Provincial Slave Labor
province_event = {
	id = slavery.1020
	
	hide_window = yes
	
	trigger = {
		OR = {
			has_province_modifier = slave_modifier_1
			has_province_modifier = slave_modifier_2
			has_province_modifier = slave_modifier_3
			has_province_modifier = slave_modifier_4
			has_province_modifier = slave_modifier_5
		}
		NOT = {
			any_province_lord = {
				capital_scope = { province_id = ROOT } # Slavepits are always in the capital
				OR = {
					# Local rulers				
					capital_holding = { 
						OR = {
							has_building = ca_asoiaf_slavepit_1 
							has_building = ct_asoiaf_slavepit_1 
							has_building = tp_asoiaf_slavepit_1 
							has_building = no_asoiaf_slavepit_1
						}	
					}
					# Patricians
					AND = {
						is_merchant_republic = yes
						family_palace = { has_building = fp_asoiaf_slavepit_1 }
					}
					AND = {
						is_merchant_republic = yes
						any_vassal = { family_palace = { has_building = fp_asoiaf_slavepit_1 } }
					}
				}
			}
		}
	}
	
	immediate = {
		remove_province_modifier = slave_modifier_1
		remove_province_modifier = slave_modifier_2
		remove_province_modifier = slave_modifier_3
		remove_province_modifier = slave_modifier_4
		remove_province_modifier = slave_modifier_5
		owner = { #check owner's capital
			capital_scope = {
				if = {
					limit = { NOT = { province_id = ROOT } }
					province_event = { id = slavery.1021 }
				}
			}
		}	
	}
	
	option = { name = OK }
}
#Provincial Slave Labor Modifier calculation
province_event = {
	id = slavery.1021
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		remove_province_modifier = slave_modifier_1
		remove_province_modifier = slave_modifier_2
		remove_province_modifier = slave_modifier_3
		remove_province_modifier = slave_modifier_4
		remove_province_modifier = slave_modifier_5
		if = {
			limit = {
				any_province_lord = {
					capital_scope = { province_id = ROOT } # Slavepits are always in the capital
					OR = {
						# Local rulers				
						capital_holding = { 
							OR = {
								has_building = ca_asoiaf_slavepit_5
								has_building = ct_asoiaf_slavepit_5
								has_building = tp_asoiaf_slavepit_5 
								has_building = no_asoiaf_slavepit_5
							}	
						}
						# Patricians
						AND = {
							is_merchant_republic = yes
							family_palace = { has_building = fp_asoiaf_slavepit_5 }
						}
						AND = {
							is_merchant_republic = yes
							any_vassal = { family_palace = { has_building = fp_asoiaf_slavepit_5 } }
						}
					}
				}
			}
			add_province_modifier = {
				name = slave_modifier_5
				duration = -1
			}
			break = yes
		}
		if = {
			limit = {
				any_province_lord = {
					capital_scope = { province_id = ROOT } # Slavepits are always in the capital
					OR = {
						# Local rulers				
						capital_holding = { 
							OR = {
								has_building = ca_asoiaf_slavepit_4
								has_building = ct_asoiaf_slavepit_4
								has_building = tp_asoiaf_slavepit_4
								has_building = no_asoiaf_slavepit_4
							}	
						}
						# Patricians
						AND = {
							is_merchant_republic = yes
							family_palace = { has_building = fp_asoiaf_slavepit_4 }
						}
						AND = {
							is_merchant_republic = yes
							any_vassal = { family_palace = { has_building = fp_asoiaf_slavepit_4 } }
						}
					}
				}
			}
			add_province_modifier = {
				name = slave_modifier_4
				duration = -1
			}
			break = yes
		}
		if = {
			limit = {
				any_province_lord = {
					capital_scope = { province_id = ROOT } # Slavepits are always in the capital
					OR = {
						# Local rulers				
						capital_holding = { 
							OR = {
								has_building = ca_asoiaf_slavepit_3
								has_building = ct_asoiaf_slavepit_3
								has_building = tp_asoiaf_slavepit_3
								has_building = no_asoiaf_slavepit_3
							}	
						}
						# Patricians
						AND = {
							is_merchant_republic = yes
							family_palace = { has_building = fp_asoiaf_slavepit_3 }
						}
						AND = {
							is_merchant_republic = yes
							any_vassal = { family_palace = { has_building = fp_asoiaf_slavepit_3 } }
						}
					}
				}
			}
			add_province_modifier = {
				name = slave_modifier_3
				duration = -1
			}
			break = yes
		}
		if = {
			limit = {
				any_province_lord = {
					capital_scope = { province_id = ROOT } # Slavepits are always in the capital
					OR = {
						# Local rulers				
						capital_holding = { 
							OR = {
								has_building = ca_asoiaf_slavepit_2
								has_building = ct_asoiaf_slavepit_2
								has_building = tp_asoiaf_slavepit_2
								has_building = no_asoiaf_slavepit_2
							}	
						}
						# Patricians
						AND = {
							is_merchant_republic = yes
							family_palace = { has_building = fp_asoiaf_slavepit_2 }
						}
						AND = {
							is_merchant_republic = yes
							any_vassal = { family_palace = { has_building = fp_asoiaf_slavepit_2 } }
						}
					}
				}
			}
			add_province_modifier = {
				name = slave_modifier_2
				duration = -1
			}
			break = yes
		}
		if = {
			limit = {
				any_province_lord = {
					capital_scope = { province_id = ROOT } # Slavepits are always in the capital
					OR = {
						# Local rulers				
						capital_holding = { 
							OR = {
								has_building = ca_asoiaf_slavepit_1
								has_building = ct_asoiaf_slavepit_1
								has_building = tp_asoiaf_slavepit_1
								has_building = no_asoiaf_slavepit_1
							}	
						}
						# Patricians
						AND = {
							is_merchant_republic = yes
							family_palace = { has_building = fp_asoiaf_slavepit_1 }
						}
						AND = {
							is_merchant_republic = yes
							any_vassal = { family_palace = { has_building = fp_asoiaf_slavepit_1 } }
						}
					}
				}
			}
			add_province_modifier = {
				name = slave_modifier_1
				duration = -1
			}
			break = yes
		}
		
	}
	
	option = { name = OK }
}
######


# A slave distinguishes themselves
character_event = {
	id = slavery.1100
	picture = GFX_evt_slavery
	
	only_rulers = yes
	
	desc = {
		text = "EVTDESCSLAVERY1100"
		trigger = { NOT = { has_character_flag = bed_slave_created } }
	}	
	desc = {
		text = "EVTDESCSLAVERY1100B"
		trigger = { has_character_flag = bed_slave_created }
	}
	
	trigger = {
		OR = {
			capital_holding = {
				OR = {
					has_building = ca_asoiaf_slavepit_1
					has_building = ct_asoiaf_slavepit_1
					has_building = tp_asoiaf_slavepit_1	
					has_building = no_asoiaf_slavepit_1					
				}
			}
			family_palace = { has_building = fp_asoiaf_slavepit_1 }
		}	
		OR = {
			NOT = { has_character_flag = slave_created_from_camp }
			had_character_flag = { flag = slave_created_from_camp days = 365 } #only one per year
		}
	}
	
	mean_time_to_happen = {
		months = 240
		modifier = {
			factor = 0.8
			OR = {
				capital_holding = {
					OR = {
						has_building = ca_asoiaf_slavepit_2
						has_building = ct_asoiaf_slavepit_2
						has_building = tp_asoiaf_slavepit_2		
						has_building = no_asoiaf_slavepit_2						
					}
				}
				family_palace = { has_building = fp_asoiaf_slavepit_2 }
			}	
		}
		modifier = {
			factor = 0.8
			OR = {
				capital_holding = {
					OR = {
						has_building = ca_asoiaf_slavepit_3
						has_building = ct_asoiaf_slavepit_3
						has_building = tp_asoiaf_slavepit_3	
						has_building = no_asoiaf_slavepit_3
					}
				}
				family_palace = { has_building = fp_asoiaf_slavepit_3 }
			}	
		}
		modifier = {
			factor = 0.8
			OR = {
				capital_holding = {
					OR = {
						has_building = ca_asoiaf_slavepit_4
						has_building = ct_asoiaf_slavepit_4
						has_building = tp_asoiaf_slavepit_4	
						has_building = no_asoiaf_slavepit_4
					}
				}
				family_palace = { has_building = fp_asoiaf_slavepit_4 }
			}	
		}
		modifier = {
			factor = 0.8
			OR = {
				capital_holding = {
					OR = {
						has_building = ca_asoiaf_slavepit_5
						has_building = ct_asoiaf_slavepit_5
						has_building = tp_asoiaf_slavepit_5	
						has_building = no_asoiaf_slavepit_5
					}
				}
				family_palace = { has_building = fp_asoiaf_slavepit_5 }
			}	
		}
		modifier = {
			factor = 0.25
			trait = slave_trader
		}
		# The more diverse the current supply of slaves, the less likely this event will fire
		modifier = {
			factor = 0.1
			NOT = {
				any_courtier = {
					trait = slave
					count = 2
				}
			}	
		}
		modifier = {
			factor = 1.5
			any_courtier = {
				trait = slave
				count = 5
			}
		}
		modifier = {
			factor = 1.5
			any_courtier = {
				trait = slave
				count = 8
			}
		}
		modifier = {
			factor = 1.5
			any_courtier = {
				trait = slave
				count = 10
			}
		}
		modifier = {
			factor = 1.5
			any_courtier = {
				trait = slave
				count = 15
			}
		}		
	}
	
	immediate = {
		clr_character_flag = slave_created_from_camp
		hidden_tooltip = {
			# Chance of bed slave from pleasure houses
			if = {
				limit = {
					is_nomadic = no
				}
				random = {
					chance = 5
					modifier = {
						factor = 800
						OR = {
							culture = lysene
							capital_scope = { region = world_lys }
						}
					}
					modifier = {
						factor = 5
						NOT = {
							OR = {
								culture = lysene
								capital_scope = { region = world_lys }
							}
						}	
						OR = {
							culture = yunkaii
							capital_scope = { region = world_yunkai }
						}
					}
					set_character_flag = bed_slave_created
					set_character_flag = slave_created_from_camp
					capital_scope = {
						ROOT = {
							random_list = {
								25 = {
									create_random_intriguer = {
										random_traits = yes
										culture = random
										religion = ROOT
										dynasty = none
										trait = fair
										age = 18
										historical = yes
									}
								}
								10 = {
									create_random_intriguer = {
										female = yes
										random_traits = yes
										culture = PREV
										religion = ROOT
										dynasty = none
										trait = fair
										age = 18
										historical = yes
									}
								}
							}	
							new_character = {			
								set_character_flag = new_slave
								set_character_flag = bed_slave
								if = { #Invalid Kingslander
									limit = {
										226 = { NOT = { has_province_flag = kings_landing_established } }
										culture = crownlander
									}
									culture = riverlander
								}
							}
						}	
					}	
				}
			}
			if = {
				limit = { NOT = { has_character_flag = slave_created_from_camp } }
				# If the character already owns a slave, match that slave's culture and religion
				random_courtier = {
					limit = { 
						trait = slave 
						NOT = { has_character_flag = unsullied }
					}
					ROOT = {
						set_character_flag = slave_created_from_camp
						random_list = {
							10 = {
								create_random_diplomat = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									trait = fair
									historical = yes
								}
							}
							10 = {
								create_random_diplomat = {
									female = yes
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									trait = fair
									historical = yes
								}
							}
							10 = {
								create_random_soldier = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									trait = trained_warrior
									historical = yes
								}
							}
							5 = {
								create_random_soldier = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									trait = skilled_warrior
									historical = yes
								}
							}
							5 = {
								create_random_soldier = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									trait = master_warrior
									historical = yes
								}
							}
							10 = {
								create_random_steward = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
							10 = {
								create_random_steward = {
									female = yes
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
							10 = {
								create_random_intriguer = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
							10 = {
								create_random_intriguer = {
									female = yes
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
							10 = {
								create_random_priest = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
							10 = {
								create_random_priest = {
									female = yes
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
						}
						new_character = {
							set_character_flag = new_slave
						}
					}
				}
			}	
			# If ROOT owns no slaves, but some exist, copy their culture and religion
			if = {
				limit = { NOT = { has_character_flag = slave_created_from_camp } }
				slave = {
					limit = { 
						is_alive = yes 
						NOT = { has_character_flag = unsullied }
					}
					ROOT = {
						set_character_flag = slave_created_from_camp
						random_list = {
							10 = {
								create_random_diplomat = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									trait = fair
									historical = yes
								}
							}
							10 = {
								create_random_diplomat = {
									female = yes
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									trait = fair
									historical = yes
								}
							}
							10 = {
								create_random_soldier = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									trait = trained_warrior
									historical = yes
								}
							}
							5 = {
								create_random_soldier = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									trait = skilled_warrior
									historical = yes
								}
							}
							5 = {
								create_random_soldier = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									trait = master_warrior
									historical = yes
								}
							}
							10 = {
								create_random_steward = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
							10 = {
								create_random_steward = {
									female = yes
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
							10 = {
								create_random_intriguer = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
							10 = {
								create_random_intriguer = {
									female = yes
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
							10 = {
								create_random_priest = {
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
							10 = {
								create_random_priest = {
									female = yes
									random_traits = yes
									culture = PREV
									religion = PREV
									dynasty = none
									historical = yes
								}
							}
						}
						new_character = {
							set_character_flag = new_slave
						}
					}
				}
			}
			# If there are no slaves anywhere, just use a random culture and religion
			if = {
				limit = { NOT = { has_character_flag = slave_created_from_camp } }
				random_list = {
					10 = {
						create_random_diplomat = {
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							trait = fair
							historical = yes
						}
					}
					10 = {
						create_random_diplomat = {
							female = yes
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							trait = fair
							historical = yes
						}
					}
					10 = {
						create_random_soldier = {
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							trait = trained_warrior
							historical = yes
						}
					}
					5 = {
						create_random_soldier = {
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							trait = skilled_warrior
							historical = yes
						}
					}
					5 = {
						create_random_soldier = {
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							trait = master_warrior
							historical = yes
						}
					}
					10 = {
						create_random_steward = {
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							historical = yes
						}
					}
					10 = {
						create_random_steward = {
							female = yes
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							historical = yes
						}
					}
					10 = {
						create_random_intriguer = {
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							historical = yes
						}
					}
					10 = {
						create_random_intriguer = {
							female = yes
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							historical = yes
						}
					}
					10 = {
						create_random_priest = {
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							historical = yes
						}
					}
					10 = {
						create_random_priest = {
							female = yes
							random_traits = yes
							culture = random
							religion = ROOT
							dynasty = none
							historical = yes
						}
					}
				}
				new_character = {			
					set_character_flag = new_slave
					if = { #Invalid Kingslander
						limit = {
							226 = { NOT = { has_province_flag = kings_landing_established } }
							culture = crownlander
						}
						culture = riverlander
					}
				}
			}
			clr_character_flag = slave_created_from_camp
			save_event_target_as = enslaver
			random_courtier = {
				limit=  { has_character_flag = new_slave }
				enslave_effect = yes
				if = {
					limit = {
						OR = {
							trait = indulgent_wastrel
							trait = thrifty_clerk
							trait = fortune_builder
							trait = midas_touched
						}
					}
					change_stewardship = 4
				}
				if = {
					limit = {
						NOT = { has_character_flag = bed_slave }
						OR = {
							trait = amateurish_plotter
							trait = flamboyant_schemer
							trait = intricate_webweaver
							trait = elusive_shadow
						}
					}
					change_intrigue = 4
				}
				if = {
					limit = {
						OR = {
							trait = naive_appeaser
							trait = underhanded_rogue
							trait = charismatic_negotiator
							trait = grey_eminence
						}
					}
					change_diplomacy = 4
				}
				if = {
					limit = {
						OR = {
							trait = detached_priest 
							trait = martial_cleric
							trait = scholarly_theologian
							trait = mastermind_theologian
						}
					}
					change_learning = 4
				}
				if = {
					limit = {
						has_character_flag = bed_slave
					}
					clr_character_flag = bed_slave
					remove_trait = chaste
					remove_trait = celibate
				}
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = infirm
				remove_trait = incapable
				remove_trait = leper
				remove_trait = possessed
				remove_trait = ill
				remove_trait = pneumonic
				remove_trait = maimed
				hidden_tooltip = { character_event = { id = slavery.259	days = 1 } } #slave management	
			}
		}	
	}
	
	option = {
		# slave_owner = {
			# limit = { ai = no }
			# character_event = { id = slavery.1101 }
		# }
		name = "EVTOPTASLAVERY1100"
		random_courtier = {
			limit = { has_character_flag = new_slave }
			move_character = ROOT
			clr_character_flag = new_slave
		}
		clr_character_flag = bed_slave_created
	}
	
	option = {
		name = "EVTOPTBSLAVERY1100" #Sell them
		ai_chance = {
			factor = 0
		}
		wealth = 5
		random_courtier = {
			limit = { has_character_flag = new_slave }
			custom_tooltip = {
				text = TOOLTIPslavery.154
				hidden_tooltip = {
					remove_trait = former_slave
					clear_wealth = THIS
					death = { death_reason = death_sold_slave }
				}
			}
		}
		clr_character_flag = bed_slave_created		
	}
}

# character_event = {
	# id = slavery.1101
	# desc = "slavery.1100 just fired for [From.GetBestName]"
	# is_triggered_only = yes
	
	# option = {}
# }
# Buying slave camps
character_event = {
	id = slavery.1200
	desc = "EVTDESCSLAVERY1200"
	picture = GFX_evt_slave_market
	
	is_triggered_only = yes
	
	trigger = {
		demesne_size = 1
		has_full_slavery_trigger = yes	
		NOT = { trait = liberator }
		is_nomadic = no
		NOT = {
			capital_holding = {
				OR = {
					has_building = ca_asoiaf_slavepit_5
					has_building = ct_asoiaf_slavepit_5
					has_building = tp_asoiaf_slavepit_5
				}
			}
			family_palace = { has_building = fp_asoiaf_slavepit_5 }
		}		
		OR = {
			wealth = 400
			AND = { #AI may take loan to buy slaves if they can afford it
				ai = yes
				NOT = { has_character_flag = loan_taken }
				NOT = { has_character_modifier = loan_timer }
				NOT = { has_character_flag = offended_moneylenders }
				OR = {
					AND = {
						monthly_income = 12
						wealth = 100
					}
					AND = {
						monthly_income = 6
						wealth = 200
					}
					AND = {
						monthly_income = 3
						wealth = 300
					}
				}
			}
		}
	}
	
	immediate = {
		if = {
			limit = {
				location = {
					trade_post_owner = {
						NOT = { character = ROOT }
						is_alive = yes
						trait = slave_trader
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_slavepit_1
									has_building = ct_asoiaf_slavepit_1
									has_building = tp_asoiaf_slavepit_1
								}
							}
							family_palace = { has_building = fp_asoiaf_slavepit_1 }
						}
						OR = {
							NOT = { has_character_flag = flag_slave_action }
							had_character_flag = { flag = flag_slave_action days = 30 }
						}
					}
				}
			}
			location = { trade_post_owner = { save_event_target_as = slave_trader } }
			break = yes
		}
		slave_trader = {
			limit = {
				is_ruler = yes				
				is_alive = yes
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_1
							has_building = ct_asoiaf_slavepit_1
							has_building = tp_asoiaf_slavepit_1
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_1 }
				}
				OR = {
					NOT = { has_character_flag = flag_slave_action }
					had_character_flag = { flag = flag_slave_action days = 30 }
				}
				NOT = { character = ROOT }
			}
			save_event_target_as = slave_trader
		}
	}
	
	option = {
		name = "EVTOPTASLAVERY1200"
		event_target:slave_trader = {
			set_character_flag = flag_slave_action
			character_event = { id = slavery.1201 tooltip = "EVTTOOLTIPSLAVERY1201" }
		}
		hidden_tooltip = { clear_event_target = slave_trader }
	}
	option = {
		name = "EVTOPTBSLAVERY200"
		ai_chance = { factor = 0 }
		clr_character_flag = flag_slave_action
		clr_character_flag = flag_buying_bulk_slaves
		hidden_tooltip = { clear_event_target = slave_trader }
	}
}
character_event = { # Camp owner receives offers
	id = slavery.1201
	desc = "EVTDESCSLAVERY1201"
	picture = GFX_evt_slave_market
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY1201"
		# Sell them!
		FROM = { character_event = { id = slavery.1202 tooltip = "EVTTOOLTIPSLAVERY1202" } }
		character_event = { id = slavery.1001 tooltip = "EVTTOOLTIPSLAVERY1001" }
		wealth = 400
		clr_character_flag = flag_slave_action
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 10
				NOT = { wealth = 0 }
			}
			modifier = {
				factor = 0.75
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_5
							has_building = ct_asoiaf_slavepit_5
							has_building = tp_asoiaf_slavepit_5
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_5 }
				}
			}
			modifier = {
				factor = 0.75
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_4
							has_building = ct_asoiaf_slavepit_4
							has_building = tp_asoiaf_slavepit_4
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_4 }
				}
			}
			modifier = {
				factor = 0.75
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_3
							has_building = ct_asoiaf_slavepit_3
							has_building = tp_asoiaf_slavepit_3
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_3 }
				}
			}
			modifier = {
				factor = 0.75
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_2
							has_building = ct_asoiaf_slavepit_2
							has_building = tp_asoiaf_slavepit_2
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_2 }
				}
			}
			modifier = {
				factor = 0
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_2
							has_building = ct_asoiaf_slavepit_2
							has_building = tp_asoiaf_slavepit_2
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_2 }
				}
				NOT = { trait = lunatic }
				NOT = { trait = possessed }
				NOT = { is_dumb_trigger = yes }
				NOT = { trait = imbecile }
				NOT = { trait = wroth }
				NOT = { trait = greedy }
			}
		}
	}
	option = {
		# Don't sell them!
		name = "EVTOPTBSLAVERY1201"
		clr_character_flag = flag_slave_action
		FROM = { character_event = { id = slavery.1203 tooltip = "EVTTOOLTIPSLAVERY1203" } }
		ai_chance = { factor = 10 }
	}
}

character_event = { #offer accepted
	id = slavery.1202
	desc = "EVTDESCSLAVERY1202"
	picture = GFX_evt_slave_trade
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY1202"
		if = { #AI may take loan to buy slaves if they can afford it
			limit = {
				ai = yes
				NOT = { wealth = 350 }
				NOT = { has_character_flag = loan_taken }
				NOT = { has_character_modifier = loan_timer }
				NOT = { has_character_flag = offended_moneylenders }							
			}
			if = {
				limit = {
					monthly_income = 3
					wealth = 300
				}
				wealth = 100
				set_character_flag = loan_100
				set_variable = { which = "loan_amount" value = 100 }
				add_character_modifier = {
					name = "loan_timer"
					duration = 1825
				}
				set_character_flag = loan_taken
			}	
			if = {
				limit = {
					monthly_income = 6
					wealth = 200
					NOT = { has_character_flag = loan_taken }
				}
				wealth = 200
				set_character_flag = loan_200
				set_variable = { which = "loan_amount" value = 200 }
				add_character_modifier = {
					name = "loan_timer"
					duration = 1825
				}
				set_character_flag = loan_taken
			}
			if = {
				limit = {
					monthly_income = 12
					wealth = 100
					NOT = { has_character_flag = loan_taken }
				}
				wealth = 400
				set_character_flag = loan_400
				set_variable = { which = "loan_amount" value = 400 }
				add_character_modifier = {
					name = "loan_timer"
					duration = 1825
				}
				set_character_flag = loan_taken
			}
		}
		wealth = -400
		character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" }
		clr_character_flag = flag_slave_action
	}
}

character_event = { #offer rejected
	id = slavery.1203
	desc = "EVTDESCSLAVERY1203"
	picture = GFX_evt_slave_trade
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY1203"
		trigger = {
			slave_trader = {
				is_ruler = yes
				is_alive = yes
				NOT = { character = ROOT }
				NOT = { character = FROM }
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_1
							has_building = ct_asoiaf_slavepit_1
							has_building = tp_asoiaf_slavepit_1
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_1 }
				}
				OR = {
					NOT = { has_character_flag = flag_slave_action }
					had_character_flag = { flag = flag_slave_action days = 30 }
				}
			}
		}
		slave_trader = {
			limit = {
				is_ruler = yes
				is_alive = yes
				NOT = { character = ROOT }
				NOT = { character = FROM }
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_1
							has_building = ct_asoiaf_slavepit_1
							has_building = tp_asoiaf_slavepit_1
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_1 }
				}
				OR = {
					NOT = { has_character_flag = flag_slave_action }
					had_character_flag = { flag = flag_slave_action days = 30 }
				}
			}
			set_character_flag = flag_slave_action
			character_event = { id = slavery.1201 tooltip = "EVTTOOLTIPSLAVERY1201" }
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 2
				trait = stubborn
			}
		}
	}
	option = {
		name = "EVTOPTBSLAVERY1203"
		clr_character_flag = flag_slave_action
		
		# AI Memory
		clr_character_flag = flag_buying_bulk_slaves_rejected
		set_character_flag = flag_buying_bulk_slaves_rejected
		
		ai_chance = { factor = 25 }
	}
}

# Selling bulk slaves
character_event = {
	id = slavery.1300
	desc = "EVTDESCSLAVERY1300"
	picture = GFX_evt_slave_market
	
	is_triggered_only = yes
	
	trigger = {
		is_nomadic = no
		has_full_slavery_trigger = yes
		OR = {
			capital_holding = {
				OR = {
					has_building = ca_asoiaf_slavepit_1
					has_building = ct_asoiaf_slavepit_1
					has_building = tp_asoiaf_slavepit_1	
					has_building = no_asoiaf_slavepit_1							
				}
			}
			family_palace = { has_building = fp_asoiaf_slavepit_1 }
		}
	}
	
	immediate = {
		if = {
			limit = {
				location = {
					trade_post_owner = {
						NOT = { character = ROOT }
						trait = slave_trader
						NOR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_slavepit_5
									has_building = ct_asoiaf_slavepit_5
									has_building = tp_asoiaf_slavepit_5
								}
							}
							family_palace = { has_building = fp_asoiaf_slavepit_5 }
						}
						OR = {
							wealth = 400
							AND = { #AI may take loan to buy slaves if they can afford it
								ai = yes
								NOT = { has_character_flag = loan_taken }
								NOT = { has_character_modifier = loan_timer }
								NOT = { has_character_flag = offended_moneylenders }
								OR = {
									AND = {
										monthly_income = 12
										wealth = 100
									}
									AND = {
										monthly_income = 6
										wealth = 200
									}
									AND = {
										monthly_income = 3
										wealth = 300
									}
								}
							}
						}
						OR = {
							NOT = { has_character_flag = no_bulk_slave_cooldown }
							had_character_flag = { flag = no_bulk_slave_cooldown days = 730 }
						}
						OR = {
							NOT = { has_character_flag = flag_slave_action }
							had_character_flag = { flag = flag_slave_action days = 30 }
						}
					}
				}
			}
			location = { trade_post_owner = { save_event_target_as = slave_trader } }
			break = yes
		}
		slave_trader = {
			limit = {
				is_ruler = yes						
				is_alive = yes
				NOT = { character = ROOT }
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_5
							has_building = ct_asoiaf_slavepit_5
							has_building = tp_asoiaf_slavepit_5
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_5 }
				}
				OR = {
					wealth = 400
					AND = { #AI may take loan to buy slaves if they can afford it
						ai = yes
						NOT = { has_character_flag = loan_taken }
						NOT = { has_character_modifier = loan_timer }
						NOT = { has_character_flag = offended_moneylenders }
						OR = {
							AND = {
								monthly_income = 12
								wealth = 100
							}
							AND = {
								monthly_income = 6
								wealth = 200
							}
							AND = {
								monthly_income = 3
								wealth = 300
							}
						}									
					}
				}
				OR = {
					NOT = { has_character_flag = no_bulk_slave_cooldown }
					had_character_flag = { flag = no_bulk_slave_cooldown days = 730 }
				}
				OR = {
					NOT = { has_character_flag = flag_slave_action }
					had_character_flag = { flag = flag_slave_action days = 30 }
				}
			}
			save_event_target_as = slave_trader
		}
	}
	
	option = {
		name = "EVTOPTASLAVERY1300"
		event_target:slave_trader = {
			set_character_flag = flag_slave_action
			character_event = { id = slavery.1301 tooltip = "EVTTOOLTIPSLAVERY1301" }
			hidden_tooltip = { ROOT=  { clear_event_target = slave_trader } }
			break = yes
		}
		#Failsafe clear flags
		clr_character_flag = flag_slave_action
		clr_character_flag = flag_selling_bulk_slaves
	}
	option = {
		name = "EVTOPTBSLAVERY200"
		ai_chance = { factor = 0 }
		clr_character_flag = flag_slave_action
		clr_character_flag = flag_selling_bulk_slaves
		hidden_tooltip = { clear_event_target = slave_trader }
	}
}

character_event = { #offer received
	id = slavery.1301
	desc = "EVTDESCSLAVERY1301"
	picture = GFX_evt_slave_market
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY1301"
		# Buy them!
		FROM = { character_event = { id = slavery.1302 tooltip = "EVTTOOLTIPSLAVERY1302" } }
		character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" }
		clr_character_flag = flag_slave_action
		if = { #AI may take loan to buy slaves if they can afford it
			limit = {
				ai = yes
				NOT = { wealth = 350 }
				NOT = { has_character_flag = loan_taken }
				NOT = { has_character_modifier = loan_timer }
				NOT = { has_character_flag = offended_moneylenders }							
			}
			if = {
				limit = {
					monthly_income = 3
					wealth = 300
				}
				wealth = 100
				set_character_flag = loan_100
				set_variable = { which = "loan_amount" value = 100 }
				add_character_modifier = {
					name = "loan_timer"
					duration = 1825
				}
				set_character_flag = loan_taken
			}	
			if = {
				limit = {
					monthly_income = 6
					wealth = 200
					NOT = { has_character_flag = loan_taken }
				}
				wealth = 200
				set_character_flag = loan_200
				set_variable = { which = "loan_amount" value = 200 }
				add_character_modifier = {
					name = "loan_timer"
					duration = 1825
				}
				set_character_flag = loan_taken
			}
			if = {
				limit = {
					monthly_income = 12
					wealth = 100
					NOT = { has_character_flag = loan_taken }
				}
				wealth = 400
				set_character_flag = loan_400
				set_variable = { which = "loan_amount" value = 400 }
				add_character_modifier = {
					name = "loan_timer"
					duration = 1825
				}
				set_character_flag = loan_taken
			}
		}
		wealth = -400
		clr_character_flag = no_bulk_slave_cooldown
		ai_chance = {
			factor = 100
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 0.5
				capital_scope = { revolt_risk = 0.05 }
				NOT = { trait = proud }
				NOT = { trait = imbecile }
				NOT = { is_dumb_trigger = yes }
				NOT = { trait = lunatic }
			}
			modifier = {
				factor = 0.5
				capital_scope = { revolt_risk = 0.1 }
				NOT = { trait = proud }
				NOT = { trait = imbecile }
				NOT = { is_dumb_trigger = yes }
				NOT = { trait = lunatic }
			}
			modifier = {
				factor = 10
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_1
							has_building = ct_asoiaf_slavepit_1
							has_building = tp_asoiaf_slavepit_1
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_1 }
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_2
							has_building = ct_asoiaf_slavepit_2
							has_building = tp_asoiaf_slavepit_2
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_2 }
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_3
							has_building = ct_asoiaf_slavepit_3
							has_building = tp_asoiaf_slavepit_3
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_3 }
				}
			}
			modifier = {
				factor = 0.75
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_4
							has_building = ct_asoiaf_slavepit_4
							has_building = tp_asoiaf_slavepit_4
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_4 }
				}
			}
		}
	}
	option = {
		# Don't sell them!
		name = "EVTOPTBSLAVERY1301"
		FROM = { character_event = { id = slavery.1303 tooltip = "EVTTOOLTIPSLAVERY1303" } }
		ai_chance = { factor = 10 }
		set_character_flag = no_bulk_slave_cooldown
		clr_character_flag = flag_slave_action
	}
}

character_event = { #offer accepted
	id = slavery.1302
	desc = "EVTDESCSLAVERY1302"
	picture = GFX_evt_slave_trade
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY1302"
		wealth = 400
		character_event = { id = slavery.1001 tooltip = "EVTTOOLTIPSLAVERY1001" }
		clr_character_flag = flag_slave_action
	}
}

character_event = { #offer rejected
	id = slavery.1303
	desc = "EVTDESCSLAVERY1303"
	picture = GFX_evt_slave_trade
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY1303"
		trigger = {
			slave_trader = {
				is_ruler = yes
				NOT = { character = ROOT }
				NOT = { character = FROM }
				is_alive = yes
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_5
							has_building = ct_asoiaf_slavepit_5
							has_building = tp_asoiaf_slavepit_5
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_5 }
				}
				OR = {
					wealth = 400
					AND = { #AI may take loan to buy slaves if they can afford it
						ai = yes
						NOT = { has_character_flag = loan_taken }
						NOT = { has_character_modifier = loan_timer }
						NOT = { has_character_flag = offended_moneylenders }
						OR = {
							AND = {
								monthly_income = 12
								wealth = 100
							}
							AND = {
								monthly_income = 6
								wealth = 200
							}
							AND = {
								monthly_income = 3
								wealth = 300
							}
						}
					}
				}
				OR = {
					NOT = { has_character_flag = no_bulk_slave_cooldown }
					had_character_flag = { flag = no_bulk_slave_cooldown days = 730 }
				}
				OR = {
					NOT = { has_character_flag = flag_slave_action }
					had_character_flag = { flag = flag_slave_action days = 30 }
				}
			}
		}
		slave_trader = {
			limit = {
				is_ruler = yes
				NOT = { character = ROOT }
				NOT = { character = FROM }
				is_alive = yes
				NOR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_5
							has_building = ct_asoiaf_slavepit_5
							has_building = tp_asoiaf_slavepit_5
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_5 }
				}
				OR = {
					wealth = 400
					AND = { #AI may take loan to buy slaves if they can afford it
						ai = yes
						NOT = { has_character_flag = loan_taken }
						NOT = { has_character_modifier = loan_timer }
						NOT = { has_character_flag = offended_moneylenders }
						OR = {
							AND = {
								monthly_income = 12
								wealth = 100
							}
							AND = {
								monthly_income = 6
								wealth = 200
							}
							AND = {
								monthly_income = 3
								wealth = 300
							}
						}
					}
				}
				OR = {
					NOT = { has_character_flag = no_bulk_slave_cooldown }
					had_character_flag = { flag = no_bulk_slave_cooldown days = 730 }
				}
				OR = {
					NOT = { has_character_flag = flag_slave_action }
					had_character_flag = { flag = flag_slave_action days = 30 }
				}
			}
			set_character_flag = flag_slave_action
			character_event = { id = slavery.1301 tooltip = "EVTTOOLTIPSLAVERY1301" }
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 2
				trait = stubborn
			}
		}
	}
	option = {
		name = "EVTOPTBSLAVERY1303"
		clr_character_flag = flag_slave_action
		ai_chance = { factor = 25 }
		
		# AI Memory
		clr_character_flag = flag_selling_bulk_slaves_rejected
		set_character_flag = flag_selling_bulk_slaves_rejected
	}
}
# Slaves freed from camps
character_event = {
	id = slavery.1400
	desc = "EVTDESCSLAVERY1400"
	picture = GFX_evt_slavery
	
	is_triggered_only = yes
	
	trigger = {
		is_ruler = yes
		OR = {
			capital_holding = {
				OR = {
					has_building = ca_asoiaf_slavepit_1
					has_building = ct_asoiaf_slavepit_1
					has_building = tp_asoiaf_slavepit_1	
					has_building = no_asoiaf_slavepit_1					
				}
			}
			family_palace = { has_building = fp_asoiaf_slavepit_1 }
		}
	}
	
	option = {
		name = "EVTOPTASLAVERY1400"
		character_event = { id = slavery.1001 tooltip = "EVTTOOLTIPSLAVERY1001" }
		clr_character_flag = flag_slave_action
	}
	option = {
		name = "EVTOPTBSLAVERY200"
		ai_chance = { factor = 0 }
		clr_character_flag = flag_slave_action
	}
}

# Inform other rulers of treaty violations
character_event = {
	id = slavery.2000
	desc = "EVTDESCSLAVERY2000"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		name = OK
		any_independent_ruler = {
			limit = { 
				demesne_size = 1
				primary_title = { has_law = slavery_0 } 
			}
			character_event = { id = slavery.2001 tooltip = "EVTTOOLTIPSLAVERY2001" }
		}
	}
}

character_event = {
	id = slavery.2001
	desc = "EVTDESCSLAVERY2001"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	
	option = {
		name = OK
	}
}

# Stopgap attempt for now - force the AI to consider using slave raids on a five year pulse where possible
character_event = {
	id = slavery.2500
	desc = "Hey, AI, you want to go get some slaves from this person?"
	picture = GFX_evt_slavery
	is_triggered_only = yes
	war = no
	only_playable = yes
	ai = yes
	trigger = {
		OR = {
			trait = slave_owner
			trait = slave_trader
		}
		crownlaw_title = { has_law = slavery_2 }		
		OR = {
			NOT = { has_global_flag = war_cooldown_period } 
			had_global_flag = { flag = war_cooldown_period	 days = 25 }
		}
		NOT = { trait = liberator }
		NOT = { trait = nightswatch } 
		NOT = { culture_group = unoccupied_group }
		#These characters can gain slaves by looting
		NOT = { religion = drowned_god }
		NOT = { trait = pirate }
		NOT = { religion = lady_of_the_waves }
		NOT = { religion = dothraki_pagan }
		NOT = { religion_group = wildling_religion }
		NOT = { culture = jogos_nhai }
		is_nomadic = no
		NOT = {
			OR = {
				capital_holding = {
					OR = {
						has_building = ca_asoiaf_slavepit_5
						has_building = ct_asoiaf_slavepit_5
						has_building = tp_asoiaf_slavepit_5					
					}
				}
				family_palace = { has_building = fp_asoiaf_slavepit_5 }
			}	
		}	
	}
		
	immediate = {
		# Opinion flag a target
		random_independent_ruler = {
			limit = {
				NOT = { culture_group = ROOT }
				NOT = { culture_group = unoccupied_group }
				NOT = { reverse_has_truce = ROOT }
				NOR = {
					is_allied_with = ROOT		
					has_non_aggression_pact_with = ROOT					
				}
				NOT = { trait = wildling }
				NOT = { trait = dragon_rider }
				OR = {
					ROOT = { trait = wildling }
					NOT = { trait = nightswatch }
				}
				NOT = { primary_title = { title = d_kingsguard } }
				NOT = {
					relative_power = {
						who = ROOT
						power = 0.5
					}
				}	
				# Cannot use this within the same realm if crown authority is high
				OR = {
					NOT = { same_realm = ROOT }
					crownlaw_title = {
						OR = {
							has_law = centralization_0
							has_law = centralization_1
						}
					}
				}	
				OR = {
					NOT = { trait = pirate }
					higher_tier_than = DUKE						
				}
				any_realm_province = {
					NOT = { has_province_modifier = sacked }
					NOT = { culture_group = ROOT }
					# Must be adjacent or The province is coastal and the attacker is a patrician
					OR = {		
						AND = {
							port = yes
							ROOT = {
								trait = slave_trader
							}
						}						
						any_neighbor_province = {
							owner = { 
								OR = {
									any_liege = { character = ROOT } 
									character = ROOT
								}	
							}
						}				
					}
					ROOT = { #restrict to sensible dsitances
						capital_scope = {
							NOT = {
								distance = {
									where = PREVPREV
									value = 600
								}
							}	
						}
					}
				}
			}
			save_event_target_as = slave_raid_target_evaluation
		}
	}
	
	option = {
		name = "Let's do it!"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 4
				trait = slave_trader
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 0.5
				trait = charitable
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 0.5
				trait = kind
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			modifier = {
				factor = 0.5
				trait = honorable
			}
			modifier = {
				factor = 2
				event_target:slave_raid_target_evaluation = {
					NOT = {
						relative_power = {
							who = ROOT
							power = 0.25
						}
					}	
				}
			}
			modifier = {
				factor = 2
				event_target:slave_raid_target_evaluation = {
					NOT = {
						relative_power = {
							who = ROOT
							power = 0.1
						}
					}	
				}
			}
			# These cultures are known to make particularly good slaves
			modifier = {
				factor = 2
				event_target:slave_raid_target_evaluation = {
					OR = {
						culture = lhazareen
						culture = naathi
					}
				}
			}
			modifier = {
				factor = 1.5
				event_target:slave_raid_target_evaluation = {
					NOT = { reverse_opinion = { who = ROOT value = -99 } }
				}
			}
			modifier = {
				factor = 1.5
				event_target:slave_raid_target_evaluation = {
					NOT = { reverse_opinion = { who = ROOT value = -79 } }
				}
			}
			modifier = {
				factor = 1.5
				event_target:slave_raid_target_evaluation = {
					NOT = { reverse_opinion = { who = ROOT value = -59 } }
				}
			}
			modifier = {
				factor = 1.5
				event_target:slave_raid_target_evaluation = {
					NOT = { reverse_opinion = { who = ROOT value = -39 } }
				}
			}
			modifier = {
				factor = 1.5
				event_target:slave_raid_target_evaluation = {
					NOT = { reverse_opinion = { who = ROOT value = -19 } }
				}
			}
			modifier = {
				factor = 0.66
				event_target:slave_raid_target_evaluation = {
					reverse_opinion = { who = ROOT value = 20 }
				}
			}
			modifier = {
				factor = 0.66
				event_target:slave_raid_target_evaluation = {
					reverse_opinion = { who = ROOT value = 40 }
				}
			}
			modifier = {
				factor = 0
				event_target:slave_raid_target_evaluation = {
					reverse_opinion = { who = ROOT value = 60 }
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_1
							has_building = ct_asoiaf_slavepit_1
							has_building = tp_asoiaf_slavepit_1
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_1 }
				}	
			}
			modifier = {
				factor = 0.5
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_2
							has_building = ct_asoiaf_slavepit_2
							has_building = tp_asoiaf_slavepit_2
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_2 }
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_3
							has_building = ct_asoiaf_slavepit_3
							has_building = tp_asoiaf_slavepit_3
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_3 }
				}
			}
			modifier = {
				factor = 0.5
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_slavepit_4
							has_building = ct_asoiaf_slavepit_4
							has_building = tp_asoiaf_slavepit_4
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_4 }
				}
			}
		}
		event_target:slave_raid_target_evaluation = {
			random_realm_province = {
				limit = {
					NOT = { has_province_modifier = sacked }
					NOT = { culture_group = ROOT }
					# Must be adjacent or The province is coastal and the attacker is a patrician
					OR = {		
						AND = {
							port = yes
							ROOT = {
								trait = slave_trader
							}
						}						
						any_neighbor_province = {
							owner = { 
								OR = {
									any_liege = { character = ROOT } 
									character = ROOT
								}	
							}
						}				
					}
				}
				ROOT = {
					war = {
						target = PREVPREV
						casus_belli = slave_raid
						thirdparty_title = PREV
					}
				}
			}
		}
	}
	
	option = {
		name = "Let's not do it!"
		ai_chance = {
			factor = 50
		}
	}
}

# Handling the liberator trait
# A character becomes a liberator
character_event = {
	id = slavery.3000
	picture = GFX_evt_slave_revolt
	
	min_age = 10
	capable_only = yes
	is_triggered_only = yes
	
	desc = {
		text = EVTDESCSLAVERY3000
		trigger = { educator = { always = yes } }
	}
	desc = {
		text = EVTDESCSLAVERY3000B
		trigger = { educator = { always = no } }
	}
	
	trigger = {
		OR = { 
			AND = { #Characters educated by a liberator may always get this
				has_guardian = yes
				educator = { trait = liberator }
			}
			AND = {
				OR = { # Must have some level of political power 
					is_patrician = yes
					higher_tier_than = COUNT
					any_heir_title = { higher_tier_than = COUNT }
					any_pretender_title = { higher_tier_than = COUNT }
					AND = {
						trait = ambitious
						trait = brave
					}
					trait = dragon_rider
				}
				OR = { # Liberators are radicals, who probably won't emerge without firsthand experience
					AND = { 
						is_ruler = yes
						crownlaw_title = { 
							OR = {
								has_law = slavery_1
								has_law = slavery_2
								has_law = slavery_3
							}	
						} 
					}	
					AND = {
						is_ruler = no
						liege = {
							crownlaw_title = { 
								OR = {
									has_law = slavery_1
									has_law = slavery_2
									has_law = slavery_3
								}	
							} 
						}	
					}
					location = {
						owner = {
							crownlaw_title = { 
								OR = {
									has_law = slavery_1
									has_law = slavery_2
									has_law = slavery_3
								}	
							}
						}
					}
				}
				OR = { # Reasons to become a liberator
					# Religious Conviction
					AND = {
						trait = zealous
						has_antislavery_religion_trigger = yes
					}
					# Nationalist Conviction
					AND = {
						has_antislavery_culture_trigger = yes
						trait = just
						trait = proud
					}
					# Sympathy
					AND = {
						is_female = yes
						trait = ambitious
					}
					AND = {
						trait = former_slave
						NOT = { trait = arbitrary }
						NOT = { trait = selfish }
						NOT = { trait = content }
						NOT = { trait = humble }
					}
				}				
			}
		}
		NOT = { trait = liberator }
		NOT = { trait = slave } # Won't emerge in slaves in captivity
		NOT = { has_character_flag = refused_liberator }
	}
	
	weight_multiplier = {
		factor = 1
		
		# Self-Interest Effects
		modifier = {
			factor = 0.25
			trait = slave_owner
		}
		modifier = {
			factor = 0.1
			trait = slave_trader
		}
		
		# Personality Effects
		modifier = {
			factor = 0.5
			trait = humble
		}
		modifier = {
			factor = 0.5
			trait = content
		}
		modifier = {
			factor = 0.5
			trait = slothful
		}
		modifier = {
			factor = 0.5
			trait = craven
		}
		modifier = {
			factor = 0.5
			trait = cruel
		}
		modifier = {
			factor = 0.5
			trait = envious
		}
		modifier = {
			factor = 0.5
			trait = arbitrary
		}
		modifier = {
			factor = 2
			trait = proud
		}
		modifier = {
			factor = 2
			trait = ambitious
		}
		modifier = {
			factor = 2
			trait = diligent
		}
		modifier = {
			factor = 2
			trait = brave
		}
		modifier = {
			factor = 2
			trait = kind
		}
		
		# Already have a lifestyle trait
		modifier = {
			factor = 0.25
			lifestyle_traits = 1
		}
		
		# Religious Effects
		modifier = {
			factor = 2
			has_antislavery_religion_trigger = yes
			NOT = { trait = cynical }
		}
		modifier = {
			factor = 2
			has_antislavery_religion_trigger = yes
			trait = zealous
		}
		
		# Cultural Effects
		modifier = {
			factor = 0.5
			NOT = { trait = arbitrary }
			OR = {
				has_slavery_culture_trigger = yes
				has_slavery_religion_trigger = yes
			}
		}
		modifier = {
			factor = 0.5
			trait = just
			OR = {
				has_slavery_culture_trigger = yes
				has_slavery_religion_trigger = yes
			}
		}
		modifier = {
			factor = 2
			NOT = { trait = arbitrary }
			has_antislavery_culture_trigger = yes
		}
		modifier = {
			factor = 2
			trait = just
			has_antislavery_culture_trigger = yes
		}
		
		# Influences
		modifier = {
			factor = 0.5
			father = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = slave_owner
			}
		}
		modifier = {
			factor = 0.25
			father = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = slave_trader
			}
		}
		modifier = {
			factor = 2
			father = {
				reverse_opinion = { who = ROOT value = 10 }
				OR = {
					trait = slave
					trait = former_slave
				}
			}
		}
		modifier = {
			factor = 4
			father = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = liberator
			}
		}
		modifier = {
			factor = 0.5
			mother = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = slave_owner
			}
		}
		modifier = {
			factor = 0.25
			mother = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = slave_trader
			}
		}
		modifier = {
			factor = 2
			mother = {
				reverse_opinion = { who = ROOT value = 10 }
				OR = {
					trait = slave
					trait = former_slave
				}
			}
		}
		modifier = {
			factor = 4
			mother = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = liberator
			}
		}
		modifier = {
			factor = 0.5
			has_guardian = yes
			educator = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = slave_owner
			}
		}
		modifier = {
			factor = 0.25
			has_guardian = yes
			educator = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = slave_trader
			}
		}
		modifier = {
			factor = 2
			has_guardian = yes
			educator = {
				reverse_opinion = { who = ROOT value = 10 }
				OR = {
					trait = slave
					trait = former_slave
				}
			}
		}
		modifier = {
			factor = 4
			has_guardian = yes
			educator = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = liberator
			}
		}
		modifier = {
			factor = 0.5
			spouse = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = slave_owner
			}
		}
		modifier = {
			factor = 0.25
			spouse = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = slave_trader
			}
		}
		modifier = {
			factor = 2
			spouse = {
				reverse_opinion = { who = ROOT value = 10 }
				OR = {
					trait = slave
					trait = former_slave
				}
			}
		}
		modifier = {
			factor = 4
			spouse = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = liberator
			}
		}
		modifier = {
			factor = 0.5
			is_ruler = no
			liege = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = slave_owner
			}
		}
		modifier = {
			factor = 0.25
			is_ruler = no
			liege = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = slave_trader
			}
		}
		modifier = {
			factor = 2
			is_ruler = no
			liege = {
				reverse_opinion = { who = ROOT value = 10 }
				OR = {
					trait = slave
					trait = former_slave
				}
			}
		}
		modifier = {
			factor = 4
			is_ruler = no
			liege = {
				reverse_opinion = { who = ROOT value = 10 }
				trait = liberator
			}
		}
	}
	
	# Become a Liberator
	option = {
		name = "EVTOPTASLAVERY3000"
		if = {
			limit = {
				is_ruler = yes
				trait = slave_owner
			}
			character_event = { id = slavery.3003 days = 2 tooltip = TOOLTIPslavery.3003 }
		}
		add_trait = liberator
		if = {
			limit = { has_guardian = yes }
			educator = { character_event = { id = slavery.3001 } }
		}		
	}
	
	option = {
		name = "EVTOPTBSLAVERY3000"
		trigger = { ai = no }
		if = {
			limit = {
				trait = stressed
				NOT = { trait = depressed }
			}
			random = {
				chance = 15
				add_trait = depressed
				hidden_tooltip = { character_event = { id = 38288 } }
			}
		}
		if = {
			limit = {
				NOT = { trait = stressed }
				NOT = { trait = depressed }
			}
			random = {
				chance = 25
				add_trait = stressed
				hidden_tooltip = { character_event = { id = 38282 } }
			}
		}
		set_character_flag = refused_liberator
	}
}

# Guardian reacts to liberator ward
character_event = {
	id = slavery.3001
	desc = "EVTDESCSLAVERY3001"
	picture = GFX_evt_slave_revolt
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY3001"
		FROM = { tooltip = { add_trait = liberator } }
		ai_chance = {
			factor = 50
			modifier = {
				factor = 4
				crownlaw_title = { has_law = slavery_0 }
			}
			modifier = {
				factor = 2
				crownlaw_title = { has_law = slavery_0 }
				trait = just
			}
			modifier = {
				factor = 2
				trait = slave
			}
			modifier = {
				factor = 2
				trait = former_slave
			}
			# Religious Effects
			modifier = {
				factor = 2
				has_antislavery_religion_trigger = yes
				NOT = { trait = cynical }
			}
			modifier = {
				factor = 2
				has_antislavery_religion_trigger = yes
				trait = zealous
			}
			modifier = {
				factor = 2
				NOT = { trait = arbitrary }
				has_antislavery_culture_trigger = yes
			}
			modifier = {
				factor = 2
				trait = just
				has_antislavery_culture_trigger = yes
			}
			
			
			modifier = {
				factor = 2
				trait = kind
			}			
		}
	}
	option = {
		name = "EVTOPTBSLAVERY3001"
		FROM = {
			remove_trait = liberator
			hidden_tooltip = { character_event = { id = slavery.3002 } }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 4
				crownlaw_title = {
					OR = {
						has_law = slavery_2
						has_law = slavery_3
					}
				}
			}
			modifier = {
				factor = 2
				crownlaw_title = {
					OR = {
						has_law = slavery_2
						has_law = slavery_3
					}
				}
				trait = just
			}
			modifier = {
				factor = 0
				trait = liberator
			}
			modifier = {
				factor = 10
				trait = slave_trader
			}
			modifier = {
				factor = 2
				trait = slave_owner
			}
			modifier = {
				factor = 2
				trait = slave_owner
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = slave_owner
				trait = proud
			}
			modifier = {
				factor = 2
				trait = slave_owner
				trait = ambitious
			}
			modifier = {
				factor = 2
				NOT = { trait = arbitrary }
				OR = {
					has_slavery_culture_trigger = yes
					has_slavery_religion_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = just
				OR = {
					has_slavery_culture_trigger = yes
					has_slavery_religion_trigger = yes
				}
			}
			modifier = {
				factor = 2
				trait = cruel
			}
		}
	}
}

character_event = {
	id = slavery.3002
	desc = "EVTDESCSLAVERY3002"
	picture = GFX_evt_slavery
	
	is_triggered_only = yes
	
	option = { 
		name = OK 
		set_character_flag = refused_liberator
	}
}

# Became liberator, all slaves are freed
character_event = {
	id = slavery.3003
	desc = "EVTDESCSLAVERY3003"
	picture = GFX_evt_slavery
	
	is_triggered_only = yes
	only_rulers = yes
	
	trigger = {
		trait = liberator
	}
	
	option = {
		name = "EVTOPTASLAVERY3003"		
		if = {
			limit = { trait = slave_owner }
			remove_trait = slave_owner
		}	
		if = {
			limit = {
				has_antislavery_religion_trigger = yes
			}
			piety = 250
		}
		prestige = -200
		any_opinion_modifier_target = {
			limit = {
				trait = slave
				has_opinion_modifier = { who = ROOT modifier = opinion_my_owner }
			}
			character_event = { id = slavery.0 tooltip = EVTTOOLTIPSLAVERY0 }
			hidden_tooltip = {
				remove_opinion = { who = ROOT modifier = opinion_my_owner }
				reverse_remove_opinion = { who = ROOT modifier = opinion_my_slave }
			}
		}
		if = {
			limit = {
				OR = {
					any_demesne_title = {
						tier = BARON
						OR = {
							has_building = ca_asoiaf_slavepit_1
							has_building = ct_asoiaf_slavepit_1
							has_building = tp_asoiaf_slavepit_1		
							has_building = no_asoiaf_slavepit_1	
						}
					}
					family_palace = { has_building = fp_asoiaf_slavepit_1 }
				}
			}
			custom_tooltip = {
				text = TOOLTIPslavery.3003BULKSLAVES
				hidden_tooltip = {
					any_demesne_title = {
						limit = { tier = BARON }
						remove_building = ca_asoiaf_slavepit_1
						remove_building = ct_asoiaf_slavepit_1
						remove_building = tp_asoiaf_slavepit_1
						remove_building = no_asoiaf_slavepit_1							
					}
					family_palace = { remove_building = fp_asoiaf_slavepit_1 }
				}
			}
		}
		if = {
			limit = {
				OR = {
					any_demesne_title = {
						tier = BARON
						OR = {	
							has_building = ca_asoiaf_unsullied_1		
							has_building = ca_asoiaf_unsullied_cent_1		
							has_building = ct_asoiaf_unsullied_1		
							has_building = ct_asoiaf_unsullied_cent_1						
						}
					}
					family_palace = { 
						OR = {	
							has_building = fp_asoiaf_unsullied_1		
							has_building = fp_asoiaf_unsullied_cent_1							
						}
					}
				}
			}
			character_event = { id = slavery.3004 tooltip = TOOLTIPslavery.3004 }
		}
	}
}	
#Unsullied pledge allegiance
character_event = {
	id = slavery.3004
	desc = "EVTDESCSLAVERY3004"
	picture = GFX_unsullied
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY3004"
		custom_tooltip = { 
			text = TOOLTIPmobilise_unsullied 
			hidden_tooltip = {
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_cent_9
									has_building = ct_asoiaf_unsullied_cent_9						
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_cent_9
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 100 100 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
				}
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_cent_8
									has_building = ct_asoiaf_unsullied_cent_8						
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_cent_8
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 100 100 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
				}	
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_cent_7
									has_building = ct_asoiaf_unsullied_cent_7						
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_cent_7
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 100 100 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
				}	
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_cent_6
									has_building = ct_asoiaf_unsullied_cent_6					
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_cent_6
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 100 100 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
				}	
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_cent_5
									has_building = ct_asoiaf_unsullied_cent_5					
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_cent_5
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 100 100 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
				}	
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_cent_4
									has_building = ct_asoiaf_unsullied_cent_4					
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_cent_4
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 100 100 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
				}	
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_cent_3
									has_building = ct_asoiaf_unsullied_cent_3					
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_cent_3
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 100 100 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
				}	
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_cent_2
									has_building = ct_asoiaf_unsullied_cent_2						
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_cent_2
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 100 100 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
				}	
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_cent_1
									has_building = ct_asoiaf_unsullied_cent_1						
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_cent_1
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 100 100 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						female = no
						culture = random
						religion = lady_of_spears
						trait = eunuch
						trait = former_slave
						age = 18
						historical = yes
					}
					new_character = { 
						set_character_flag = new_unsullied 
						set_unsullied_name_effect = yes
						random_list = {
							25 = { add_trait = trained_warrior }
							60 = { add_trait = skilled_warrior }
							15 = { add_trait = master_warrior }
						}
					}
				}	
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_1
									has_building = ct_asoiaf_unsullied_1						
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_1
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 1000 1000 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						female = no
						culture = random
						religion = lady_of_spears
						trait = eunuch
						trait = former_slave
						age = 21
						historical = yes
					}
					new_character = { 
						set_character_flag = new_unsullied 
						set_unsullied_name_effect = yes
						random_list = {
							25 = { add_trait = trained_warrior }
							60 = { add_trait = skilled_warrior }
							15 = { add_trait = master_warrior }
						}
					}
				}
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_2
									has_building = ct_asoiaf_unsullied_2					
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_2
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 1000 1000 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						female = no
						culture = random
						religion = lady_of_spears
						trait = eunuch
						trait = former_slave
						age = 23
						historical = yes
					}
					new_character = { 
						set_character_flag = new_unsullied 
						set_unsullied_name_effect = yes
						random_list = {
							25 = { add_trait = trained_warrior }
							60 = { add_trait = skilled_warrior }
							15 = { add_trait = master_warrior }
						}
					}
				}
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_3
									has_building = ct_asoiaf_unsullied_3						
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_3
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 1000 1000 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						female = no
						religion = lady_of_spears
						culture = random					
						trait = eunuch
						trait = former_slave
						age = 19
						historical = yes
					}
					new_character = { 
						set_character_flag = new_unsullied 
						set_unsullied_name_effect = yes
						random_list = {
							25 = { add_trait = trained_warrior }
							60 = { add_trait = skilled_warrior }
							15 = { add_trait = master_warrior }
						}
					}
				}
				if = {
					limit = { 
						OR = {
							capital_holding = {
								OR = {
									has_building = ca_asoiaf_unsullied_4
									has_building = ct_asoiaf_unsullied_4					
								}
							}
							family_palace = { 
								has_building = fp_asoiaf_unsullied_4
							}
						}	
					}
					capital_scope = {
						ROOT = {
							spawn_unit = {
								province = PREV
								home = PREV
								owner = ROOT
								troops = {
									unsullied = { 1000 1000 }
								}
								attrition = 0.5
								reinforces = no
								maintenance = yes
							}
						}
					}
					create_random_soldier = {
						random_traits = yes
						dynasty = none
						female = no
						culture = random
						religion = lady_of_spears
						trait = eunuch
						trait = former_slave
						age = 20
						historical = yes
					}
					new_character = { 
						set_character_flag = new_unsullied 
						set_unsullied_name_effect = yes
						random_list = {
							25 = { add_trait = trained_warrior }
							60 = { add_trait = skilled_warrior }
							15 = { add_trait = master_warrior }
						}
					}
				}
				any_demesne_title = {
					limit = { tier = BARON }
					remove_building = ca_asoiaf_unsullied_1
					remove_building = ct_asoiaf_unsullied_1
					remove_building = ca_asoiaf_unsullied_cent_1
					remove_building = ct_asoiaf_unsullied_cent_1
				}
				family_palace = { 
					remove_building = fp_asoiaf_unsullied_1
					remove_building = fp_asoiaf_unsullied_cent_1 
				}
				any_courtier = {
					limit = { has_character_flag = new_unsullied }
					opinion = { who = ROOT modifier = opinion_loyal_servant }
					clr_character_flag = new_unsullied
					set_character_flag = unsullied
					change_diplomacy = -3
					change_stewardship = -5
					change_learning = -5
					change_intrigue = -3
					remove_trait = weak
					remove_trait = imbecile
					remove_trait = inbred
					remove_trait = slow
					remove_trait = craven
					remove_trait = ambitious
					remove_trait = lustful
					remove_trait = rude
					if = { #Invalid Kingslander
						limit = {
							226 = { NOT = { has_province_flag = kings_landing_established } }
							culture = crownlander
						}
						culture = riverlander
					}
				}
			}
		}
	}
}	
###Looted holding, can take slaves for camps###
character_event = {
	id = slavery.4000
	desc = "EVTDESCslavery.4000"
	picture = GFX_evt_slavery

	is_triggered_only = yes
	only_playable = yes

	trigger = {
		OR = {
			has_full_slavery_trigger = yes
			crownlaw_title = { has_law = slavery_3	}	
		}	
		NOT = { trait = liberator }
		#is_nomadic = no #They have a raid CB
		NOR = {
			capital_holding = {
				OR = {
					has_building = ca_asoiaf_slavepit_5
					has_building = ct_asoiaf_slavepit_5
					has_building = tp_asoiaf_slavepit_5
					has_building = no_asoiaf_slavepit_5
				}
			}
			family_palace = { has_building = fp_asoiaf_slavepit_5 }
		}
		FROM = {  #Looted holding conditions
			holder_scope = {
				NOT = { is_liege_or_above = ROOT }
				OR = {
					NOT = { same_realm = ROOT }
					war_with = ROOT
					any_liege = { war_with = ROOT }
				}
			}
			OR = {
				holding_type = castle
				holding_type = city
			}
			base_value_3_trigger = yes #Must be at least level 3
			OR = { #If a sub holding, must be at least level 5
				is_capital = yes
				base_value_5_trigger = yes
			}			
		}
	}	
	
	option = {
		name = "OPTAslavery.4000"
		ai_chance = {
			factor = 50

			modifier = {
				factor = 3
				trait = greedy
			}
			modifier = {
				factor = 3
				trait = cruel
			}
			modifier = {
				factor = 3
				trait = wroth
			}
			modifier = {
				factor = 3
				trait = proud
			}
			modifier = {
				factor = 3
				trait = ruthless
			}
			modifier = {
				factor = 3
				trait = ambitious
			}
		}
		character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" } 
		FROM = {
			location = {
				slave_raid_gain_slaves_effect = yes		
			}	
		}
	}
	option = {
		name = "OPTBslavery.4000"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				trait = charitable
			}
			modifier = {
				factor = 3
				trait = kind
			}
			modifier = {
				factor = 3
				trait = patient
			}
			modifier = {
				factor = 3
				trait = humble
			}
			modifier = {
				factor = 3
				trait = honorable
			}
			modifier = {
				factor = 3
				trait = content
			}
		}
	}	
}	
###Liege demands release of slave relatives###
letter_event = {
	id = slavery.4001
	desc = "EVTDESCslavery.4001"

	is_triggered_only = yes

	option = {
		name = "OPTAslavery.4001" #OK
		ai_chance = {
			factor = 75
			modifier = {
				factor = 5
				NOT = { trait = dragon_rider }
				FROM = { trait = dragon_rider } 
			}
			modifier = {
				factor = 1.75
				NOT = {
					relative_power = {
						who = FROM
						power = 0.4
					}
				}	
			}
			modifier = {
				factor = 1.75
				NOT = {
					relative_power = {
						who = FROM
						power = 0.2
					}
				}	
			}
			modifier = {
				factor = 2
				NOT = {
					relative_power = {
						who = FROM
						power = 0.1
					}
				}	
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 20 }	
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 40 }	
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 60 }	
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 80 }	
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value = 100 }	
			}
			modifier = {
				factor = 2
				trait = craven	
			}
			modifier = {
				factor = 2
				trait = honorable	
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 4
				trait = content
			}
		}
		FROM = {
			hidden_tooltip = { letter_event = { id = slavery.4002  } }
		}		
		any_courtier = {
			limit = {
				trait = slave
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_my_slave }
				OR = {
					is_married = FROM
					dynasty = FROM
					is_close_relative = FROM
				}
			}
			tooltip = {
				remove_trait = slave
				move_character = FROM
			}
		}
		prestige = -50
		clr_character_flag = flag_slave_action
	}
	
	option = {
		name = "OPTBslavery.4001" #No
		trigger = { prisoner = no }
		ai_chance = {
			factor = 25
			modifier = {
				factor = 5
				trait = dragon_rider
				FROM = { NOT = { trait = dragon_rider } }	
			}
			modifier = {
				factor = 2
				relative_power = {
					who = FROM
					power = 0.75
				}
			}
			modifier = {
				factor = 2
				relative_power = {
					who = FROM
					power = 1
				}
			}
			modifier = {
				factor = 2
				relative_power = {
					who = FROM
					power = 1.25
				}
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 19 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 39 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 59 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 79 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value = 99 } }
			}
			modifier = {
				factor = 2
				trait = brave	
			}
			modifier = {
				factor = 2
				trait = just
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
		}
		FROM = {
			hidden_tooltip = { letter_event = { id = slavery.4003  } }
			opinion = {
				who = ROOT
				modifier = opinion_traitor
			}
		}
		prestige = 50
		clr_character_flag = flag_slave_action		
	}
}	
#Inform accept
letter_event = {
	id = slavery.4002
	desc = "EVTDESCslavery.4002"

	is_triggered_only = yes

	option = {
		name = OK
		clr_character_flag = demand_relatives_freed
		FROM = {
			any_courtier = {
				limit = {
					trait = slave
					reverse_has_opinion_modifier = { who = PREV modifier = opinion_my_slave }
					OR = {
						is_married = ROOT
						dynasty = ROOT
						is_close_relative = ROOT
					}
				}
				tooltip = { remove_trait = slave }
				move_character = ROOT
				hidden_tooltip = { character_event = { id = slavery.0 } }
			}
		}	
	}
}	
#Inform reject
letter_event = {
	id = slavery.4003
	desc = "EVTDESCslavery.4003"

	is_triggered_only = yes

	option = {
		name = "OPTAslavery.4003" #OK
		clr_character_flag = demand_relatives_freed
	}
}	
#Initial Slaver Setup event
character_event = {
	id = slavery.4004
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = { is_patrician = yes }
			if = {
				limit = { is_merchant_republic = yes }
				capital_scope = { province_event = { id = slavery.1021 days = 1 } } #Calculate slave labour modifier
			}
			if = {
				limit = { is_merchant_republic = no }
				liege = { capital_scope = { province_event = { id = slavery.1021 days = 1 } } }#Calculate slave labour modifier
			}
		}
		if = {
			limit = { is_patrician = no }
			capital_scope = { province_event = { id = slavery.1021 days = 1 } } #Calculate slave labour modifier
		}	
		random_playable_ruler = {	#Find random ruler to base slave culture on, this is done so not all slaves in the world are clones
			limit = { 
				demesne_size = 1 
				NOT = { age_diff = { who = ROOT years = 1 } }
				NOT = { culture = ROOT }
				NOT = { culture_group = winter_group }
				NOT = { culture_group = unoccupied_group }
			}
			ROOT = {
				create_character = {
					random_traits = yes
					culture = PREV
					religion = PREV
					dynasty = none
					historical = yes
				}
				new_character = {
					add_trait = slave
					#give_minor_title = title_slave
					opinion = { who = ROOT modifier = opinion_my_owner }
					reverse_opinion = { who = ROOT modifier = opinion_my_slave }
					if = {
						limit = { 
							OR = {
								is_female = no 
								culture_group = hyrkoon_group
							}	
						}
						random_list = {
							40 = { }
							30 = { add_trait = poor_warrior }
							25 = { add_trait = trained_warrior }
							5 = { add_trait = skilled_warrior }
						}				
					}
					if = { #Invalid Kingslander
						limit = {
							226 = { NOT = { has_province_flag = kings_landing_established } }
							culture = crownlander
						}
						culture = riverlander
					}
				}
			}
		}	
		random_playable_ruler = {	#Find random ruler to base slave culture on, this is done so not all slaves in the world have the same name
			limit = { 
				demesne_size = 1 
				age_diff = { who = ROOT years = 1 }
				NOT = { age_diff = { who = ROOT years = 2 } }
				NOT = { culture = ROOT }
				NOT = { culture_group = winter_group }
				NOT = { culture_group = unoccupied_group }
			}
			ROOT = {
				random_list = {
					50 = {
						create_character = {
							random_traits = yes
							culture = PREV
							religion = PREV
							dynasty = none
							historical = yes
						}
					}
					50 = {
						create_character = {
							random_traits = yes
							culture = PREV
							religion = PREV
							dynasty = none
							female = yes
							historical = yes
						}
					}
				}	
				new_character = {
					add_trait = slave
					#give_minor_title = title_slave
					opinion = { who = ROOT modifier = opinion_my_owner }
					reverse_opinion = { who = ROOT modifier = opinion_my_slave }
					if = {
						limit = { 
							OR = {
								is_female = no 
								culture_group = hyrkoon_group
							}	
						}
						random_list = {
							40 = { }
							30 = { add_trait = poor_warrior }
							25 = { add_trait = trained_warrior }
							5 = { add_trait = skilled_warrior }
						}				
					}
					if = { #Invalid Kingslander
						limit = {
							226 = { NOT = { has_province_flag = kings_landing_established } }
							culture = crownlander
						}
						culture = riverlander
					}
				}
			}
		}		
		random_playable_ruler = {	#Find random ruler to base slave culture on, this is done so not all slaves in the world have the same name
			limit = { 
				demesne_size = 1 
				age_diff = { who = ROOT years = 2 }
				NOT = { age_diff = { who = ROOT years = 3 } }
				NOT = { culture = ROOT }
				NOT = { culture_group = winter_group }
				NOT = { culture_group = unoccupied_group }
			}
			ROOT = {
				create_character = {
					random_traits = yes
					culture = PREV
					religion = PREV
					dynasty = none
					female = yes
					historical = yes
				}
				new_character = {
					add_trait = slave
					#give_minor_title = title_slave
					opinion = { who = ROOT modifier = opinion_my_owner }
					reverse_opinion = { who = ROOT modifier = opinion_my_slave }
					if = {
						limit = { 
							OR = {
								is_female = no 
								culture_group = hyrkoon_group
							}	
						}
						random_list = {
							40 = { }
							30 = { add_trait = poor_warrior }
							25 = { add_trait = trained_warrior }
							5 = { add_trait = skilled_warrior }
						}				
					}
					if = { #Invalid Kingslander
						limit = {
							226 = { NOT = { has_province_flag = kings_landing_established } }
							culture = crownlander
						}
						culture = riverlander
					}
				}
			}
		}
	}
	
	option = { name = OK }
}
###Unsullied Events###
#Training started
character_event = {
	id = slavery.700
	desc = "EVTDESCSLAVERY700"
	picture = GFX_unsullied
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY700"
		if = {
			limit = { 
				NOT = { has_character_flag = training_unsullied_4000 } 
				has_character_flag = training_unsullied_3000
			}
			set_character_flag = training_unsullied_4000
		}
		if = {
			limit = { 
				NOT = { has_character_flag = training_unsullied_3000 } 
				has_character_flag = training_unsullied_2000
			}
			set_character_flag = training_unsullied_3000
		}		
		if = {
			limit = { 
				NOT = { has_character_flag = training_unsullied_2000 } 
				has_character_flag = training_unsullied_1000
			}
			set_character_flag = training_unsullied_2000
		}		
		if = {
			limit = { 
				NOT = { has_character_flag = training_unsullied_1000 } 
			}
			set_character_flag = training_unsullied_1000		
		}
		add_character_modifier = {
			name = training_unsullied
			duration = 3650
		}
		clr_character_flag = flag_slave_action
		hidden_tooltip = {
			random = {
				chance = 10
				character_event = { id = slavery.709 days = 500 } #Weak recruits
			}
		}
	}
}	
#Training done
character_event = {
	id = slavery.701
	desc = "EVTDESCSLAVERY701"
	picture = GFX_unsullied
	
	is_triggered_only = yes
	only_playable = yes
	
	trigger = {
		capital_scope = { culture = astapori }
		NOT = { crownlaw_title = { has_law = slavery_0 } }	
		OR = {
			had_character_flag = { flag = training_unsullied_1000 days = 3650 }
			had_character_flag = { flag = training_unsullied_2000 days = 3650 }
			had_character_flag = { flag = training_unsullied_3000 days = 3650 }
			had_character_flag = { flag = training_unsullied_4000 days = 3650 }
		}
		NOR = {
			capital_holding = {
				OR = {
					has_building = ca_asoiaf_unsullied_4
					has_building = ct_asoiaf_unsullied_4						
				}
			}
			family_palace = { has_building = fp_asoiaf_unsullied_4 }
		}
	}
	
	option = {
		name = "EVTOPTASLAVERY701" 
		if = {
			limit = { 
				had_character_flag = { flag = training_unsullied_1000 days = 3650 }
			}
			clr_character_flag = training_unsullied_1000
			character_event = { id = slavery.702 tooltip = TOOLTIPslavery.702 } #Add 1000 unsullied
		}
		if = {
			limit = { 
				had_character_flag = { flag = training_unsullied_2000 days = 3650 }
				NOT = {
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_4
								has_building = ct_asoiaf_unsullied_4						
							}
						}
						family_palace = { has_building = fp_asoiaf_unsullied_4 }
					}
				}
			}
			clr_character_flag = training_unsullied_2000
			character_event = { id = slavery.702 tooltip = TOOLTIPslavery.702 } #Add 1000 unsullied
		}
		if = {
			limit = { 
				had_character_flag = { flag = training_unsullied_3000 days = 3650 }
				NOT = {
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_4
								has_building = ct_asoiaf_unsullied_4						
							}
						}
						family_palace = { has_building = fp_asoiaf_unsullied_4 }
					}
				}
			}
			clr_character_flag = training_unsullied_3000
			character_event = { id = slavery.702 tooltip = TOOLTIPslavery.702 } #Add 1000 unsullied
		}
		if = {
			limit = { 
				had_character_flag = { flag = training_unsullied_4000 days = 3650 }
				NOT = {
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_4
								has_building = ct_asoiaf_unsullied_4						
							}
						}
						family_palace = { has_building = fp_asoiaf_unsullied_4 }
					}
				}
			}
			clr_character_flag = training_unsullied_4000
			character_event = { id = slavery.702 tooltip = TOOLTIPslavery.702 } #Add 1000 unsullied
		}
		if = {
			limit = { 
				NOT = { has_character_flag = training_unsullied_1000 } 
				NOT = { has_character_flag = training_unsullied_2000 } 
				NOT = { has_character_flag = training_unsullied_3000 } 
				NOT = { has_character_flag = training_unsullied_4000 } 
			}
			remove_character_modifier = training_unsullied
		}
		hidden_tooltip = { #Inform interested human
			random_playable_ruler = {
				limit = {
					ai = no
					has_character_flag = inform_available_unsullied
					has_full_slavery_trigger = yes	
					NOT = { trait = liberator }
					is_nomadic = no
					NOT = { capital_scope = { culture = astapori } }
				}
				character_event = { id = slavery.711 days = 1 }
			}
		}
	}
}	
#Add 1000 unsullied to camp
character_event = {
	id = slavery.702
	
	is_triggered_only = yes
	hide_window = yes
		
	immediate = {
		if = {
			limit = {
				NOT = { is_patrician = yes }
				capital_holding = { has_building = ca_asoiaf_unsullied_3 }
				NOT = { capital_holding = { has_building = ca_asoiaf_unsullied_4 } }
			}
			capital_holding = { add_building = ca_asoiaf_unsullied_4 }
		}
		if = {
			limit = {
				NOT = { is_patrician = yes }
				capital_holding = { has_building = ca_asoiaf_unsullied_2 }
				NOT = { capital_holding = { has_building = ca_asoiaf_unsullied_3 } }
			}
			capital_holding = { add_building = ca_asoiaf_unsullied_3 }
		}
		if = {
			limit = {
				NOT = { is_patrician = yes }
				capital_holding = { has_building = ca_asoiaf_unsullied_1 }
				NOT = { capital_holding = { has_building = ca_asoiaf_unsullied_2 } }
			}
			capital_holding = { add_building = ca_asoiaf_unsullied_2 }
		}
		if = {
			limit = {
				NOT = { is_patrician = yes }
				capital_holding = { has_building = ct_asoiaf_unsullied_3 }
				NOT = { capital_holding = { has_building = ct_asoiaf_unsullied_4 } }
			}
			capital_holding = { add_building = ct_asoiaf_unsullied_4 }
		}
		if = {
			limit = {
				NOT = { is_patrician = yes }
				capital_holding = { has_building = ct_asoiaf_unsullied_2 }
				NOT = { capital_holding = { has_building = ct_asoiaf_unsullied_3 } }
			}
			capital_holding = { add_building = ct_asoiaf_unsullied_3 }
		}
		if = {
			limit = {
				NOT = { is_patrician = yes }
				capital_holding = { has_building = ct_asoiaf_unsullied_1 }
				NOT = { capital_holding = { has_building = ct_asoiaf_unsullied_2 } }
			}
			capital_holding = { add_building = ct_asoiaf_unsullied_2 }
		}
		if = {
			limit = {
				is_patrician = yes
				family_palace = {
					has_building = fp_asoiaf_unsullied_3
					NOT = { has_building = fp_asoiaf_unsullied_4 }
				}
			}
			family_palace = { add_building = fp_asoiaf_unsullied_4 }
		}
		if = {
			limit = {
				is_patrician = yes
				family_palace = {
					has_building = fp_asoiaf_unsullied_2
					NOT = { has_building = fp_asoiaf_unsullied_3 }
				}
			}
			family_palace = { add_building = fp_asoiaf_unsullied_3 }
		}
		if = {
			limit = {
				is_patrician = yes
				family_palace = {
					has_building = fp_asoiaf_unsullied_1
					NOT = { has_building = fp_asoiaf_unsullied_2 }
				}
			}
			family_palace = { add_building = fp_asoiaf_unsullied_2 }
		}
		if = {
			limit = {
				is_patrician = no
				capital_holding = {
					NOT = { has_building = ca_asoiaf_unsullied_1 }
					NOT = { has_building = ct_asoiaf_unsullied_1 }
					NOT = { has_building = fp_asoiaf_unsullied_1 }
				}
			}
			add_trait = slave_owner
			capital_holding = {
				add_building = ca_asoiaf_unsullied_1
				add_building = ct_asoiaf_unsullied_1
				add_building = fp_asoiaf_unsullied_1
			}
		}
		if = {
			limit = {
				is_patrician = yes
				NOT = { family_palace = { has_building = fp_asoiaf_unsullied_1 } }
			}
			add_trait = slave_owner
			family_palace = { add_building = fp_asoiaf_unsullied_1 }		
		}
	}
	
	option = {
		name = OK
	}
}	
#Remove 1000 Unsullied from camp
character_event = {
	id = slavery.703
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_1
					NOT = { has_building = ca_asoiaf_unsullied_2 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_1 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_2
					NOT = { has_building = ca_asoiaf_unsullied_3 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_2 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_3
					NOT = { has_building = ca_asoiaf_unsullied_4 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_3 }
		}
		if = {
			limit = { capital_holding = { has_building = ca_asoiaf_unsullied_4 } }
			capital_holding = { remove_building = ca_asoiaf_unsullied_4 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_1
					NOT = { has_building = ct_asoiaf_unsullied_2 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_1 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_2
					NOT = { has_building = ct_asoiaf_unsullied_3 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_2 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_3
					NOT = { has_building = ct_asoiaf_unsullied_4 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_3 }
		}
		if = {
			limit = { capital_holding = { has_building = ct_asoiaf_unsullied_4 } }
			capital_holding = { remove_building = ct_asoiaf_unsullied_4 }
		}
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_1
					NOT = { has_building = fp_asoiaf_unsullied_2 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_1 }
		}
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_2
					NOT = { has_building = fp_asoiaf_unsullied_3 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_2 }
		}
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_3
					NOT = { has_building = fp_asoiaf_unsullied_4 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_3 }
		}
		if = {
			limit = { family_palace = { has_building = fp_asoiaf_unsullied_4 } }
			family_palace = { remove_building = fp_asoiaf_unsullied_4 }
		}
	}
	
	option = { name = OK }
}
#Remove 100 Unsullied from camp
character_event = {
	id = slavery.704
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				is_patrician = no
				capital_holding = {
					NOT = { has_building = ca_asoiaf_unsullied_cent_1 }
					NOT = { has_building = ct_asoiaf_unsullied_cent_1 }
				}
			}
			capital_holding = { 
				if = {
					limit = { has_building = ca_asoiaf_unsullied_1 }
					add_building = ca_asoiaf_unsullied_cent_1
					add_building = ca_asoiaf_unsullied_cent_2
					add_building = ca_asoiaf_unsullied_cent_3
					add_building = ca_asoiaf_unsullied_cent_4
					add_building = ca_asoiaf_unsullied_cent_5
					add_building = ca_asoiaf_unsullied_cent_6
					add_building = ca_asoiaf_unsullied_cent_7
					add_building = ca_asoiaf_unsullied_cent_8
					add_building = ca_asoiaf_unsullied_cent_9
				}
				if = {
					limit = { has_building = ct_asoiaf_unsullied_1 }
					add_building = ct_asoiaf_unsullied_cent_1
					add_building = ct_asoiaf_unsullied_cent_2
					add_building = ct_asoiaf_unsullied_cent_3
					add_building = ct_asoiaf_unsullied_cent_4
					add_building = ct_asoiaf_unsullied_cent_5
					add_building = ct_asoiaf_unsullied_cent_6
					add_building = ct_asoiaf_unsullied_cent_7
					add_building = ct_asoiaf_unsullied_cent_8
					add_building = ct_asoiaf_unsullied_cent_9
				}
			}	
			set_character_flag = unsullied_900
			character_event = { id = slavery.703 tooltip = "EVTTOOLTIPSLAVERY703" } #Remove 1000 Unsullied
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_cent_1
					NOT = { has_building = ca_asoiaf_unsullied_cent_2 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_cent_1 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_cent_2
					NOT = { has_building = ca_asoiaf_unsullied_cent_3 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_cent_2 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_cent_3
					NOT = { has_building = ca_asoiaf_unsullied_cent_4 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_cent_3 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_cent_4
					NOT = { has_building = ca_asoiaf_unsullied_cent_5 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_cent_4 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_cent_5
					NOT = { has_building = ca_asoiaf_unsullied_cent_6 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_cent_5 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_cent_6
					NOT = { has_building = ca_asoiaf_unsullied_cent_7 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_cent_6 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_cent_7
					NOT = { has_building = ca_asoiaf_unsullied_cent_8 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_cent_7 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ca_asoiaf_unsullied_cent_8
					NOT = { has_building = ca_asoiaf_unsullied_cent_9 }
				}
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_cent_8 }
		}
		if = {
			limit = { 
				NOT = { has_character_flag = unsullied_900 }
				capital_holding = { has_building = ca_asoiaf_unsullied_cent_9 } 
			}
			capital_holding = { remove_building = ca_asoiaf_unsullied_cent_9 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_cent_1
					NOT = { has_building = ct_asoiaf_unsullied_cent_2 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_cent_1 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_cent_2
					NOT = { has_building = ct_asoiaf_unsullied_cent_3 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_cent_2 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_cent_3
					NOT = { has_building = ct_asoiaf_unsullied_cent_4 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_cent_3 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_cent_4
					NOT = { has_building = ct_asoiaf_unsullied_cent_5 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_cent_4 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_cent_5
					NOT = { has_building = ct_asoiaf_unsullied_cent_6 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_cent_5 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_cent_6
					NOT = { has_building = ct_asoiaf_unsullied_cent_7 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_cent_6 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_cent_7
					NOT = { has_building = ct_asoiaf_unsullied_cent_8 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_cent_7 }
		}
		if = {
			limit = {
				capital_holding = {
					has_building = ct_asoiaf_unsullied_cent_8
					NOT = { has_building = ct_asoiaf_unsullied_cent_9 }
				}
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_cent_8 }
		}
		if = {
			limit = { 
				NOT = { has_character_flag = unsullied_900 }
				capital_holding = { has_building = ct_asoiaf_unsullied_cent_9 } 
			}
			capital_holding = { remove_building = ct_asoiaf_unsullied_cent_9 }
		}
		if = {
			limit = {
				is_patrician = yes
				family_palace = {
					NOT = { has_building = fp_asoiaf_unsullied_cent_1 }
				}
			}
			family_palace = {
				if = {
					limit = { has_building = fp_asoiaf_unsullied_1 }
					add_building = fp_asoiaf_unsullied_cent_1
					add_building = fp_asoiaf_unsullied_cent_2
					add_building = fp_asoiaf_unsullied_cent_3
					add_building = fp_asoiaf_unsullied_cent_4
					add_building = fp_asoiaf_unsullied_cent_5
					add_building = fp_asoiaf_unsullied_cent_6
					add_building = fp_asoiaf_unsullied_cent_7
					add_building = fp_asoiaf_unsullied_cent_8
					add_building = fp_asoiaf_unsullied_cent_9
				}
			}	
			set_character_flag = unsullied_900
			character_event = { id = slavery.703 tooltip = "EVTTOOLTIPSLAVERY703" } #Remove 1000 Unsullied
		}	
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_cent_1
					NOT = { has_building = fp_asoiaf_unsullied_cent_2 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_cent_1 }
		}
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_cent_2
					NOT = { has_building = fp_asoiaf_unsullied_cent_3 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_cent_2 }
		}
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_cent_3
					NOT = { has_building = fp_asoiaf_unsullied_cent_4 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_cent_3 }
		}
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_cent_4
					NOT = { has_building = fp_asoiaf_unsullied_cent_5 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_cent_4 }
		}
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_cent_5
					NOT = { has_building = fp_asoiaf_unsullied_cent_6 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_cent_5 }
		}
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_cent_6
					NOT = { has_building = fp_asoiaf_unsullied_cent_7 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_cent_6 }
		}
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_cent_7
					NOT = { has_building = fp_asoiaf_unsullied_cent_8 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_cent_7 }
		}
		if = {
			limit = {
				family_palace = {
					has_building = fp_asoiaf_unsullied_cent_8
					NOT = { has_building = fp_asoiaf_unsullied_cent_9 }
				}
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_cent_8 }
		}
		if = {
			limit = { 
				NOT = { has_character_flag = unsullied_900 }
				family_palace = { has_building = fp_asoiaf_unsullied_cent_9 } 
			}
			family_palace = { remove_building = fp_asoiaf_unsullied_cent_9 }
		}	
		clr_character_flag = unsullied_900		
	}
	
	option = { name = OK }
}
#Buy Unsullied
character_event = {
	id = slavery.705
	desc = "EVTDESCSLAVERY705"
	picture = GFX_unsullied
	
	is_triggered_only = yes
	
	option = { #Thousand
		name = "EVTOPTASLAVERY705" 
		trigger = {
			wealth = 750
			slave_owner = {
				is_alive = yes
				NOT = { character = ROOT }
				NOT = { war_with = ROOT }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = rejected_unsullied } }
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_unsullied_1
							has_building = ct_asoiaf_unsullied_1
						}
					}
					family_palace = { has_building = fp_asoiaf_unsullied_1 }
				}	
				OR = {
					NOT = { has_character_flag = flag_selling_unsullied }
					had_character_flag = { flag = flag_selling_unsullied days = 30 }
				}
			}
		}
		set_character_flag = buying_unsullied_1000
		clr_character_flag = buying_unsullied_100
		slave_owner = {
			limit = {
				is_alive = yes
				NOT = { character = ROOT }
				NOT = { war_with = ROOT }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = rejected_unsullied } }
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_unsullied_1
							has_building = ct_asoiaf_unsullied_1
						}
					}
					family_palace = { has_building = fp_asoiaf_unsullied_1 }
				}
				OR = {
					NOT = { has_character_flag = flag_selling_unsullied }
					had_character_flag = { flag = flag_selling_unsullied days = 30 }
				}
			}
			set_character_flag = flag_slave_action
			set_character_flag = flag_selling_unsullied
			character_event = { id = slavery.706 tooltip = "EVTTOOLTIPSLAVERY706A" }
		}
	}
	
	option = { #Hundred
		name = "EVTOPTBSLAVERY705" 
		trigger = {
			slave_owner = {
				is_alive = yes
				NOT = { character = ROOT }
				NOT = { war_with = ROOT }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = rejected_unsullied } }
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_unsullied_1
							has_building = ct_asoiaf_unsullied_1
							has_building = ca_asoiaf_unsullied_cent_1
							has_building = ct_asoiaf_unsullied_cent_1
						}
					}
					family_palace = { 
						OR = {
							has_building = fp_asoiaf_unsullied_1
							has_building = fp_asoiaf_unsullied_cent_1
						}
					}
				}
				OR = {
					ai = yes
					NOT = { has_character_flag = unsullied_not_for_sale }
					had_character_flag = { flag = unsullied_not_for_sale days = 365 }
				}
				OR = {
					NOT = { has_character_flag = flag_selling_unsullied }
					had_character_flag = { flag = flag_selling_unsullied days = 30 }
				}
			}
		}
		set_character_flag = buying_unsullied_100
		clr_character_flag = buying_unsullied_1000
		slave_owner = {
			limit = {
				is_alive = yes
				NOT = { character = ROOT }
				NOT = { war_with = ROOT }
				NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = rejected_unsullied } }
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_unsullied_1
							has_building = ct_asoiaf_unsullied_1
							has_building = ca_asoiaf_unsullied_cent_1
							has_building = ct_asoiaf_unsullied_cent_1
						}
					}
					family_palace = { 
						OR = {
							has_building = fp_asoiaf_unsullied_1
							has_building = fp_asoiaf_unsullied_cent_1
						}
					}
				}	
				OR = {
					ai = yes
					NOT = { has_character_flag = unsullied_not_for_sale }
					had_character_flag = { flag = unsullied_not_for_sale days = 365 }
				}
				OR = {
					NOT = { has_character_flag = flag_selling_unsullied }
					had_character_flag = { flag = flag_selling_unsullied days = 30 }
				}
			}
			set_character_flag = flag_slave_action
			set_character_flag = flag_selling_unsullied
			character_event = { id = slavery.706 tooltip = "EVTTOOLTIPSLAVERY706B" }
		}
	}
	
	option = { #None available
		name = "EVTOPTCSLAVERY705" 
		trigger = {
			NOT = {
				slave_owner = {
					is_alive = yes
					NOT = { character = ROOT }
					NOT = { war_with = ROOT }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = rejected_unsullied } }
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_1
								has_building = ct_asoiaf_unsullied_1
								has_building = ca_asoiaf_unsullied_cent_1
								has_building = ct_asoiaf_unsullied_cent_1
							}
						}
						family_palace = { 
							OR = {
								has_building = fp_asoiaf_unsullied_1
								has_building = fp_asoiaf_unsullied_cent_1
							}
						}
					}	
					OR = {
						ai = yes
						NOT = { has_character_flag = unsullied_not_for_sale }
						had_character_flag = { flag = unsullied_not_for_sale days = 365 }
					}
					OR = {
						NOT = { has_character_flag = flag_selling_unsullied }
						had_character_flag = { flag = flag_selling_unsullied days = 30 }
					}					
				}
			}	
		}
		clr_character_flag = flag_slave_action
		clr_character_flag = buying_unsullied_100
		clr_character_flag = buying_unsullied_1000
	}
	
	option = { #Inform when available
		name = "EVTOPTESLAVERY705" 
		trigger = {
			ai = no
			NOT = {
				slave_owner = {
					is_alive = yes
					NOT = { character = ROOT }
					NOT = { war_with = ROOT }
					NOT = { reverse_has_opinion_modifier = { who = ROOT modifier = rejected_unsullied } }
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_1
								has_building = ct_asoiaf_unsullied_1
								has_building = ca_asoiaf_unsullied_cent_1
								has_building = ct_asoiaf_unsullied_cent_1
							}
						}
						family_palace = { 
							OR = {
								has_building = fp_asoiaf_unsullied_1
								has_building = fp_asoiaf_unsullied_cent_1
							}
						}
					}
					OR = {
						NOT = { has_character_flag = flag_selling_unsullied }
						had_character_flag = { flag = flag_selling_unsullied days = 30 }
					}					
				}
			}	
		}
		custom_tooltip = { text = TOOLTIPEVTOPTESLAVERY705 }
		set_character_flag = inform_available_unsullied
		clr_character_flag = flag_slave_action
		clr_character_flag = buying_unsullied_100
		clr_character_flag = buying_unsullied_1000
	}
	
	option = { #Cancel
		name = "EVTOPTDSLAVERY705" 
		trigger = { ai = no }
		clr_character_flag = flag_slave_action
		clr_character_flag = buying_unsullied_100
		clr_character_flag = buying_unsullied_1000
	}
}
#Offered made for unsullied
character_event = {
	id = slavery.706
	desc = "EVTDESCSLAVERY706"
	picture = GFX_unsullied
	
	is_triggered_only = yes
	
	option = { #Yes
		name = "EVTOPTASLAVERY706" 
		ai_chance = {
			factor = 90
			modifier = {
				factor = 1.5
				has_character_flag = loan_taken
			}
			modifier = {
				factor = 2
				NOT = { wealth = -50 }
			}
			modifier = {
				factor = 2
				trait = greedy
			}
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				FROM = { has_character_flag = buying_unsullied_1000 }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -19 } }
			}
			modifier = {
				factor = 0.8
				NOT = { opinion = { who = FROM value = -39 } }
			}
			modifier = {
				factor = 0.66
				NOT = { opinion = { who = FROM value = -59 } }
			}
			modifier = {
				factor = 0
				NOT = { opinion = { who = FROM value = -79 } }
			}
		}
		FROM = { 
			character_event = { id = slavery.707 days = 1 tooltip = "EVTTOOLTIPSLAVERY706" } 
			if = {
				limit = { has_character_flag = buying_unsullied_100 }
				ROOT = {
					wealth = 80
					character_event = { id = slavery.704 tooltip = "EVTTOOLTIPSLAVERY704" } #Remove 100 Unsullied
				}
			}
			if = {
				limit = { has_character_flag = buying_unsullied_1000 }
				ROOT = {
					wealth = 750
					character_event = { id = slavery.703 tooltip = "EVTTOOLTIPSLAVERY703" } #Remove 1000 Unsullied
				}
			}			
		}
		clr_character_flag = flag_slave_action
		clr_character_flag = flag_selling_unsullied
	}
	option = { #No
		name = "EVTOPTBSLAVERY706" 
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				war = yes
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 19 } 
			}
			modifier = {
				factor = 0.8
				opinion = { who = FROM value = 39 } 
			}
			modifier = {
				factor = 0.66
				opinion = { who = FROM value = 59 } 
			}
			modifier = {
				factor = 0
				opinion = { who = FROM value = 79 } 
			}
		}
		FROM = { 
			hidden_tooltip = { character_event = { id = slavery.708 days = 1 } }
			opinion = { who = ROOT modifier = rejected_unsullied }			
		}
		clr_character_flag = flag_slave_action
		clr_character_flag = flag_selling_unsullied
	}
	option = { #Will not sell unsullied this year
		name = "EVTOPTCSLAVERY706" 
		trigger = { ai = no }
		FROM = { 
			hidden_tooltip = { character_event = { id = slavery.708 days = 1 } }
			opinion = { who = ROOT modifier = rejected_unsullied }			
		}
		clr_character_flag = flag_slave_action
		clr_character_flag = flag_selling_unsullied
		set_character_flag = unsullied_not_for_sale
	}
}	
#Inform accept, trade the unsullied
character_event = {
	id = slavery.707
	desc = "EVTDESCSLAVERY707"
	picture = GFX_unsullied
	
	is_triggered_only = yes
	
	option = { #Yes
		name = "EVTOPTASLAVERY707" 
		ai_chance = {
			factor = 1
		}
		if = {
			limit = { has_character_flag = buying_unsullied_100 }
			clr_character_flag = buying_unsullied_100
			wealth = -80
			capital_scope = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							unsullied = { 100 100 }
						}
						attrition = 0.5
						reinforces = no
						maintenance = yes
					}
				}
			}
		}
		if = {
			limit = { has_character_flag = buying_unsullied_1000 }
			clr_character_flag = buying_unsullied_1000
			wealth = -750
			capital_scope = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							unsullied = { 1000 1000 }
						}
						attrition = 0.5
						reinforces = no
						maintenance = yes
					}
				}
			}
		}
		clr_character_flag = flag_slave_action		
	}
	
	option = { #Yes, and take a personal guard
		name = "EVTOPTBSLAVERY707" 
		ai_chance = {
			factor = 100
			modifier = { #AI wont take character if already have one
				factor = 0
				any_courtier = {
					trait = slave
					has_character_flag = unsullied
					has_opinion_modifier = { who = ROOT modifier = opinion_my_owner }
					NOT = { age = 35 }
					NOT = { trait = incapable }
					NOT = { is_crippled_trigger = yes }
					NOT = { trait = infirm }
					combat_rating = 4
				}
			}
		}
		if = {
			limit = { has_character_flag = buying_unsullied_100 }
			clr_character_flag = buying_unsullied_100
			wealth = -80
			capital_scope = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							unsullied = { 100 100 }
						}
						attrition = 0.5
						reinforces = no
						maintenance = yes
					}
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				culture = random
				religion = lady_of_spears
				trait = eunuch
				trait = slave
				age = 18
				historical = yes
			}
			new_character = { 
				set_character_flag = new_unsullied 
				set_unsullied_name_effect = yes
			}
		}
		if = {
			limit = { has_character_flag = buying_unsullied_1000 }
			clr_character_flag = buying_unsullied_1000
			wealth = -750
			capital_scope = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							unsullied = { 1000 1000 }
						}
						attrition = 0.5
						reinforces = no
						maintenance = yes
					}
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				culture = random
				religion = lady_of_spears
				trait = eunuch
				trait = slave
				age = 18
				historical = yes
			}
			new_character = { 
				set_character_flag = new_unsullied 
				set_unsullied_name_effect = yes
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				culture = random
				religion = lady_of_spears
				trait = eunuch
				trait = slave
				age = 20
				historical = yes
			}
			new_character = { 
				set_character_flag = new_unsullied 
				set_unsullied_name_effect = yes
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				culture = random
				religion = lady_of_spears
				trait = eunuch
				trait = slave
				age = 19
				historical = yes
			}
			new_character = { 
				set_character_flag = new_unsullied 
				set_unsullied_name_effect = yes
			}
		}
		hidden_tooltip = {
			any_courtier = {
				limit = { has_character_flag = new_unsullied }
				move_character = ROOT
				opinion = { who = ROOT modifier = opinion_my_owner }
				reverse_opinion = { who = ROOT modifier = opinion_my_slave }
				clr_character_flag = new_unsullied
				set_character_flag = unsullied
				change_diplomacy = -3
				change_stewardship = -5
				change_learning = -5
				change_intrigue = -3
				remove_trait = weak
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = slow
				remove_trait = craven
				remove_trait = ambitious
				remove_trait = lustful
				remove_trait = rude
				random_list = {
					25 = { add_trait = trained_warrior }
					60 = { add_trait = skilled_warrior }
					15 = { add_trait = master_warrior }
				}
				if = {
					limit = { 
						ROOT = { ai = yes } 
						NAND = { #Uses the kingsguard instead
							has_landed_title = e_iron_throne 
							is_title_active = d_kingsguard
						} 
					}
					give_minor_title = title_bodyguard
				}
				if = { #Invalid Kingslander
					limit = {
						226 = { NOT = { has_province_flag = kings_landing_established } }
						culture = crownlander
					}
					culture = riverlander
				}
			}
		}	
		clr_character_flag = flag_slave_action		
	}
}
#Inform reject
character_event = {
	id = slavery.708
	desc = "EVTDESCSLAVERY708"
	picture = GFX_evt_slave_market
	
	is_triggered_only = yes
	
	option = { #Yes
		name = "EVTOPTBSLAVERY708" 
		clr_character_flag = flag_slave_action	
		clr_character_flag = buying_unsullied_1000
		clr_character_flag = buying_unsullied_100
	}
}	
#Recruits are weak
character_event = {
	id = slavery.709
	desc = "EVTDESCSLAVERY709"
	picture = GFX_unsullied
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY709" #Kill them all
		ai_chance = {
			factor = 1
		}
		prestige = -25
		custom_tooltip = { text = TOOLTIPslavery.709CANCEL }
		if = {
			limit = { 
				has_character_flag =  training_unsullied_1000
				NOT = { has_character_flag =  training_unsullied_2000 }
				NOT = { has_character_flag =  training_unsullied_3000 }
				NOT = { has_character_flag =  training_unsullied_4000 }
			}
			clr_character_flag =  training_unsullied_1000
			remove_character_modifier = training_unsullied
		}
		if = {
			limit = { 
				has_character_flag =  training_unsullied_2000
				NOT = { has_character_flag =  training_unsullied_3000 }
				NOT = { has_character_flag =  training_unsullied_4000 }
			}
			clr_character_flag =  training_unsullied_2000
		}
		if = {
			limit = { 
				has_character_flag =  training_unsullied_3000
				NOT = { has_character_flag =  training_unsullied_4000 }
			}
			clr_character_flag =  training_unsullied_3000
		}
		if = {
			limit = { has_character_flag =  training_unsullied_4000 }
			clr_character_flag =  training_unsullied_4000
		}		
	}
	option = {
		name = "EVTOPTBSLAVERY709" #Hire an 'advisor'
		ai_chance = {
			factor = 100
			modifier = {
				factor = 0.01
				NOT = { wealth = 30 }
			}
		}
		wealth = -40
		capital_scope = {
			ROOT = {
				create_random_soldier = {
					random_traits = yes
					dynasty = none
					female = no
					culture = PREV
					religion = ROOT
					trait = cruel
					trait = ruthless
					trait = authoritative
				}
				new_character = { 
					wealth = 50
					prestige = 25
					remove_trait = weak
					remove_trait = imbecile
					remove_trait = inbred
					remove_trait = slow
					remove_trait = craven
					remove_trait = just
					remove_trait = honest
					remove_trait = gregarious
					remove_trait = patient
					remove_trait = chaste
					remove_trait = temperate
					random_list = {
						65 = { add_trait = trained_warrior }
						35 = { add_trait = skilled_warrior }
					}
				}
			}
		}	
	}
}	
#Trained Unsullied mobilised
character_event = {
	id = slavery.710

	is_triggered_only = yes
	hide_window = yes
	
	immediate = {
		if = {
			limit = { #If less than 1000 available moblise them all
				NOT = {
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_1
								has_building = ct_asoiaf_unsullied_1						
							}
						}
						family_palace = { 
							has_building = fp_asoiaf_unsullied_1
						}
					}
				}	
			}
			if = {
				limit = { 
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_cent_9
								has_building = ct_asoiaf_unsullied_cent_9						
							}
						}
						family_palace = { 
							has_building = fp_asoiaf_unsullied_cent_9
						}
					}	
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								unsullied = { 100 100 }
							}
							attrition = 0.5
							reinforces = no
							maintenance = yes
						}
					}
				}
			}
			if = {
				limit = { 
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_cent_8
								has_building = ct_asoiaf_unsullied_cent_8						
							}
						}
						family_palace = { 
							has_building = fp_asoiaf_unsullied_cent_8
						}
					}	
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								unsullied = { 100 100 }
							}
							attrition = 0.5
							reinforces = no
							maintenance = yes
						}
					}
				}
			}	
			if = {
				limit = { 
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_cent_7
								has_building = ct_asoiaf_unsullied_cent_7						
							}
						}
						family_palace = { 
							has_building = fp_asoiaf_unsullied_cent_7
						}
					}	
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								unsullied = { 100 100 }
							}
							attrition = 0.5
							reinforces = no
							maintenance = yes
						}
					}
				}
			}	
			if = {
				limit = { 
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_cent_6
								has_building = ct_asoiaf_unsullied_cent_6					
							}
						}
						family_palace = { 
							has_building = fp_asoiaf_unsullied_cent_6
						}
					}	
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								unsullied = { 100 100 }
							}
							attrition = 0.5
							reinforces = no
							maintenance = yes
						}
					}
				}
			}	
			if = {
				limit = { 
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_cent_5
								has_building = ct_asoiaf_unsullied_cent_5					
							}
						}
						family_palace = { 
							has_building = fp_asoiaf_unsullied_cent_5
						}
					}	
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								unsullied = { 100 100 }
							}
							attrition = 0.5
							reinforces = no
							maintenance = yes
						}
					}
				}
			}	
			if = {
				limit = { 
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_cent_4
								has_building = ct_asoiaf_unsullied_cent_4					
							}
						}
						family_palace = { 
							has_building = fp_asoiaf_unsullied_cent_4
						}
					}	
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								unsullied = { 100 100 }
							}
							attrition = 0.5
							reinforces = no
							maintenance = yes
						}
					}
				}
			}	
			if = {
				limit = { 
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_cent_3
								has_building = ct_asoiaf_unsullied_cent_3					
							}
						}
						family_palace = { 
							has_building = fp_asoiaf_unsullied_cent_3
						}
					}	
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								unsullied = { 100 100 }
							}
							attrition = 0.5
							reinforces = no
							maintenance = yes
						}
					}
				}
			}	
			if = {
				limit = { 
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_cent_2
								has_building = ct_asoiaf_unsullied_cent_2						
							}
						}
						family_palace = { 
							has_building = fp_asoiaf_unsullied_cent_2
						}
					}	
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								unsullied = { 100 100 }
							}
							attrition = 0.5
							reinforces = no
							maintenance = yes
						}
					}
				}
			}	
			if = {
				limit = { 
					OR = {
						capital_holding = {
							OR = {
								has_building = ca_asoiaf_unsullied_cent_1
								has_building = ct_asoiaf_unsullied_cent_1						
							}
						}
						family_palace = { 
							has_building = fp_asoiaf_unsullied_cent_1
						}
					}	
				}
				capital_scope = {
					ROOT = {
						spawn_unit = {
							province = PREV
							home = PREV
							owner = ROOT
							troops = {
								unsullied = { 100 100 }
							}
							attrition = 0.5
							reinforces = no
							maintenance = yes
						}
					}
				}
			}	
			capital_holding = {
				remove_building = ca_asoiaf_unsullied_cent_1
				remove_building = ct_asoiaf_unsullied_cent_1
				remove_building = ca_asoiaf_unsullied_cent_2
				remove_building = ct_asoiaf_unsullied_cent_2
				remove_building = ca_asoiaf_unsullied_cent_3
				remove_building = ct_asoiaf_unsullied_cent_3
				remove_building = ca_asoiaf_unsullied_cent_4
				remove_building = ct_asoiaf_unsullied_cent_4
				remove_building = ca_asoiaf_unsullied_cent_5
				remove_building = ct_asoiaf_unsullied_cent_5
				remove_building = ca_asoiaf_unsullied_cent_6
				remove_building = ct_asoiaf_unsullied_cent_6
				remove_building = ca_asoiaf_unsullied_cent_7
				remove_building = ct_asoiaf_unsullied_cent_7
				remove_building = ca_asoiaf_unsullied_cent_8
				remove_building = ct_asoiaf_unsullied_cent_8
				remove_building = ca_asoiaf_unsullied_cent_9
				remove_building = ct_asoiaf_unsullied_cent_9
			}			
			family_palace = { 
				remove_building = fp_asoiaf_unsullied_cent_1
				remove_building = fp_asoiaf_unsullied_cent_2
				remove_building = fp_asoiaf_unsullied_cent_3
				remove_building = fp_asoiaf_unsullied_cent_4
				remove_building = fp_asoiaf_unsullied_cent_5
				remove_building = fp_asoiaf_unsullied_cent_6
				remove_building = fp_asoiaf_unsullied_cent_7
				remove_building = fp_asoiaf_unsullied_cent_8
				remove_building = fp_asoiaf_unsullied_cent_9
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				culture = random
				religion = lady_of_spears
				trait = eunuch
				trait = slave
				age = 18
				historical = yes
			}
			new_character = { 
				set_character_flag = new_unsullied 
				set_unsullied_name_effect = yes
			}
		}
		if = {
			limit = { #If 1000 available mobilise them
				OR = {
					capital_holding = {
						OR = {
							has_building = ca_asoiaf_unsullied_1
							has_building = ct_asoiaf_unsullied_1						
						}
					}
					family_palace = { 
						has_building = fp_asoiaf_unsullied_1
					}
				}	
			}
			character_event = { id = slavery.703 tooltip = "EVTTOOLTIPSLAVERY703" } #Remove 1000 Unsullied
			capital_scope = {
				ROOT = {
					spawn_unit = {
						province = PREV
						home = PREV
						owner = ROOT
						troops = {
							unsullied = { 1000 1000 }
						}
						attrition = 0.5
						reinforces = no
						maintenance = yes
					}
				}
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				culture = random
				religion = lady_of_spears
				trait = eunuch
				trait = slave
				age = 18
				historical = yes
			}
			new_character = { 
				set_character_flag = new_unsullied 
				set_unsullied_name_effect = yes
			}
			create_random_soldier = {
				random_traits = yes
				dynasty = none
				female = no
				culture = random
				religion = lady_of_spears
				trait = eunuch
				trait = slave
				age = 20
				historical = yes
			}
			new_character = { 
				set_character_flag = new_unsullied 
				set_unsullied_name_effect = yes
			}
		}
		hidden_tooltip = {
			any_courtier = {
				limit = { has_character_flag = new_unsullied }
				opinion = { who = ROOT modifier = opinion_my_owner }
				reverse_opinion = { who = ROOT modifier = opinion_my_slave }
				clr_character_flag = new_unsullied
				set_character_flag = unsullied
				change_diplomacy = -3
				change_stewardship = -5
				change_learning = -5
				change_intrigue = -3
				remove_trait = weak
				remove_trait = imbecile
				remove_trait = inbred
				remove_trait = slow
				remove_trait = craven
				remove_trait = ambitious
				remove_trait = lustful
				remove_trait = rude
				random_list = {
					25 = { add_trait = trained_warrior }
					60 = { add_trait = skilled_warrior }
					15 = { add_trait = master_warrior }
				}
				if = { #Invalid Kingslander
					limit = {
						226 = { NOT = { has_province_flag = kings_landing_established } }
						culture = crownlander
					}
					culture = riverlander
				}
			}
		}
	}
	
	option = {
		name = OK
		clr_character_flag = flag_selling_unsullied
	}	
}	
#Inform Unsullied are now available
character_event = {
	id = slavery.711
	desc = "EVTDESCSLAVERY711"
	picture = GFX_unsullied
	
	is_triggered_only = yes
	ai = no
	hide_from = yes
	
	option = {
		name = "EVTOPTASLAVERY711" #Buy them!
		set_character_flag = flag_slave_action
		character_event = { id = slavery.705 tooltip = "EVTTOOLTIPSLAVERY705" }	
	}
	
	option = {
		name = "EVTOPTBSLAVERY711" #Not now
		hidden_tooltip = { #Inform another interested human
			random_playable_ruler = {
				limit = {
					ai = no
					has_character_flag = inform_available_unsullied
					NOT = { character = ROOT }
					has_full_slavery_trigger = yes
					NOT = { trait = liberator }
					is_nomadic = no
					NOT = { capital_scope = { culture = astapori } }
				}
				character_event = { id = slavery.711 }
			}
		}
	}
	
	option = {
		name = "EVTOPTCSLAVERY711" #No longer interested
		clr_character_flag = inform_available_unsullied
		hidden_tooltip = { #Inform another interested human
			random_playable_ruler = {
				limit = {
					ai = no
					has_character_flag = inform_available_unsullied
					NOT = { character = ROOT }
					has_full_slavery_trigger = yes	
					NOT = { trait = liberator }
					is_nomadic = no
					NOT = { capital_scope = { culture = astapori } }
				}
				character_event = { id = slavery.711 }
			}
		}
	}
}	
#Inform vassal slavery has been outlawed throughout the Empire
character_event = {
	id = slavery.750
	desc = "EVTDESCSLAVERY750"
	picture = GFX_evt_slavery
	
	is_triggered_only = yes
	
	trigger = {
		tier = KING
		liege = { tier = EMPEROR }
	}

	option = {
		name = "EVTOPTASLAVERY750" #OK
		ai_chance = {
			factor = 50
			
			# Motivations
			modifier = {
				factor = 0
				NOT = { trait = liberator }
				NOT = { has_antislavery_culture_trigger = yes }
				NOT = { has_antislavery_religion_trigger = yes }
				NOT = { trait = lunatic }
				relative_power_to_liege = 0.1
				NOT = { liege = { reverse_opinion = { who = ROOT value = 50 } } }
			}
			
			# Personality Effects
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 2
				trait = content
			}
			modifier = {
				factor = 2
				trait = kind
			}
			modifier = {
				factor = 2
				trait = patient
			}
			modifier = {
				factor = 2
				trait = honorable
			}
			
			# Slave Owner or Trader
			modifier = {
				factor = 0.1
				trait = slave_owner
			}
			modifier = {
				factor = 0.1
				trait = slave_trader
			}
					
			# Culture Effects
			modifier = {
				factor = 0.05
				OR = {
					has_slavery_culture_trigger = yes	
					has_slavery_religion_trigger = yes
				}	
				NOT = {	 has_antislavery_religion_trigger = yes }
				NOT = { trait = arbitrary }
			}
			modifier = {
				factor = 0
				OR = {
					has_slavery_culture_trigger = yes	
					has_slavery_religion_trigger = yes
				}	
				NOT = {	 has_antislavery_religion_trigger = yes }
				trait = just
			}
			modifier = {
				factor = 5
				OR = {
					has_antislavery_culture_trigger = yes
					has_antislavery_religion_trigger = yes
				}
				NOT = { trait = arbitrary }
			}
			modifier = {
				factor = 2
				OR = {
					has_antislavery_culture_trigger = yes
					has_antislavery_religion_trigger = yes
				}
				trait = just
			}
			modifier = {
				factor = 2
				has_antislavery_religion_trigger = yes
			}
			modifier = {
				factor = 5
				has_antislavery_religion_trigger = yes
				NOT = { trait = cynical }
			}
			modifier = {
				factor = 2
				has_antislavery_religion_trigger = yes
				trait = zealous
			}
		}
		#make sure any sub kingdoms change to same law
		any_demesne_title = {
			limit = { 
				tier = KING 
				NOT = { has_law = slavery_0 }
				OR = {
					dejure_liege_title = { has_law = slavery_0 }
					AND = {
						NOT = { dejure_liege_title = { always = yes } }
						ROOT = { liege = { primary_title = { has_law = slavery_0 } } }
					}
				}
			}
			hidden_tooltip = { revoke_law = slavery_1 }
			hidden_tooltip = { revoke_law = slavery_2 }
			hidden_tooltip = { revoke_law = slavery_3 }	
			holder_scope = { set_character_flag = passive_slave_law_change }
			add_law = slavery_0
		}
		hidden_tooltip = {
			any_courtier = {
				limit = { 
					trait = slave 
					liege = { character = PREVPREV }
				}
				ROOT = { liege = { reverse_opinion = { who = PREVPREV modifier = opinion_abolished_slavery_former_slave months = 2400 } } }
			}
			any_realm_lord = {
				any_courtier = {
					limit = { 
						trait = slave 
						liege = { character = PREVPREV }
					}
					ROOT = { liege = { reverse_opinion = { who = PREVPREV modifier = opinion_abolished_slavery_former_slave months = 2400 } } }
				}
			}
		}
	}
	
	option = {
		name = "EVTOPTBSLAVERY750" #REVOLT!
		trigger = {
			any_demesne_title = {
				tier = KING 
				NOT = { has_law = slavery_0 }
				OR = {
					dejure_liege_title = { has_law = slavery_0 }
					AND = {
						NOT = { dejure_liege_title = { always = yes } }
						ROOT = { liege = { primary_title = { has_law = slavery_0 } } }
					}
				}
			}
			OR = {
				prisoner = no
				NOT = { host = { is_liege_of = ROOT } }
			}	
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				NOT = { has_slavery_culture_trigger = yes }
				NOT = { has_slavery_religion_trigger = yes }
				NOT = { trait = lunatic }
				NOT = { trait = arbitrary }
				NOT = { culture = ironborn }
			}
			modifier = {
				factor = 0
				has_dynasty_flag = liberator_dynasty
			}
			modifier = {
				factor = 2
				trait = proud
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 2
				trait = cruel
			}
			modifier = {
				factor = 2
				trait = wroth
			}
			modifier = {
				factor = 2
				trait = ruthless
			}
			
			modifier = {
				factor = 5
				OR = {
					has_slavery_culture_trigger = yes	
					has_slavery_religion_trigger = yes
				}
				NOT = {
					has_antislavery_religion_trigger = yes
				}
				NOT = { trait = arbitrary }
			}
			modifier = {
				factor = 2
				OR = {
					has_slavery_culture_trigger = yes	
					has_slavery_religion_trigger = yes
				}
				NOT = {
					has_antislavery_religion_trigger = yes
				}
				trait = just
			}
			modifier = {
				factor = 0.05
				OR = {
					has_antislavery_culture_trigger = yes
					has_antislavery_religion_trigger = yes
				}
				NOT = { trait = arbitrary }
			}
			modifier = {
				factor = 0
				OR = {
					has_antislavery_culture_trigger = yes
					has_antislavery_religion_trigger = yes
				}
				trait = just
			}
			modifier = {
				factor = 0.5
				has_antislavery_religion_trigger = yes
			}
			modifier = {
				factor = 0.2
				has_antislavery_religion_trigger = yes
				NOT = { trait = cynical }
			}
			modifier = {
				factor = 0.5
				has_antislavery_religion_trigger = yes
				trait = zealous
			}
			
			modifier = {
				factor = 5
				culture_group = iron_isles_culture
				NOT = { trait = arbitrary }
			}
			modifier = {
				factor = 2
				culture_group = iron_isles_culture
				trait = just
			}
			modifier = {
				factor = 2
				culture_group = iron_isles_culture
				trait = proud
			}
		}
		set_character_flag = pro_slavery_rebel
		tooltip = {		
			liege = {
				reverse_war = {
					target = ROOT
					casus_belli = overthrow_ruler
				}
			}
		}	
		custom_tooltip = {
			text = TOOLTIPSLAVERY750
		}
	}
}
#Pro-Slavery Rebellion!
character_event = {
	id = slavery.751
	desc = "EVTDESCSLAVERY751"
	picture = GFX_evt_slavery
	
	is_triggered_only = yes
	
	trigger = {
		tier = EMPEROR
		any_vassal = {
			tier = KING
			has_character_flag = pro_slavery_rebel
		}
	}
	
	immediate = {
		random_vassal = {
			limit = {
				tier = KING
				has_character_flag = pro_slavery_rebel
			}
			save_event_target_as = pro_slavery_rebel
			clr_character_flag = pro_slavery_rebel
		}
	}

	option = {
		name = "EVTOPTASLAVERY751" #OK
		hidden_tooltip = {
			any_vassal = {
				limit = {
					tier = KING
					has_character_flag = pro_slavery_rebel						
				}
				set_character_flag = issue_punishments #this stops them being split prematurely by mega war event
			}	
		}
		event_target:pro_slavery_rebel = {		
			war = {
				target = ROOT
				casus_belli = overthrow_ruler
			}
			ROOT = {
				any_vassal = {
					limit = {
						tier = KING
						has_character_flag = pro_slavery_rebel						
					}
					hidden_tooltip = { #mega wars
						character_event = { id = mega_wars.4 } #set empire title flag
						set_defacto_liege = THIS
						opinion = { who = PREV modifier = opinion_de_facto_liege years = 25 }
						clr_character_flag = independant
						set_character_flag = mega_war_remove_leader
						clr_character_flag = must_decide
						clr_character_flag = joined_independance_war
						set_character_flag = mega_war_decision_cooldown
						if = { #If King owes money set flag
							limit = {
								has_opinion_modifier = {
									who = PREV
									modifier = opinion_liege_loan
								}
							}	
							set_character_flag = mega_war_liege_loan
						}
						set_character_flag = against_king
						clr_character_flag = neutral
						clr_character_flag = supporting_king
						clr_character_flag = inherit_war
						clr_character_flag = mega_war_remove_leader	
						opinion = {
							modifier = opinion_with_rebel_leader
							who = PREVPREV
							years = 100
						}	
						reverse_opinion = {
							modifier = opinion_joined_rebellion
							who = ROOT
							years = 10
						}	
						any_vassal = {
							limit = {
								NOT = { war_with = PREV }
								war = no
								primary_title = {
									mercenary = no
									holy_order = no
								}
							}
							clr_character_flag = supporting_king
							clr_character_flag = neutral 
							clr_character_flag = against_king
							# clr_character_flag = rebel_leader
							# clr_character_flag = post_civil_war_wars
							# clr_character_flag = independant
							# clr_character_flag = join_independance_asked	
							# clr_character_flag = inherit_war 
							#opinion = { who = FROM modifier = opinion_deciding_king days = 10 }
							if = {
								limit = {
									NOT = { has_character_flag = flag_crown_loyalist }
									NOT = { in_faction = faction_liege_loyalist }
								}
								letter_event = { id = mega_wars.25 days=3 }	
							}
							if = { #Crown Loyalists
								limit = { has_character_flag = flag_crown_loyalist }
								character_event = { id = mega_wars.19 days=3 }	
							}
							if = { #Liege Loyalists
								limit = { in_faction = faction_liege_loyalist }
								character_event = { id = mega_wars.20 days=3 }	
							}
						}	
						any_realm_character = { #Dragon Rider's can choose sides
							limit = {
								trait = dragon_rider
								OR = {
									liege = { character = PREVPREV }	
									liege = { liege = { character = PREVPREVPREV }	}
								}	
								is_ruler = no	
								prisoner = no					
								NOT = { trait = incapable }
								can_press_claims_trigger = yes
							}
							clr_character_flag = supporting_king
							clr_character_flag = neutral 
							clr_character_flag = against_king
							letter_event = { id = mega_wars.25 days = 4 }				
						}						
					}	
					join_attacker_wars = PREVPREV
					clr_character_flag = pro_slavery_rebel
					clr_character_flag = issue_punishments
				}
			}
		}
		hidden_tooltip = {
			any_vassal = {
				limit = {
					tier = KING					
				}
				clr_character_flag = issue_punishments
			}	
		}
	}
}	
#Inform slavery has been abolished (from decision)
letter_event = {
	id = slavery.752
	desc = "EVTDESCSLAVERY752"
	
	is_triggered_only = yes

	option = {
		name = OK
		clr_character_flag = slavery_law_letter
	}
}	
#Inform slavery has been legalised (from decision)
letter_event = {
	id = slavery.753
	
	desc = {
		text = "EVTDESCSLAVERY753"
		trigger = { event_target:slavery_title = { has_law = slavery_2 } }
	}
	desc = {
		text = "EVTDESCSLAVERY753B"
		trigger = { event_target:slavery_title = { has_law = slavery_3 } }
	}
	
	is_triggered_only = yes

	option = {
		name = OK
		clr_character_flag = slavery_law_letter
	}
}	

#Some characters unhappy with slave raid
character_event = {
	id = slavery.760
	desc = "EVTDESCSLAVERY760"
	picture = GFX_evt_slavery
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTASLAVERY760"	
		any_independent_ruler = {
			limit = {
				OR = {
					AND = {
						has_antislavery_religion_trigger = yes
						religion_group = ROOT
					}	
					AND = {
						has_antislavery_culture_trigger = yes
						culture_group = ROOT
					}	
				}
				OR = {
					trait = zealous
					trait = honorable
					trait = kind
					AND = {
						NOT = { trait = arbitrary }
						NOT = { trait = ruthless }
						NOT = { trait = lunatic }
					}	
				}
				NOT = { tier = BARON }
				NOT = { same_realm = ROOT }
				NOT = { ROOT = { rightful_religious_head_scope = { character = PREVPREV } } }
				demesne_size = 1
				is_within_diplo_range = ROOT
			}
			opinion = {
				who = ROOT
				modifier = opinion_launched_slave_raid
				months = 60
			}
		}
		any_realm_lord = {
			limit = {
				OR = {
					has_antislavery_religion_trigger = yes
					has_antislavery_culture_trigger = yes
				}
				OR = {
					trait = zealous
					trait = honorable
					trait = kind
					AND = {
						NOT = { trait = arbitrary }
						NOT = { trait = ruthless }
						NOT = { trait = lunatic }
					}	
				}
				OR = {
					liege = { character = ROOT }
					NOT = { tier = BARON }
				}
				NOT = { character = ROOT }
			}
			opinion = {
				who = ROOT
				modifier = opinion_launched_slave_raid
				months = 60
			}
		}
		liege = {
			if = {
				limit = { NOT = { character = ROOT } }
				any_vassal = {
					limit = {
						OR = {
							has_antislavery_religion_trigger = yes
							has_antislavery_culture_trigger = yes
						}
						OR = {
							trait = zealous
							trait = honorable
							trait = kind
							AND = {
								NOT = { trait = arbitrary }
								NOT = { trait = ruthless }
								NOT = { trait = lunatic }
							}	
						}
						NOT = { tier = BARON }
						NOT = { character = ROOT }
					}
					opinion = {
						who = ROOT
						modifier = opinion_launched_slave_raid
						months = 60
					}
				}
			}	
		}	
		if = {
			limit = { has_antislavery_religion_trigger = yes }
			piety = -100
			rightful_religious_head_scope = {
				if = {
					limit = { 
						NOT = { character = ROOT } 
						NOT = { is_liege_or_above = ROOT } 
					}
					opinion = {
						who = ROOT
						modifier = opinion_launched_slave_raid
						months = 60
					}
				}
			}
		}		
	}
}	
#Natives Enslaved
character_event = {
	id = slavery.770
	desc = "EVTDESCSLAVERY770"
	picture = GFX_evt_slavery
	
	is_triggered_only = yes
	
	immediate = {
		FROM = { location = { save_event_target_as = enslaved_natives_province } } #for loc
	}
	
	option = {
		name = "EVTOPTASLAVERY770"	
		character_event = { id = slavery.1000 tooltip = "EVTTOOLTIPSLAVERY1000" }	
		FROM = { location = { slave_raid_gain_slaves_effect = yes } }
		clear_event_target = enslaved_natives_province
	}
}	
#Slaves from raid gained (in subsequent event to avoid 'random' duplications)
character_event = {
	id = slavery.780
	desc = "EVTDESCSLAVERY780"
	
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			50 = {
				create_random_diplomat = {
					random_traits = yes
					culture = event_target:slave_raid_province
					religion = event_target:slave_raid_province
					dynasty = none
					historical = yes
				}
				hidden_tooltip = {
					new_character = {
						add_trait = slave					
						change_diplomacy = 4
						set_character_flag = slave_raid_slave
					}
				}
			}
			50 = {
				create_random_diplomat = {
					female = yes
					random_traits = yes
					culture = event_target:slave_raid_province
					religion = event_target:slave_raid_province
					dynasty = none
					historical = yes
				}
				hidden_tooltip = {
					new_character = {
						add_trait = slave
						change_diplomacy = 4
						set_character_flag = slave_raid_slave
					}
				}
			}
			50 = {
				create_random_steward = {
					random_traits = yes
					culture = event_target:slave_raid_province
					religion = event_target:slave_raid_province
					dynasty = none
					historical = yes
				}
				hidden_tooltip = {
					new_character = {
						add_trait = slave
						change_stewardship = 4
						set_character_flag = slave_raid_slave
					}
				}
			}
			50 = {
				create_random_steward = {
					female = yes
					random_traits = yes
					culture = event_target:slave_raid_province
					religion = event_target:slave_raid_province
					dynasty = none
					historical = yes
				}
				hidden_tooltip = {
					new_character = {
						add_trait = slave
						change_stewardship = 4
						set_character_flag = slave_raid_slave
					}
				}
			}
		}
		random_list = {
			90 = {
				create_random_soldier = {
					random_traits = yes
					culture = event_target:slave_raid_province
					religion = event_target:slave_raid_province
					dynasty = none
					historical = yes
				}
				hidden_tooltip = {
					new_character = {
						add_trait = slave
						random_list = {
							15 = { add_trait = poor_warrior }
							60 = { add_trait = trained_warrior }
							25 = { add_trait = skilled_warrior }
						}
						if = {
							limit = { religion = the_seven }
							random = { chance = 33 knight_character_effect = yes }
						}
						set_character_flag = slave_raid_slave
					}
				}
			}
			10 = {
				modifier = {
					factor = 81
					event_target:slave_raid_province = { 
						culture_group = hyrkoon_group
					}
				}
				create_random_soldier = {
					female = yes
					random_traits = yes
					culture = event_target:slave_raid_province
					religion = event_target:slave_raid_province
					dynasty = none
					historical = yes
				}
				hidden_tooltip = {
					new_character = {
						add_trait = slave
						random_list = {
							15 = { add_trait = poor_warrior }
							60 = { add_trait = trained_warrior }
							25 = { add_trait = skilled_warrior }
						}
						set_character_flag = slave_raid_slave
					}
				}
			}
		}
		random_list = {
			50 = {
				create_random_intriguer = {
					random_traits = yes
					culture = event_target:slave_raid_province
					religion = event_target:slave_raid_province
					dynasty = none
					historical = yes
				}
				hidden_tooltip = {
					new_character = {
						add_trait = slave
						change_intrigue = 4
						set_character_flag = slave_raid_slave
					}
				}
			}
			50 = {
				create_random_intriguer = {
					female = yes
					random_traits = yes
					culture = event_target:slave_raid_province
					religion = event_target:slave_raid_province
					dynasty = none
					historical = yes
				}
				hidden_tooltip = {
					new_character = {
						add_trait = slave
						change_intrigue = 4
						set_character_flag = slave_raid_slave
					}
				}
			}
			50 = {
				modifier = {
					factor = 0
					event_target:slave_raid_province = { religion = harpy }
				}
				modifier = {
					factor = 0
					event_target:slave_raid_province = { religion = shadowbinders }
				}
				create_random_priest = {
					random_traits = yes
					culture = event_target:slave_raid_province
					religion = event_target:slave_raid_province
					dynasty = none
					historical = yes
				}
				hidden_tooltip = {
					new_character = {
						add_trait = slave
						change_learning = 4
						add_priest_trait_effect = yes
						set_character_flag = slave_raid_slave
					}
				}
			}
			50 = {
				modifier = {
					factor = 0
					event_target:slave_raid_province = { religion = drowned_god }
				}
				modifier = {
					factor = 0
					event_target:slave_raid_province = { religion = bearded_priests }
				}
				modifier = {
					factor = 0
					event_target:slave_raid_province = { religion = qarth_warlocks }
				}
				create_random_priest = {
					female = yes
					random_traits = yes
					culture = event_target:slave_raid_province
					religion = event_target:slave_raid_province
					dynasty = none
					historical = yes
				}
				hidden_tooltip = {
					new_character = {
						add_trait = slave
						change_learning = 4
						add_priest_trait_effect = yes
						set_character_flag = slave_raid_slave
					}
				}
			}
		}
		any_courtier = {
			limit = {
				trait = slave
				has_character_flag = slave_raid_slave
			}	
			opinion = { who = ROOT modifier = opinion_my_owner }
			reverse_opinion = { who = ROOT modifier = opinion_my_slave }
			opinion = { who = ROOT modifier = opinion_enslaved_me }			
			if = {
				limit = {
					culture_group = hyrkoon_group
					is_female = no
					NAND = {
						OR = {
							is_strong_trigger = yes 
							trait = tall
							trait = fair
						}
						NOT = { trait = blinded }
						NOT = { is_crippled_trigger = yes }
						NOT = { trait = incapable }
						NOT = { trait = dwarf }
						NOT = { is_weak_trigger = yes }
						NOT = { trait = inbred }
						NOT = { trait = imbecile }
						NOT = { is_dumb_trigger = yes }		
						NOT = { trait = ugly }					
						NOT = { trait = clubfooted }
						NOT = { trait = hunchback }
					}
				}
				add_trait = eunuch
			}
			if = {
				limit = {
					culture = brindlemen
				}
				character_event = { id = essos.1 }
			}
			if = {
				limit = {
					culture = mantaryan
				}
				character_event = { id = essos.4 }
			}
			if = {
				limit = {
					culture = lengi
					NOT = { trait = tall }
					NOT = { trait = dwarf }
				}
				random_list = {
					75 = { add_trait = tall }
					25 = {}
				}
			}
			##Naathi chance of being quick/fair
			if = {
				limit = {
					culture = naathi
				}
				if = {
					limit = {
						NOT = { trait = genius }
						NOT = { trait = quick }
						NOT = { trait = slow }
						NOT = { trait = imbecile }
						NOT = { trait = inbred }
					}
					random_list = {
						1 = { add_trait = genius }
						9 = { add_trait = quick }
						89 = {  }
					}
				}
				if = { 	
					limit = {	
						NOT = { trait = ugly }
						NOT = { trait = fair }
					}
					random = {
						chance = 20
						add_trait = fair
					}
				}
			}
			#High Valyrian
			if = {
				limit = {
					culture = high_valyrian
				}
				if = { 	
					limit = {	
						NOT = { trait = ugly }
						NOT = { trait = fair }
					}
					random = {
						chance = 20
						add_trait = fair
					}
				}
				remove_trait = inbred
			}	
			#Lysene
			if = {
				limit = {
					culture = lysene
				}
				if = { 	
					limit = {	
						NOT = { trait = ugly }
						NOT = { trait = fair }
					}
					random = {
						chance = 20
						add_trait = fair
					}
				}
			}
		}		
	}
	
	option = {
		name = OK
		any_courtier = {
			limit = {
				trait = slave
				has_character_flag = slave_raid_slave
			}			
			tooltip = { show_portrait = yes }
			clr_character_flag = slave_raid_slave
		}
	}
}	